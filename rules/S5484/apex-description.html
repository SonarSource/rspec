<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_batch_interface.htm">There is a limit</a> to the number of batch jobs which can be executed at the same time. Executing batch jobs in triggers or in loops is complex as it can easily reach this limit (example: after a bulk update), thus it is recommended to avoid it. Note that checking if the limit is already reached is not enough as nothing prevents the addition of a job between the check and the subsequent call to <code>executeBatch</code>.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when <code>Databasee.executeBatch()</code> is called in a Trigger or in a loop.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">trigger MyBatchTrigger on Account (after insert) {
    MyBatch batch = new MyBatch();
    Database.executeBatch(batch);  // Noncompliant
}

public class MyBatchLoop {
    static void createManyBatch() {
        for (integer i = 0; i &lt; 1000; ++i) {
            MyBatch batch = new MyBatch();
            Database.executeBatch(batch);  // Noncompliant
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_batch_interface.htm#apex_batch_best_practices">Using Batch Apex</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Remove this batch job execution</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_9_oct_2019_172758_nicolas_harraudeau_wrote">on 9 Oct 2019, 17:27:58 Nicolas Harraudeau wrote:</h3>
<div class="paragraph">
<p><strong>Out of Scope:</strong> <code>System.scheduleBatch</code> may also reach the limit of batch jobs, but it is not possible to schedule two jobs with the same name. Thus it would be necessary to check if many jobs are scheduled or if the trigger only tries to schedule a job when it isn&#8217;t already scheduled.</p>
</div>
</div>
</div>
</div>