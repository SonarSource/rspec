<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kotlin provides the operators <code>as</code> and <code>as?</code> to cast an expression to a specific type,
and <code>is</code> to check the assignment compatibility with a type.
These operators are used for downcasts, smart casts, and run-time type checking.</p>
</div>
<div class="paragraph">
<p>In case the <code>as</code> or <code>as?</code> operator is used for casting between incompatible types,
that is, distinct types and neither being a subtype of the other,
the cast will never succeed but always throw a <code>ClassCastException</code>.
This results in dead code and is likely a symptom of wrong program logic.</p>
</div>
<div class="paragraph">
<p>Likewise, the <code>is</code> operator is redundant and will never return <code>true</code> if the type of the expression on the left
side is incompatible with the type on the right.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="sect3">
<h4 id="_code_redundancy">Code redundancy</h4>
<div class="paragraph">
<p>Since the operation will never succeed, it is pointless to use it.
It also leads to dead code branches because <code>as</code> will always break the regular control flow with an exception,
while conditions with <code>is</code> will never or always be satisfied.</p>
</div>
</div>
<div class="sect3">
<h4 id="_wrong_logic">Wrong logic</h4>
<div class="paragraph">
<p>Type casts and type checks that can never succeed are likely
a symptom of wrong program logic.
Developers will not have intended the redundancy of the type check or type cast,
but it might result from an error elsewhere.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Remove the operator and all dead code branches that result from it,
or investigate why the expression that is type cast or type checked has
an unexpected compile-time type.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun types(value: String, elements: List&lt;String&gt;) {
    val a: Int = value as Int // Noncompliant, throws ClassCastException
    val b: Int = value as? Int // Noncompliant, will always be null

    val text = if (value is Int) { // Noncomplient, then-branch is dead code
        "impossible"
    } else {
        "happens always"
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun types(value: Number, elements: List&lt;Number&gt;) {
    val a: Int = value as Int // Compliant, a Number instance could be an Int
    val b: Int = value as? Int // Compliant, a Number instance could be an Int

    val text = if (value is Int) { // Compliant, both branches reachable
        "impossible"
    } else {
        "happens always"
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://kotlinlang.org/docs/typecasts.html">Kotlin API Docs, Type checks and casts</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_articles_blog_posts">Articles &amp; blog posts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/Liskov_substitution_principle">Wikipedia, Liskov substitution principle</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>