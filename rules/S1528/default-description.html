<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Array literals should always be preferred to Array constructors.</p>
</div>
<div class="paragraph">
<p>Array constructors are error-prone due to the way their arguments are interpreted. If more than one argument is used, the array length will be equal to the number of arguments. However, using a single argument will have one of three consequences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the argument is a number and it is a natural number the length will be equal to the value of the argument.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>let arr = new Array(3); // [empty Ã— 3]</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>If the argument is a number, but not a natural number an exception will be thrown.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>let arr = new Array(3.14);  // RangeError: Invalid array length</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Otherwise the array will have one element with the argument as its value.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>let arr = new Array("3");  // ["3"]</pre>
</div>
</div>
<div class="paragraph">
<p>Note that even if you set the length of an array, it will be empty. That is, it will have the number of elements you declared, but they won&#8217;t contain anything, so no callbacks will be applied to the array elements.</p>
</div>
<div class="paragraph">
<p>For these reasons, if someone changes the code to pass 1 argument instead of 2 arguments, the array might not have the expected length. To avoid these kinds of weird cases, always use the more readable array literal initialization format.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let myArray = new Array(x1, x2, x3);   // Noncompliant. Results in 3-element array.
let emptyArray = new Array();          // Noncompliant. Results in 0-element array.

let unstableArray = new Array(n);      // Noncompliant. Variable in results.

let arr = new Array(3); // Noncompliant; empty array of length 3
arr.foreach((x) =&gt; alert("Hello " + x)); // callback is not executed because there's nothing in arr
let anotherArr = arr.map(() =&gt; 42); // anotherArr is also empty because callback didn't execute</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let myArray = [x1, x2, x3];
let emptyArray = [];

// if "n" is the only array element
let unstableArray = [n];
// or,  if "n" is the array length (since ES 2015)
let unstableArray = Array.from({length: n});

let arr = ["Elena", "Mike", "Sarah"];
arr.foreach((x) =&gt; alert("Hello " + x));
let anotherArr = arr.map(() =&gt; 42);  // anotherArr now holds 42 in each element</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Use either "Array.from()" or a literal instead of the "Array" constructor.</p>
</div>
<div class="paragraph">
<p>When the only argument is a numeric literal:</p>
</div>
<div class="paragraph">
<p>Use "Array.from()" instead of the "Array" constructor.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_18_aug_2014_154409_ann_campbell_wrote">on 18 Aug 2014, 15:44:09 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Note that from a SQALE perspective, I believe this rule should be split. The reason to use Object literals is clarity, but you could face real bugs if you don&#8217;t use Array literals.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_mar_2017_140251_ann_campbell_wrote">on 10 Mar 2017, 14:02:51 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~jeanchristophe.collet] did you mean to leave "and Object" in place in the first sentence?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_mar_2017_141536_jean_christophe_collet_wrote">on 10 Mar 2017, 14:15:36 Jean-Christophe Collet wrote:</h3>
<div class="paragraph">
<p>Good catch. Updated the message as well.</p>
</div>
</div>
</div>
</div>