Replace this use of "OnError" with structured error handling.