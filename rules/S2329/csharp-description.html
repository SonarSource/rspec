<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using the <code>base</code> keyword to access a member in anonymous methods, iterator results, and lambda and query expressions results in the compiler creating extra classes under the covers. Those extra classes are "unverifiable", meaning that the under some trust levels, the code will not be allowed to run.</p>
</div>
<div class="paragraph">
<p>Instead, the access should be made from a helper method.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">public Person GetBasePerson()
{
  return delegate () { base.GetThePerson();  } // Noncompliant
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">string BasePerson()
{
  return base.GetThePerson();
}

public Person GetBasePerson()
{
  return delegate () { BasePerson();  } // Noncompliant
}</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_13_apr_2015_105802_freddy_mallet_wrote">on 13 Apr 2015, 10:58:02 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>@Tamas, does this rule make sense to you ? Thanks</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_13_apr_2015_115524_tamas_vajk_wrote">on 13 Apr 2015, 11:55:24 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~freddy.mallet] I had to read up on this thing a bit: (http://blogs.msdn.com/b/ericlippert/archive/2005/11/14/why-are-base-class-calls-from-anonymous-delegates-nonverifiable.aspx) The issue makes sense. BUT I ran the peverify.exe on a sample, and it said that everything is verified, so I believe that this issue has already been solved by the .NET compiler team or by the team who writes peverify.exe. The original post was from 2005.</p>
</div>
<div class="paragraph">
<p>(I disassembled the generated assembly, and it is still generating additional classes with the same logic as before, so I believe the peverify.exe became more clever.)</p>
</div>
<div class="paragraph">
<p>In another post http://blogs.msdn.com/b/ericlippert/archive/2008/11/07/the-future-of-c-part-five.aspx?PageIndex=1#comments, there is a single line of comment from Eric Lippert that says that they solved this problem.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_20_apr_2015_152801_ann_campbell_wrote">on 20 Apr 2015, 15:28:01 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~tamas.vajk] wouldn&#8217;t this still be a valid rule for older code?</p>
</div>
<div class="paragraph">
<p>I.E., do we keep the RSpec &amp; set it to inactive by default, or simply close it?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_21_apr_2015_061909_tamas_vajk_wrote">on 21 Apr 2015, 06:19:09 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] It seems to me that the compiler generated code didn&#8217;t change. It is still creating extra classes under the covers. So, I think that the peverify.exe became more clever. And this would mean that the rule is only valuable if an old version of the peverify.exe is used. So I would probably close it.</p>
</div>
</div>
</div>
</div>