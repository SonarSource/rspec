<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The use of <code>bool</code> operands with other operators is unlikely to be meaningful (or intended). Best case it will be confusing to maintainers, worst case it will not have the intended effect. Either way, it is highly recommended to stick to boolean operators when dealing with <code>bool</code> operands.</p>
</div>
<div class="paragraph">
<p>This rule allows the detection of such uses, which often occur because the logical operators (<code>&amp;&amp;</code>, <code>||</code> and <code>!</code>) can be easily confused with the bitwise operators (<code>&amp;</code>, <code>|</code> and <code>~</code>).</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">bool b1 = true;
bool b2 = false;
int8_t s8a;
if ( b1 &amp; b2 ) // Noncompliant
if ( ~b1 ) // Noncompliant
if ( b1 &lt; b2 ) // Noncompliant
if ( b1 ^ b2 ) // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">if ( b1 &amp;&amp; b2 )
if ( !b1 )
if ( b1 == false )
if ( b1 == b2 )
if ( b1 != b2 )
s8a = b1 ? 3 : 7;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>Operators <code>|=</code> and <code>&amp;=</code> are ignored when used with <code>bool</code> operands. Operator <code>&#43;&#43;</code> is also ignored with a <code>bool</code> operand because it is covered by rule <a data-rspec-id="S2668" class="rspec-auto-link">S2668</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">void test(bool b1, bool b2, int i1) {
  b1 |= b2; // ignored
  b1++; // ignored here, handled by S2668
  b1 &amp;= b2; // ignored
  b1 &amp;= i1; // Noncompliant; right operand is not a bool
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>MISRA C&#43;&#43;:2008, 4-5-1 - Expressions with type bool shall not be used as operands to built-in operators other than the assignment operator =, the logical operators &amp;&amp;, ||, !, the equality operators == and !=, the unary &amp; operator, and the conditional operator.</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>Reconsider this operator for 'bool' operand; was 'XX' meant instead?</p>
</li>
<li>
<p>Reconsider this operator for 'bool' operand.</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s883">relates to: <a data-rspec-id="S883" class="rspec-auto-link">S883</a></h3>

</div>
<div class="sect2">
<h3 id="_on_17_oct_2014_150313_ann_campbell_wrote">on 17 Oct 2014, 15:03:13 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~samuel.mercier]</p>
</div>
<div class="ulist">
<ul>
<li>
<p>I&#8217;ve changed this to reliability &amp; added a 'bug' tag since the description says the usage is likely an error (bug tag) &amp; therefore the code doesn&#8217;t do what you thought it did (reliability).</p>
</li>
<li>
<p>There&#8217;s no need to explicitly mark code as compliant in the Compliant Solution. By definition, there should be no noncompliant code in there. :-)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_on_17_oct_2014_152433_ann_campbell_wrote">on 17 Oct 2014, 15:24:33 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~samuel.mercier] wouldn&#8217;t this rule also apply to at least C &amp; Obj-C?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_2_jun_2015_114020_evgeny_mandrikov_wrote">on 2 Jun 2015, 11:40:20 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I&#8217;m wondering how this one relates to <a data-rspec-id="S867" class="rspec-auto-link">RSPEC-867</a>?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_2_jun_2015_123909_ann_campbell_wrote">on 2 Jun 2015, 12:39:09 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>I would say they&#8217;re two sides of the same coin [~evgeny.mandrikov] - a complimentary, opposing pair: "don&#8217;t use bools with anything but &amp;&amp; (&amp;etc.)" versus "don&#8217;t use non-bools with &amp;&amp; (&amp;etc.)"</p>
</div>
<div class="paragraph">
<p>If we allowed the restating and combination of MISRA rules, then these might be covered together in a single implementation&#8230;&#8203; ;)</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_26_jun_2015_092556_massimo_paladin_wrote">on 26 Jun 2015, 09:25:56 Massimo PALADIN wrote:</h3>
<div class="paragraph">
<p>Title changed to be shorter than 200 characters which is the SQ limit.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_14_apr_2017_193935_ann_campbell_wrote">on 14 Apr 2017, 19:39:35 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>It&#8217;s not currently clear whether this rule is primarily about bugs or code smells. CPP-1816 has been entered to remove some of the current noise. It&#8217;s possible other passes will be needed.</p>
</div>
</div>
</div>
</div>