<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.nullable-1">Nullable value types</a> can hold either a value or <code>Nothing</code>.</p>
</div>
<div class="paragraph">
<p>The value stored in the nullable type can be accessed with the <code>Value</code> property or by casting it to the underlying type. Still, both operations throw an <code>InvalidOperationException</code> when the value is <code>Nothing</code>. A nullable type should always be tested before accessing the value to avoid raising exceptions.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-vbnet" data-lang="vbnet">Sub Sample(condition As Boolean)
    Dim nullableValue As Integer? = If(condition, 42, Nothing)
    Console.WriteLine(nullableValue.Value)             ' Noncompliant: InvalidOperationException is raised

    Dim nullableCast As Integer? = If(condition, 42, Nothing)
    Console.WriteLine(CType(nullableCast, Integer))    ' Noncompliant: InvalidOperationException is raised
End Sub</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-vbnet" data-lang="vbnet">Sub Sample(condition As Boolean)
    Dim nullableValue As Integer? = If(condition, 42, Nothing)
    If nullableValue.HasValue Then
        Console.WriteLine(nullableValue.Value)
    End If

    Dim nullableCast As Integer? = If(condition, 42, Nothing)
    If nullableCast.HasValue Then
        Console.WriteLine(CType(nullableCast, Integer))
    End If
End Sub</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.nullable-1">Nullable&lt;T&gt;</a></p>
</li>
<li>
<p>CWE - <a href="https://cwe.mitre.org/data/definitions/476">CWE-476 - NULL Pointer Dereference</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="sect3">
<h4 id="_c">C#</h4>
<div class="paragraph">
<p>"xxx" is null on at least one execution path.</p>
</div>
</div>
<div class="sect3">
<h4 id="_vb_net">VB.NET</h4>
<div class="paragraph">
<p>"xxx" is <code>Nothing</code> on at least one execution path.</p>
</div>
<hr>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s2966">relates to: <a data-rspec-id="S2966" class="rspec-auto-link">S2966</a></h3>

</div>
<div class="sect2">
<h3 id="_on_21_jun_2016_142134_tamas_vajk_wrote">on 21 Jun 2016, 14:21:34 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] Let me know what you think.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_22_jun_2016_084016_ann_campbell_wrote">on 22 Jun 2016, 08:40:16 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~tamas.vajk], now that the differences in the language mechanisms have had time to sink in, I&#8217;m going to leave this as a top-level RSpec.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_29_jun_2016_121005_freddy_mallet_wrote">on 29 Jun 2016, 12:10:05 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>Hi [~tamas.vajk], I can&#8217;t manage to understand why this rule is relevant in Java because for me there is no such concept of nullable value in Java. Or am I missing something ? Thanks cc [~michael.gumowski], [~nicolas.peru], [~ann.campbell.2]</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_29_jun_2016_132019_nicolas_peru_wrote">on 29 Jun 2016, 13:20:19 Nicolas Peru wrote:</h3>
<div class="paragraph">
<p>\[~freddy.mallet] Optional. (<code>.get()</code> and <code>.isPresent()</code>)</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_29_jun_2016_134730_freddy_mallet_wrote">on 29 Jun 2016, 13:47:30 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>Thanks [~nicolas.peru] !</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_29_jun_2016_143312_michael_gumowski_wrote">on 29 Jun 2016, 14:33:12 Michael Gumowski wrote:</h3>
<div class="paragraph">
<p>\[~freddy.mallet] I think the java aspect of this rule should be handled in a different RSPEC.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_3_jul_2016_183003_freddy_mallet_wrote">on 3 Jul 2016, 18:30:03 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>I think [~ann.campbell.2] is right [~michael.gumowski] : would be better for java to create a sub-task instead of creating another dedicated RSPEC.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_4_jul_2016_092045_michael_gumowski_wrote">on 4 Jul 2016, 09:20:45 Michael Gumowski wrote:</h3>
<div class="paragraph">
<p>Okay, fine for me [~freddy.mallet] &amp; [~ann.campbell.2]!</p>
</div>
</div>
</div>
</div>