<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when HTTP callouts are made directly within Apex triggers without using asynchronous processing mechanisms.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Salesforce platform architecture prevents synchronous HTTP callouts from being executed within trigger contexts due to several critical limitations.</p>
</div>
<div class="paragraph">
<p>Triggers run within database transactions that must complete quickly to maintain system performance and data consistency. When a trigger attempts to make a synchronous HTTP callout, it blocks the entire transaction until the external system responds. This creates several problems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Governor limit violations</strong>: Salesforce enforces strict time limits on trigger execution. External API calls can easily exceed these limits, causing the entire transaction to fail.</p>
</li>
<li>
<p><strong>Transaction blocking</strong>: While waiting for the HTTP response, the database transaction remains open, potentially causing deadlocks and preventing other operations from completing.</p>
</li>
<li>
<p><strong>Unreliable external dependencies</strong>: If the external system is slow or unavailable, it directly impacts the core Salesforce operation, making data saves fail unexpectedly.</p>
</li>
<li>
<p><strong>Poor user experience</strong>: Users experience delays or errors when performing simple operations like creating or updating records.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Salesforce platform specifically prohibits synchronous callouts in triggers to prevent these issues and maintain the multi-tenant environment&#8217;s stability.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Applications will fail at runtime with <code>System.CalloutException: You have uncommitted work pending. Please commit or rollback before calling out</code> errors. This prevents users from completing essential business operations like creating or updating records, leading to system downtime and frustrated users.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Move HTTP callouts to an asynchronous @future method. The @future annotation with callout=true allows the method to make HTTP requests outside the original transaction context.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">trigger AccountTrigger on Account (after insert) {
    Http h = new Http();
    HttpRequest req = new HttpRequest();
    req.setEndpoint('https://api.example.com/webhook');
    req.setMethod('POST');
    HttpResponse res = h.send(req); // Noncompliant
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">trigger AccountTrigger on Account (after insert) {
    AccountCalloutService.makeAsyncCallout(Trigger.new);
}

public class AccountCalloutService {
    @future(callout=true)
    public static void makeAsyncCallout(List&lt;Account&gt; accounts) {
        Http h = new Http();
        HttpRequest req = new HttpRequest();
        req.setEndpoint('https://api.example.com/webhook');
        req.setMethod('POST');
        HttpResponse res = h.send(req);
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Apex Developer Guide - Future Methods - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_invoking_future_methods.htm">Official documentation on using @future methods for asynchronous processing</a></p>
</li>
<li>
<p>Apex Developer Guide - Queueable Apex - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_queueing_jobs.htm">Comprehensive guide to implementing Queueable Apex for asynchronous operations</a></p>
</li>
<li>
<p>Apex Developer Guide - HTTP Services - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_classes_restful_http.htm">Documentation on making HTTP callouts in Apex</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>Salesforce Governor Limits - <a href="https://developer.salesforce.com/docs/atlas.en-us.salesforce_app_limits_cheatsheet.meta/salesforce_app_limits_cheatsheet/salesforce_app_limits_platform_apex.htm">Platform limits that prevent synchronous callouts in triggers</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>