This rule raises an issue when a published file uses `require()` to import unpublished files or devDependencies.

== Why is this an issue?

When you publish a Node.js package to npm, only certain files are included in the published package. Files are considered published if they're included in the `"files"` field of `package.json` (or if no `"files"` field exists) and not excluded by `.npmignore`.

If your published code tries to `require()` unpublished files or modules listed in `devDependencies`, your package will work locally during development but fail with "Module Not Found" errors after being published to npm. This happens because the required files or dependencies won't be available in the published package.

This rule helps prevent deployment issues by catching these problems during development, ensuring that your published code only depends on resources that will actually be available in the published package.

=== What is the potential impact?

Using `require()` to import unpublished files or devDependencies can cause your package to fail after publication with "Module Not Found" errors, even though it works correctly in your local development environment. This can lead to broken packages for your users and require emergency fixes.

=== How to fix?


Remove the require() call for unpublished files or devDependencies. If you need the functionality, move the dependency to regular dependencies or ensure the file is published.

==== Non-compliant code example

[source,javascript,diff-id=1,diff-type=noncompliant]
----
// In a published file
const testHelper = require('./test/helper'); // Noncompliant: test files are typically unpublished
const devTool = require('some-dev-tool'); // Noncompliant: devDependencies aren't published
----

==== Compliant code example

[source,javascript,diff-id=1,diff-type=compliant]
----
// Remove the require() calls or move dependencies to regular dependencies
// const testHelper = require('./test/helper'); // Removed
// const devTool = require('some-dev-tool'); // Removed or moved to dependencies
----

=== Documentation

 * npm package.json files field - https://docs.npmjs.com/cli/v11/configuring-npm/package-json#files[Documentation on how npm determines which files to include in published packages]
 * npm .npmignore - https://docs.npmjs.com/cli/v11/using-npm/developers#keeping-files-out-of-your-package[How to exclude files from npm packages using .npmignore]
 * Node.js require() documentation - https://nodejs.org/api/modules.html#requireid[Official Node.js documentation for the require() function]

=== Related Rules

 * n/no-unpublished-import - https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-unpublished-import.md[Similar rule for ES6 import statements]
 * n/no-missing-require - https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-missing-require.md[Disallow require() of modules that don't exist]

