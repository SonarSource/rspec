<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when a collection implementation class from <code>java.util.*</code> is used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>as a return type of a <code>public</code> method.</p>
</li>
<li>
<p>as an argument type of a <code>public</code> method.</p>
</li>
<li>
<p>as the type of a <code>public</code> field.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Java Collections API offers a well-structured hierarchy of interfaces
designed to hide collection implementation details.
For the various collection data structures like lists, sets, and maps,
specific interfaces (<code>java.util.List</code>, <code>java.util.Set</code>, <code>java.util.Map</code>)
cover the essential features.</p>
</div>
<div class="paragraph">
<p>When passing collections as method parameters, return values, or when exposing fields,
it is generally recommended to use these interfaces instead of the implementing classes.
The implementing classes, such as <code>java.util.LinkedList</code>, <code>java.util.ArrayList</code>,
and <code>java.util.HasMap</code>, should only be used for collection instantiation.
They provide finer control over the performance characteristics of those structures,
and developers choose them depending on their use case.</p>
</div>
<div class="paragraph">
<p>For example, if fast random element access is essential, <code>java.util.ArrayList</code> should be instantiated.
If inserting elements at a random position into a list is crucial, a <code>java.util.LinkedList</code> should be preferred.
However, this is an implementation detail your API should not expose.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class Employees {
  public final HashSet&lt;Employee&gt; employees   // Noncompliant, field type should be "Set"
    = new HashSet&lt;Employee&gt;();

  public HashSet&lt;Employee&gt; getEmployees() {  // Noncompliant, return type should be "Set"
    return employees;
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class Employees {
  public final Set&lt;Employee&gt; employees       // Compliant
    = new HashSet&lt;Employee&gt;();

  public Set&lt;Employee&gt; getEmployees() {      // Compliant
    return employees;
  }
}</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>"XXX" should be an interface such as "YYY" rather than the implementation "ZZZ".</p>
</div>
<div class="paragraph">
<p>The return type of this method should be an interface such as "YYYY" rather than the implementation "ZZZ".</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_15_oct_2013_092856_freddy_mallet_wrote">on 15 Oct 2013, 09:28:56 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>Is implemented by http://jira.codehaus.org/browse/SONARJAVA-360</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_apr_2017_002642_ron190_wrote">on 10 Apr 2017, 00:26:42 ron190 wrote:</h3>
<div class="paragraph">
<p>I changed LinkedList to List in my project but after 4 levels of changes that I applied successively to return types and parameter types, I encountered list.getLast() and list.removeLast() but those methods do not exist in interface List.</p>
</div>
<div class="paragraph">
<p>Is it right to use list.get(list.size()-1) instead of list.getLast() in term of performances and complexity ?</p>
</div>
<div class="paragraph">
<p>LinkedList keeps references to both head and tail and offers a complexity of O(1), is it the same with list.get(list.size()-1) ?</p>
</div>
<div class="paragraph">
<p>Posted to Groups (thank you Ann)</p>
</div>
<div class="paragraph">
<p><a href="https://groups.google.com/forum/#!topic/sonarqube/jc0WU-8RE94" class="bare">https://groups.google.com/forum/#!topic/sonarqube/jc0WU-8RE94</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_apr_2017_155331_ann_campbell_wrote">on 10 Apr 2017, 15:53:31 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~ron190] this isn&#8217;t the best place to initiate a discussion. You&#8217;ll reach a broader audience if you go to the <a href="https://groups.google.com/forum/#!forum/sonarqube">SonarQube Google Group</a></p>
</div>
</div>
</div>
</div>