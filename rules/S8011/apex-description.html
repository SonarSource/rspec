<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when SOQL queries filter records using the <code>LastModifiedDate</code> field in WHERE clauses.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Salesforce, query performance depends heavily on whether the query can use indexed fields. The platform automatically creates indexes on certain system fields to speed up data retrieval.</p>
</div>
<div class="paragraph">
<p><code>LastModifiedDate</code> is not indexed by default, which means queries filtering on this field require full table scans. When your organization has large amounts of data (over 100,000 records), these non-selective queries can become extremely slow or even fail due to governor limits.</p>
</div>
<div class="paragraph">
<p><code>SystemModStamp</code>, on the other hand, is automatically indexed by Salesforce. Both fields track when records were last modified, but <code>SystemModStamp</code> provides the same filtering capability with much better performance.</p>
</div>
<div class="paragraph">
<p>The difference becomes critical in production environments with large datasets, where non-selective queries can cause timeouts, poor user experience, and may trigger Salesforce&#8217;s non-selective query prevention mechanisms.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Using <code>LastModifiedDate</code> in SOQL queries can lead to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Slow query execution times, especially with large datasets</p>
</li>
<li>
<p>Potential query timeouts and failures</p>
</li>
<li>
<p>Poor application performance and user experience</p>
</li>
<li>
<p>Risk of hitting Salesforce governor limits</p>
</li>
<li>
<p>Non-selective query errors when querying objects with more than 100,000 records</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace <code>LastModifiedDate</code> with <code>SystemModStamp</code> in your SOQL WHERE clauses. Both fields serve the same purpose for filtering recently modified records, but <code>SystemModStamp</code> is indexed and provides better performance.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">List&lt;Account&gt; accounts = [SELECT Id, Name FROM Account WHERE LastModifiedDate &gt; :yesterday]; // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">List&lt;Account&gt; accounts = [SELECT Id, Name FROM Account WHERE SystemModStamp &gt; :yesterday];</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>SOQL Best Practices - <a href="https://www.apexhours.com/soql-best-practices">Comprehensive guide to writing efficient SOQL queries in Salesforce</a></p>
</li>
<li>
<p>Query Plan Tool - <a href="https://help.salesforce.com/s/articleView?id=platform.code_dev_console_tab_query_editor_query_plans.htm&amp;type=5">Salesforce documentation on using the Query Plan tool to optimize queries</a></p>
</li>
<li>
<p>Large Data Volumes Best Practices - <a href="https://developer.salesforce.com/docs/atlas.en-us.salesforce_large_data_volumes_bp.meta/salesforce_large_data_volumes_bp/ldv_deployments_introduction.htm">Salesforce guide for handling large data volumes efficiently</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>Salesforce Performance Guidelines - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_gov_limits.htm">Official Salesforce guidelines for writing performant Apex code</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>