<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>for</code> loops are very flexible in C and C&#43;&#43;. Because of that, they can carry a complexity that can make the code error-prone, difficult to understand, and hard to maintain.</p>
</div>
<div class="paragraph">
<p>Many for loops can be written in a way that clearly separates the iteration process from the content of the iteration. This rule makes sure that all the code relevant to the iteration is placed in the for-loop header. The compliant code is then easier to reason about.</p>
</div>
<div class="paragraph">
<p>A for loop is composed of 4 sub-parts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>for([initialization]; [condition]; [update])
  [body]</pre>
</div>
</div>
<div class="paragraph">
<p>We classify the variables used to control them in three categories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <em>loop-counter</em> is a variable modified in the update. It should not be modified in the body.</p>
</li>
<li>
<p>A <em>loop-constant</em> is an auxiliary variable declared in the initialization. Itâ€™s very often used to precompute some data about the end condition or the stride.</p>
</li>
<li>
<p>A <em>pseudo-counter</em> shares some properties with a loop counter, but its update conditions are more complex. It will therefore only be updated in the body, and cannot be used in the update. Using a pseudo-counter makes the loop more complex to reason about, and therefore is not permitted. They are very often declared in the initialization, for instance, to limit their scope, but in some cases reuse existing variables.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, the loop condition should refer to at least one <em>loop-counter</em>, and should not modify anything.</p>
</div>
<div class="paragraph">
<p>This rule is only checking for loops with a condition and an update.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">for( int h = 0, int i = 0 ; h &lt; 10 ; i += 1 ) { // Noncompliant, the loop-counter is not used in the condition
}

for( int i = 0 ; i++ &lt; 10 ; i += 1 ) { // Noncompliant, loop-counter i is updated in the condition
}

for( int i = 0 , int h = 0; i+(++h) &lt; 10 ; i += 1 ) { // Noncompliant, pseudo-counter h is updated in the condition
}

for( int i = 0 ; i &lt; 10 ; i += 1 ) { // Noncompliant, loop-counter i is updated in the body
  if (i%2)  { ++i;}
}

for( int i = 0 , j = 0 ; i &lt; 10 ; i += j) { // Noncompliant, pseudo-counter j is is used in the update
  j = i + 1;
}

for( int i = 0 , j = 0 ; i &lt; 10 + j ; i += 1) { // Noncompliant, pseudo-counter j is is used in the condition
  j = i + 1;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>MISRA C:2004, 13.5 - The three expressions of a for statement shall be concerned only with loop control.</p>
</li>
<li>
<p>MISRA C&#43;&#43;:2008, 6-5-5 - A <em>loop-control-variable</em> other than the <em>loop-counter</em> shall not be modified within <em>condition</em> or <em>expression</em>.</p>
</li>
<li>
<p>MISRA C:2012, 14.2 - A for loop shall be well-formed</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_duplicated_by_s891">is duplicated by: <a data-rspec-id="S891" class="rspec-auto-link">S891</a></h3>

</div>
<div class="sect2">
<h3 id="_is_related_to_s5316">is related to: <a data-rspec-id="S5316" class="rspec-auto-link">S5316</a></h3>

</div>
<div class="sect2">
<h3 id="_relates_to_s891">relates to: <a data-rspec-id="S891" class="rspec-auto-link">S891</a></h3>

</div>
<div class="sect2">
<h3 id="_relates_to_s892">relates to: <a data-rspec-id="S892" class="rspec-auto-link">S892</a></h3>

</div>
<div class="sect2">
<h3 id="_relates_to_s1994">relates to: <a data-rspec-id="S1994" class="rspec-auto-link">S1994</a></h3>

</div>
</div>
</div>