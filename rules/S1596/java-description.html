<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when the <code>Collections.EMPTY_*</code> fields are used instead of the <code>Collections.empty*()</code> methods.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Generic types (types with type parameters) have been introduced into Java with language version 1.5.
If type parameters are specified for a class or method, it is still possible to ignore them to keep backward compatibility with older code,
which is called the <em>raw type</em> of the class or interface.</p>
</div>
<div class="paragraph">
<p>Using raw type expressions is highly discouraged because the compiler cannot perform static type checking on them.
This means that the compiler will not report typing errors about them at compile time,
but a <code>ClassCastException</code> will be thrown during runtime.</p>
</div>
<div class="paragraph">
<p>In Java 1.5, generics were also added to the Java collections API, and the data structures in <code>java.util</code>,
such as <code>List</code>, <code>Set</code>, or <code>Map</code>, now feature type parameters.
<code>Collections.EMPTY_LIST</code>, <code>Collections.EMPTY_SET</code>, and <code>Collections.EMPTY_MAP</code> are relics from before generics,
and they return raw lists, sets, or maps, with the limitations mentioned above.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Collections.emptyList()</code> instead of <code>Collections.EMPTY_LIST</code></p>
</li>
<li>
<p><code>Collections.emptySet()</code> instead of <code>Collections.EMPTY_SET</code></p>
</li>
<li>
<p><code>Collections.emptyMap()</code> instead of <code>Collections.EMPTY_MAP</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, there are variants of <code>Collections.empty*()</code> available also for other collection interfaces,
such as <code>Collections.emptyIterator()</code>, <code>Collections.emptyNavigableMap()</code>, <code>Collections.emptySortedSet()</code>.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">List&lt;String&gt; collection1 = Collections.EMPTY_LIST;     // Noncompliant, raw List
Set&lt;Float&gt; collection2 = Collections.EMPTY_SET;        // Noncompliant, raw Set
Map&lt;Int, String&gt; collection3 = Collections.EMPTY_MAP;  // Noncompliant, raw Map</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">List&lt;String&gt; collection1 = Collections.emptyList();    // Compliant, List&lt;String&gt;
Set&lt;Float&gt; collection2 = Collections.emptySet();       // Compliant, Set&lt;Float&gt;
Map&lt;Int, String&gt; collection3 = Collections.emptyMap(); // Compliant, Map&lt;Int, String&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html">Oracle - Java™ Platform, Standard Edition 8 API Specification, Class Collections</a></p>
</li>
<li>
<p><a href="https://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html">Oracle - The Java™ Tutorials - Raw Types</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_articles_blog_posts">Articles &amp; blog posts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.baeldung.com/java-generics">Baeldung - The Basics of Java Generics</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Replace "Collections.EMPTY_&#8230;&#8203;" by "Collections.empty&#8230;&#8203;()".</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_4_feb_2014_084805_dinesh_bolkensteyn_wrote">on 4 Feb 2014, 08:48:05 Dinesh Bolkensteyn wrote:</h3>
<div class="paragraph">
<p>Implemented by http://jira.codehaus.org/browse/SONARJAVA-441</p>
</div>
</div>
</div>
</div>