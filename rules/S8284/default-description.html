<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when a custom exception class extends <code>Error</code> or <code>Throwable</code> instead of <code>Exception</code> or one of its subclasses.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Java and Groovy have a clear exception hierarchy designed for different purposes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Exception</code> and its subclasses represent recoverable conditions that applications can handle</p>
</li>
<li>
<p><code>Error</code> and its subclasses represent serious system-level problems (like <code>OutOfMemoryError</code> or <code>StackOverflowError</code>) that applications typically cannot and should not handle</p>
</li>
<li>
<p><code>Throwable</code> is the root class for both exceptions and errors, making it too broad for specific use cases</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you extend <code>Error</code> for custom exceptions, you&#8217;re misclassifying your exception as a system-level problem. This can confuse other developers and lead to improper exception handling. Code that catches <code>Error</code> expects to handle serious system failures, not application-specific problems.</p>
</div>
<div class="paragraph">
<p>Extending <code>Throwable</code> directly is also problematic because it&#8217;s too general. It includes both recoverable exceptions and unrecoverable errors, making it unclear what kind of problem your custom exception represents.</p>
</div>
<div class="paragraph">
<p>Following the proper exception hierarchy makes your code more predictable and helps other developers understand how to handle your exceptions appropriately.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Using the wrong exception base class can lead to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Confusion about whether the exception represents a recoverable application error or a serious system problem</p>
</li>
<li>
<p>Improper exception handling by code that catches your custom exception</p>
</li>
<li>
<p>Difficulty in debugging when system-level error handling code unexpectedly catches application exceptions</p>
</li>
<li>
<p>Reduced code maintainability as the exception&#8217;s purpose becomes unclear</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Change your custom exception to extend <code>Exception</code> instead of <code>Error</code>. This clearly indicates that your exception represents a recoverable application-level problem.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class MyCustomException extends Error { // Noncompliant
    MyCustomException(String message) {
        super(message)
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class MyCustomException extends Exception {
    MyCustomException(String message) {
        super(message)
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Oracle Java Documentation - Exception Hierarchy - <a href="https://docs.oracle.com/javase/tutorial/essential/exceptions/definition.html">Official Java documentation explaining the difference between exceptions and errors</a></p>
</li>
<li>
<p>Groovy Documentation - Exception Handling - <a href="https://groovy-lang.org/semantics.html#_exception_handling">Groovy-specific documentation on exception handling and best practices</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-754: Improper Check for Unusual or Exceptional Conditions - <a href="https://cwe.mitre.org/data/definitions/754.html">Related to proper exception handling and classification</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S2166" class="rspec-auto-link">RSPEC-2166</a> - <a href="https://rules.sonarsource.com/java/RSPEC-2166/">Java rule for the same exception hierarchy issue</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>