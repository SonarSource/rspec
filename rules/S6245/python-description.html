<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Server-side encryption (SSE) encrypts an object (not the metadata) as it is written to disk (where the S3 bucket resides) and decrypts it as it is read from disk. This doesn&#8217;t change the way the objects are accessed, as long as the user has the necessary permissions, objects are retrieved as if they were unencrypted. Thus, SSE only helps in the event of disk thefts, improper disposals of disks and other attacks on the AWS infrastructure itself.</p>
</div>
<div class="paragraph">
<p>There are three SSE options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Server-Side Encryption with Amazon S3-Managed Keys (SSE-S3)</p>
<div class="ulist">
<ul>
<li>
<p>AWS manages encryption keys and the encryption itself (with AES-256) on its own.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Server-Side Encryption with Customer Master Keys (CMKs) Stored in AWS Key Management Service (SSE-KMS)</p>
<div class="ulist">
<ul>
<li>
<p>AWS manages the encryption (AES-256) of objects and encryption keys provided by the AWS KMS service.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Server-Side Encryption with Customer-Provided Keys (SSE-C)</p>
<div class="ulist">
<ul>
<li>
<p>AWS manages only the encryption (AES-256) of objects with encryption keys provided by the customer. AWS doesn&#8217;t store the customer&#8217;s encryption keys.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ask_yourself_whether">Ask Yourself Whether</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>The S3 bucket stores sensitive information.</p>
</li>
<li>
<p>The infrastructure needs to comply to some regulations, like HIPAA or PCI DSS, and other standards.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There is a risk if you answered yes to any of those questions.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_recommended_secure_coding_practices">Recommended Secure Coding Practices</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It&#8217;s recommended to use SSE. Choosing the appropriate option depends on the level of control required for the management of encryption keys.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sensitive_code_example">Sensitive Code Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Server-side encryption is not used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">bucket = s3.Bucket(self,"bucket",
    encryption=s3.BucketEncryption.UNENCRYPTED       # Sensitive
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The default value of <code>encryption</code> is <code>KMS</code> if <code>encryptionKey</code> is set. Otherwise, if both parameters are absent the bucket is unencrypted.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Server-side encryption with Amazon S3-Managed Keys is used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">bucket = s3.Bucket(self,"bucket",
    encryption=s3.BucketEncryption.S3_MANAGED
)

# Alternatively with a KMS key managed by the user.

bucket = s3.Bucket(self,"bucket",
    encryptionKey=access_key
)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see">See</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/serv-side-encryption.html">AWS documentation</a> - Protecting data using server-side encryption</p>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.aws_s3.BucketEncryption.html">AWS CDK version 2</a> - BucketEncryption</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>primary: Objects in the bucket are not encrypted. Make sure it is safe here.</p>
</li>
<li>
<p>secondary: Propagate setting.</p>
</li>
<li>
<p>primary: Omitting "{argument_name}" disables server-side encryption. Make sure it is safe here.</p>
</li>
</ul>
</div>
</div>
</div>
</div>