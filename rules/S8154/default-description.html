<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an issue when a Go module&#8217;s path contains a major version suffix that doesn&#8217;t match the actual major version number used in version tags or requirements.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Go&#8217;s module system relies on major version suffixes to implement the import compatibility rule, which states that if an old package and a new package have the same import path, the new package must be backwards compatible with the old package.</p>
</div>
<div class="paragraph">
<p>Starting with major version 2, Go modules must include a major version suffix in their module path (like <code>/v2</code>, <code>/v3</code>, etc.) that corresponds to the actual major version number. This suffix becomes part of the import path, allowing multiple major versions of the same module to coexist in a single build.</p>
</div>
<div class="paragraph">
<p>When there&#8217;s a mismatch between the module path&#8217;s major version suffix and the actual semantic version number, several problems occur:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Dependency resolution failures</strong>: The Go toolchain cannot correctly resolve which version of a module to use, leading to build errors or unexpected behavior.</p>
</li>
<li>
<p><strong>Import path confusion</strong>: Developers and tools cannot reliably determine which major version they&#8217;re working with, making dependency management unpredictable.</p>
</li>
<li>
<p><strong>Violation of semantic versioning</strong>: The mismatch breaks the semantic versioning contract that Go modules depend on for compatibility guarantees.</p>
</li>
<li>
<p><strong>Module proxy issues</strong>: Module proxies and the Go module system expect consistent versioning, and mismatches can cause modules to be incorrectly cached or served.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The consistency requirement ensures that when you import <code>example.com/mod/v3</code>, you&#8217;re guaranteed to get a v3.x.x version of that module, maintaining the predictability and reliability that Go&#8217;s module system provides.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>This inconsistency can cause build failures, dependency resolution errors, and unpredictable behavior in Go applications. It violates Go&#8217;s module versioning contract and can lead to incorrect module selection by the Go toolchain, potentially breaking builds or causing runtime issues when the wrong version is loaded.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Update the module path to match the semantic version. If you&#8217;re releasing version v2.1.0, the module path should have a /v2 suffix.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">module example.com/mod/v3
require example.com/mod/v3 v2.1.0 // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">module example.com/mod/v2
require example.com/mod/v2 v2.1.0</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Go Modules Reference - Major version suffixes - <a href="https://go.dev/ref/mod#major-version-suffixes">Official documentation explaining major version suffixes in Go modules</a></p>
</li>
<li>
<p>Go Modules: v2 and Beyond - <a href="https://go.dev/blog/v2-go-modules">Blog post explaining how to handle major version changes in Go modules</a></p>
</li>
<li>
<p>Go Modules Reference - Versions - <a href="https://go.dev/ref/mod#versions">Official documentation on semantic versioning in Go modules</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>Semantic Versioning 2.0.0 - <a href="https://semver.org/">The semantic versioning specification that Go modules follow</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>