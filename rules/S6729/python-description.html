<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when <code>np.where</code> is used with only the condition parameter set.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The NumPy function <code>np.where</code> provides a way to execute operations on an array under a certain condition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import numpy as np

arr = np.array([1,2,3,4])

result = np.where(arr &gt; 3, arr * 2, arr)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above the <code>np.where</code> function will multiply all the elements in the array which satisfy the condition: <code>element &gt; 3</code> by 2.
The elements that do not satisfy the condition will be left untouched.
The <code>result</code> array holds now the values 1, 2, 3 and 8.</p>
</div>
<div class="paragraph">
<p>It is also possible to call <code>np.where</code> with only the condition parameter set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import numpy as np

arr = np.array([1,2,3,4])

result = np.where(arr &gt; 2)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Even though this is perfectly valid code in NumPy, it may not yield the expected results.</p>
</div>
<div class="paragraph">
<p>When providing only the condition parameter to the <code>np.where</code> function, it will behave as <code>np.asarray(condition).nonzero()</code> or <code>np.nonzero(condition)</code>.
Both these functions provide a way to find the indices of the elements satisfying the condition passed as parameter.
Be mindful that <code>np.asarray(condition).nonzero()</code> and <code>np.nonzero(condition)</code> do not return the <strong>values</strong> that satisfy the condition but only their <strong>indices</strong>.
This means the <code>result</code> variable now holds a tuple
with the first element being an array of all the indices where the condition <code>arr &gt; 2</code> was satisfied: <code>(array([2,3]),)</code>.</p>
</div>
<div class="paragraph">
<p>If the intention is to find the indices of the elements which satisfy a certain condition it is preferable to use the <code>np.asarray(condition).nonzero()</code> or <code>np.nonzero(condition)</code> function instead.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To fix this issue either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>provide all three parameters to the <code>np.where</code> function (condition, value if the condition is satisfied, value if the condition is not satisfied) or,</p>
</li>
<li>
<p>use the <code>np.nonzero</code> function.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">import numpy as np

def bigger_than_two():
  arr = np.array([1,2,3,4])
  result = np.where(arr &gt; 2) # Noncompliant: only the condition parameter is provided to the np.where function.</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">import numpy as np

def bigger_than_two():
  arr = np.array([1,2,3,4])
  result = np.where(arr &gt; 2, arr + 1, arr) # Compliant
  indices = np.nonzero(arr &gt; 2) # Compliant</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>NumPy Documentation - <a href="https://numpy.org/doc/stable/reference/generated/numpy.where.html#numpy-where">numpy.where</a></p>
</li>
<li>
<p>NumPy Documentation - <a href="https://numpy.org/doc/stable/reference/generated/numpy.nonzero.html#numpy.nonzero">numpy.nonzero</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>