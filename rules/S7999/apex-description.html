<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when <code>Messaging.sendEmail()</code> calls are not wrapped in try-catch blocks to handle potential exceptions.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Email operations in Salesforce can fail for various reasons, including invalid email addresses, governor limit violations, or configuration issues. When <code>Messaging.sendEmail()</code> encounters an error, it throws exceptions such as <code>EmailException</code> or <code>LimitException</code>.</p>
</div>
<div class="paragraph">
<p>Without proper error handling, these exceptions can cause the entire transaction to fail unexpectedly. This leads to poor user experience and makes debugging difficult when email operations fail silently or crash the application.</p>
</div>
<div class="paragraph">
<p>Proper exception handling allows your application to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Continue processing even when email delivery fails</p>
</li>
<li>
<p>Log meaningful error messages for debugging</p>
</li>
<li>
<p>Provide appropriate feedback to users</p>
</li>
<li>
<p>Implement retry logic or alternative communication methods</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Unhandled email exceptions can cause transaction failures, poor user experience, and make it difficult to diagnose email delivery issues. Critical business processes that depend on email notifications may fail silently.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Wrap the <code>Messaging.sendEmail()</code> call in a try-catch block to handle potential exceptions. Log errors appropriately and consider how your application should respond to email failures.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">public void sendMail(String[] addresses, String[] subjects, String[] messages) {
    Messaging.SingleEmailMessage[] emails = new Messaging.SingleEmailMessage[]{};
    // populate emails
    Messaging.sendEmail(emails); // Noncompliant
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">public void sendMail(String[] addresses, String[] subjects, String[] messages) {
    try {
        Messaging.SingleEmailMessage[] emails = new Messaging.SingleEmailMessage[]{};
        // populate emails
        Messaging.SendEmailResult[] results = Messaging.sendEmail(emails);
        // handle results
    } catch (Exception e) {
        System.debug('Email sending failed: ' + e.getMessage());
        // Handle the error appropriately
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Salesforce Messaging Class Documentation - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexref.meta/apexref/apex_classes_email_outbound_messaging.htm">Official Salesforce documentation for the Messaging class and email operations</a></p>
</li>
<li>
<p>Exception Handling in Apex - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_exception_definition.htm">Salesforce documentation on exception handling patterns in Apex</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-248: Uncaught Exception - <a href="https://cwe.mitre.org/data/definitions/248.html">Weakness related to uncaught exceptions that can lead to application crashes</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>