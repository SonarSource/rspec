== Resources

=== Documentation

* https://learn.microsoft.com/en-us/dotnet/standard/base-types/best-practices[Best practices for regular expressions in .NET]
** https://learn.microsoft.com/en-us/dotnet/standard/base-types/best-practices#static-regular-expressions[Best practices for *static* regular expressions]
* https://learn.microsoft.com/en-us/dotnet/api/system.text.regularexpressions.regexoptions#system-text-regularexpressions-regexoptions-compiled[RegexOptions.Compiled flag]
* https://learn.microsoft.com/en-us/dotnet/standard/base-types/regular-expression-source-generators#source-generation[Regex source generator]
** https://learn.microsoft.com/en-us/dotnet/api/system.text.regularexpressions.generatedregexattribute[GeneratedRegexAttribute]
* https://learn.microsoft.com/en-us/dotnet/api/system.text.regularexpressions.regex.ismatch[`Regex.IsMatch` static method]

=== Benchmarks

[options="header"]
|===
|         Method |              Runtime |      Mean | Ratio |   Allocated
| CreateMultiple |             .NET 7.0 | 29.645 ms |  1.00 |  69200016 B
|      UseCached |             .NET 7.0 |  2.052 ms |  0.07 |         2 B
| CreateMultiple | .NET Framework 4.6.2 | 42.102 ms |  1.00 | 125729652 B
|      UseCached | .NET Framework 4.6.2 |  3.283 ms |  0.08 |           -
|===

The results were generated by running the following snippet with https://github.com/dotnet/BenchmarkDotNet[BenchmarkDotNet]:

[source,csharp]
----
[Params(10_000)]
public int Iterations;

// IPV4 Regex pattern
private const string RegexPattern = "^((25[0-5]|(2[0-4]|1\\d|[1-9]|)\\d)\\.?\b){4}$";
private readonly Regex cachedRegex = new Regex(RegexPattern);

[Benchmark(Baseline = true)]
public void CreateMultiple()
{
    for (int i = 0; i < Iterations; i++)
    {
        var regex = new Regex(RegexPattern);
        _ = regex.IsMatch("127.0.0.1");
    }
}

[Benchmark]
public void UseCached()
{
    for (int i = 0; i < Iterations; i++)
    {
        _ = cachedRegex.IsMatch("127.0.0.1");
    }
}
----

Hardware configuration:

[source]
----
BenchmarkDotNet=v0.13.5, OS=Windows 10 (10.0.19045.2846/22H2/2022Update)
12th Gen Intel Core i7-12800H, 1 CPU, 20 logical and 14 physical cores
.NET SDK=7.0.203
  [Host]               : .NET 7.0.5 (7.0.523.17405), X64 RyuJIT AVX2
  .NET 7.0             : .NET 7.0.5 (7.0.523.17405), X64 RyuJIT AVX2
  .NET Framework 4.6.2 : .NET Framework 4.8 (4.8.4614.0), X64 RyuJIT VectorSize=256
----
