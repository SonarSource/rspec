<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are several constructs in the language that work with boolean:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If statements: <code>if (b) ...</code></p>
</li>
<li>
<p>Conditional operator: <code>int i = b ? 0 : 42;</code></p>
</li>
<li>
<p>Logical operators: <code>(b1 || b2) &amp;&amp; !b3</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Those operations would also work with arithmetic or enum values operands, because there is a conversion from those types to bool. However, this conversion might not always be obvious, for instance, an integer return code might use the value <code>0</code> to indicate that everything worked as expected, but converted to boolean, this value would be <code>false</code>, which often denotes failure. Conversion from integer to bool should be explicit.</p>
</div>
<div class="paragraph">
<p>Moreover, a logical operation with integer types might also be a confusion with the bitwise operators (<code>&amp;</code>, <code>|</code> and <code>~</code>).</p>
</div>
<div class="paragraph">
<p>Converting a pointer to <code>bool</code> to check if it is null is idiomatic and is allowed by this rule. We also allow the use of any user-defined type convertible to bool (for instance <code>std::ostream</code>), since they were specifically designed to be used in such situations. What this rule really detects is the use or arithmetic types (<code>int</code>, <code>long</code>&#8230;&#8203;) and of enum types.</p>
</div>
<div class="paragraph">
<p>On the other hand, arithmetic operations are defined with booleans, but usually make little sense (think of adding two booleans). Booleans should not be used in an arithmetic context.</p>
</div>
<div class="paragraph">
<p>Finally, comparing a boolean with the literals <code>true</code> or <code>false</code> is unnecessarily verbose, and should be avoided.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">if ( 1 &amp;&amp; ( c &lt; d ) ) // Noncompliant
if ( ( a &lt; b ) &amp;&amp; ( c + d ) ) // Noncompliant
if ( u8_a &amp;&amp; ( c + d ) ) // Noncompliant
if ( !0 ) // Noncompliant, always true
if ( !ptr ) // Compliant
if ( ( a &lt; b ) &amp;&amp; ( c &lt; d ) ) // Compliant
if ( !false ) // Compliant
if (!!a) // Compliant by exception
if ( ( a &lt; b ) == true) // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">if ( 1 != 0 &amp;&amp; ( c &lt; d ) ) // Compliant, but left operand is always true
if ( ( a &lt; b ) &amp;&amp; ( c + d ) != 0 ) // Compliant
if ( u8_a != 0 &amp;&amp; ( c + d ) != 0) // Compliant
if ( 0 == 0 ) // Compliant, always true
if ( a &lt; b )</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>Some people use <code>!!</code> as a shortcut to cast an integer to bool. This usage of the <code>!</code> operator with an integer argument is allowed for this rule.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>MISRA C:2004, 12.6 - The operands of logical operators (&amp;&amp;, || and !) should be effectively Boolean. Expressions that are effectively Boolean should not be used as operands to operators other than (&amp;&amp;, || and !).</p>
</li>
<li>
<p>MISRA C&#43;&#43;:2008, 5-3-1 - Each operand of the ! operator, the logical &amp;&amp; or the logical || operators shall have type bool.</p>
</li>
<li>
<p><a href="https://wiki.sei.cmu.edu/confluence/display/c/EXP13-C.+Treat+relational+and+equality+operators+as+if+they+were+nonassociative">CERT, EXP13-C.</a> - Treat relational and equality operators as if they were nonassociative</p>
</li>
<li>
<p>C++ Core Guidelines - <a href="https://github.com/isocpp/CppCoreGuidelines/blob/e49158a/CppCoreGuidelines.md#es87-dont-add-redundant&#8212;&#8203;or&#8212;&#8203;to-conditions">ES.87: Don&#8217;t add redundant <code>==</code> or <code>!=</code> to conditions</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>\[Left|Right] operand should have type 'bool'.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s811">relates to: <a data-rspec-id="S811" class="rspec-auto-link">S811</a></h3>

</div>
<div class="sect2">
<h3 id="_relates_to_s812">relates to: <a data-rspec-id="S812" class="rspec-auto-link">S812</a></h3>

</div>
<div class="sect2">
<h3 id="_is_related_to_s5359">is related to: <a data-rspec-id="S5359" class="rspec-auto-link">S5359</a></h3>

</div>
<div class="sect2">
<h3 id="_on_21_oct_2014_202230_ann_campbell_wrote">on 21 Oct 2014, 20:22:30 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~samuel.mercier] please use standard section headings.</p>
</div>
<div class="paragraph">
<p>I would associate this to Reliability</p>
</div>
<div class="paragraph">
<p>Also this is likely a 'bug'.</p>
</div>
</div>
</div>
</div>