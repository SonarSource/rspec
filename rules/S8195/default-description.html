<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an issue when creating new errors with <code>fmt.Errorf</code> or similar functions without using the <code>%w</code> verb to wrap the original error, causing loss of error context.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When handling errors in Go, it&#8217;s important to preserve the original error context to maintain the error chain. Creating entirely new errors without wrapping the original error breaks this chain and loses valuable debugging information.</p>
</div>
<div class="paragraph">
<p>Error wrapping, introduced in Go 1.13, allows you to add context to an error while preserving the original error. This enables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Better debugging by maintaining the full error chain</p>
</li>
<li>
<p>Proper error inspection using <code>errors.Is()</code> and <code>errors.As()</code></p>
</li>
<li>
<p>Traceability of the root cause through multiple layers of error handling</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you create a new error without wrapping, you lose the ability to inspect the original error type and its properties. This makes it harder to implement proper error handling strategies and can hide important details about what actually went wrong.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Loss of error context makes debugging significantly more difficult. Applications cannot properly inspect or handle specific error types, breaking error handling patterns that rely on <code>errors.Is()</code> and <code>errors.As()</code>. This can lead to generic error responses instead of specific handling for different error conditions, reducing the application&#8217;s ability to recover gracefully from errors.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the <code>%w</code> verb in <code>fmt.Errorf</code> to wrap the original error, preserving the error chain while adding context.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">func processFile(filename string) error {
    file, err := os.Open(filename)
    if err != nil {
        return fmt.Errorf("failed to process file") // Noncompliant
    }
    defer file.Close()
    return nil
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">func processFile(filename string) error {
    file, err := os.Open(filename)
    if err != nil {
        return fmt.Errorf("failed to process file %s: %w", filename, err)
    }
    defer file.Close()
    return nil
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Working with Errors in Go 1.13 - <a href="https://go.dev/blog/go1.13-errors">Official Go blog post explaining error wrapping and the new error handling features in Go 1.13</a></p>
</li>
<li>
<p>Go by Example: Errors - <a href="https://gobyexample.com/errors">Practical examples of error handling patterns in Go</a></p>
</li>
<li>
<p>Effective Go - Errors - <a href="https://go.dev/doc/effective_go#errors">Official Go documentation on effective error handling practices</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>Go 1.13 Error Wrapping - <a href="https://golang.org/doc/go1.13#error_wrapping">Official specification for error wrapping introduced in Go 1.13</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>