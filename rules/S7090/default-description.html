<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Chaining list(s) to a list literal via <a href="https://api.dart.dev/stable/dart-core/List/addAll.html"><code>List&lt;E&gt;.addAll</code></a> should be replaced by a literal with the <a href="https://dart.dev/language/operators#spread-operators">spread operator</a> (<code>...</code>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Chaining list(s) to a list literal via <code>addAll</code>, e.g. <code>[42]..addAll(l1)..addAll(l1);</code>, is both less efficient and less verbose than using a list literal with the spread operator: <code>[42, ...l1, ...l1]</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>addAll</code> chains can be less efficient because each <code>addAll</code> call is treated as a separate method call, resulting in unnecessary invocations and allocations, when the goal is to build a single list with all the items provided as arguments</p>
</li>
<li>
<p><code>addAll</code> chains are generally more verbose and less clear because spreading a list can be done via dedicate syntax (<code>...</code>) which is closer to natural language</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The rule also applies when the chained list is a <a href="https://dart.dev/language/operators#conditional-expressions">conditional expression</a>, because the spread operator can be applied conditionally:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">[42]..addAll(i1 == i2 ? [43, 44] : []); // Noncompliant
[42, if (i1 == i2) ...[43, 44]];        // Compliant</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>The rule doesn&#8217;t apply when the list chained is a literal, because <a data-rspec-id="S7089" class="rspec-auto-link">S7089</a> already covers this case.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">[]..addAll([42]); // Not applicable</code></pre>
</div>
</div>
<div class="paragraph">
<p>The rule doesn&#8217;t cover <a href="https://dart.dev/language/collections#control-flow-operators">if and for collections</a> either, for the same reason (<a data-rspec-id="S7089" class="rspec-auto-link">S7089</a> covers it).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">[42]..addAll([if (i1 == 42) 43, 44]);             // Not applicable
[42]..addAll([for (final i in [1, 2, 3]) i * i]); // Not applicable</code></pre>
</div>
</div>
<div class="paragraph">
<p>The rule doesn&#8217;t apply when the <code>addAll</code> is not called via cascade operator, but via standard dereference (<code>.</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">[].addAll(l1);  // Not applicable
[]..addAll(l1); // Noncompliant</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Take advantage of the spread operator and, if needed, of its capacity to be applied conditionally.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">[42]..addAll(aList)..addAll(anotherList);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">[42, ...aList, ...anotherList];</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">[42]..addAll(i1 == i2 ? [43, 44] : []);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">[42, if (i1 == i2) ...[43, 44]];</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Dart Docs - <a href="https://dart.dev/tools/linter-rules/prefer_spread_collections">Dart Linter rule - prefer_spread_collections</a></p>
</li>
<li>
<p>Dart Docs - <a href="https://dart.dev/language/operators#spread-operators">Language - Spread operators</a></p>
</li>
<li>
<p>Dart API Reference - <a href="https://api.dart.dev/stable/dart-core/List/addAll.html"><code>List&lt;E&gt;.addAll</code></a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S3257" class="rspec-auto-link">S3257</a> - Collection literals should be preferred</p>
</li>
<li>
<p><a data-rspec-id="S7089" class="rspec-auto-link">S7089</a> - Inline list literals should be preferred to chains of insertions</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>The addition of multiple elements could be inlined.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>The first method invocation in the chain of <code>addAll</code> invocations.</p>
</div>
</div>
</div>
</div>