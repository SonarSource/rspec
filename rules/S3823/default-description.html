<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The use of a "RESOURCE_LOCAL" <code>persistence-unit</code> makes you responsible for your own entity management, which involves a lot of extra boilerplate code to get right. Instead, set this to "JPA" in a JavaSE environment or omit it altogether in a JavaEE environment, where "JPA" is the default.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">&lt;persistence-unit transaction-type="RESOURCE_LOCAL"&gt;  &lt;!-- Noncompliant --&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">&lt;persistence-unit transaction-type="JTA"&gt;</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Use "JTA" instead.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_6_feb_2017_191129_daniel_ferreira_castro_wrote">on 6 Feb 2017, 19:11:29 Daniel Ferreira Castro wrote:</h3>
<div class="paragraph">
<p>Compliant Solution is not</p>
</div>
<div class="paragraph">
<p>&lt;persistence-unit transaction-type="JPA"&gt;</p>
</div>
<div class="paragraph">
<p>it should be &lt;persistence-unit transaction-type="JTA"&gt;</p>
</div>
<div class="paragraph">
<p>The XSD associated with this XML defines as follows (Both 2.0 and 2.1)</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;xsd:attribute name="transaction-type"</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>type="persistence:persistence-unit-transaction-type"&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;xsd:annotation&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;xsd:documentation&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Type of transactions used by EntityManagers from this</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>persistence unit.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;/xsd:documentation&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;/xsd:annotation&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;/xsd:attribute&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;xsd:simpleType name="persistence-unit-transaction-type"&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;xsd:annotation&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;xsd:documentation&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public enum PersistenceUnitTransactionType {JTA, RESOURCE_LOCAL};</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;/xsd:documentation&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;/xsd:annotation&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;xsd:restriction base="xsd:token"&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;xsd:enumeration value="JTA"/&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;xsd:enumeration value="RESOURCE_LOCAL"/&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;/xsd:restriction&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;/xsd:simpleType&gt;</pre>
</div>
</div>
</div>
</div>
</div>