<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Assuming that a comparator or <code>compareTo</code> method always returns -1 or 1 if the first operand is less than or greater than the second is incorrect.</p>
</div>
<div class="paragraph">
<p>The specifications for both methods, <code>Comparator.compare</code> and <code>Comparable.compareTo</code>, state that their return value is "a negative integer, zero, or a positive integer as this object is less than, equal to, or greater than the specified object."
Even if a specific comparator always returns -1, 0, or 1, this is only an implementation detail, not the API contract developers can rely on.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>== -1</code> with <code>&lt; 0</code> (the first operand is less than the second)</p>
</li>
<li>
<p><code>== 1</code> with <code>&gt; 0</code> (the first operand is greater than the second)</p>
</li>
<li>
<p><code>!= -1</code> with <code>&gt;= 0</code> (the first operand is greater than or equal to the second)</p>
</li>
<li>
<p><code>!= 1</code> with <code>&lt;= 0</code> (the first operand is less than or equal to the second)</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class Main {

  boolean isAGreaterThanB(Comparable&lt;Integer&gt; a, Integer b) {
    return a.compareTo(b) == 1; // Noncompliant, check for constant return value
  }

  public static void main(String[] args) {
    ByteComparator comparator = new ByteComparator();
    if (comparator.compare((byte) 23, (byte) 42) == -1) { // Noncompliant, check for constant return value
      System.out.println("23 &lt; 42");
    } else {
      System.out.println("23 &gt;= 42");
    }
  }

  static class ByteComparator implements Comparator&lt;Byte&gt; {
    @Override
    public int compare(Byte a, Byte b) {
      return a - b;
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class Main {

  boolean isAGreaterThanB(Comparable&lt;Integer&gt; a, Integer b) {
    return a.compareTo(b) &gt; 0; // Compliant, check for positive return value
  }

  public static void main(String[] args) {
    ByteComparator comparator = new ByteComparator();
    if (comparator.compare((byte) 23, (byte) 42) &lt; 0) { // Compliant, check for negative return value
      System.out.println("23 &lt; 42");
    } else {
      System.out.println("23 &gt;= 42");
    }
  }

  static class ByteComparator implements Comparator&lt;Byte&gt; {
    @Override
    public int compare(Byte a, Byte b) {
      return a - b;
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Comparable.html#compareTo-T-">Java SE 8 API Specification: Comparable.compareTo</a></p>
</li>
<li>
<p><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#compare-T-T-">Java SE 8 API Specification: Comparator.compare</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Only the sign of the result should be examined.</p>
</div>
</div>
</div>
</div>