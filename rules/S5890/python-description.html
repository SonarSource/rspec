<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when an assigned value type is not compatible with the type hint of the assigning variable.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Type hints in Python allow you to specify the expected types of variables and function return values. While type hints are not enforced at runtime, they serve as documentation and can be checked using static type checkers to catch type-related errors during development.</p>
</div>
<div class="paragraph">
<p>When an assigned value type is incompatible with the type hint of the assigning variable, it can lead to several issues:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type-related bugs:</strong> Assigning a value of an incompatible type to a variable with a specific type hint may lead to unexpected behavior or errors at runtime.</p>
</li>
<li>
<p><strong>Readability and maintainability:</strong> Type hints improve code readability by explicitly stating the intended types of variables and functions. When the assigned value type doesn&#8217;t match the hint, it can confuse other developers and make the code harder to maintain.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Assign the variable to the value compatible with the type hint or change the type hint to be compatible with the variable&#8217;s type.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def my_function():
    my_int: int = "string"  # Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def my_function():
    my_str: str = "string"</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Python documentation - <a href="https://docs.python.org/3/library/typing.html">typing â€” Support for type hints</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>If the asignment value is not <code>None</code> then</p>
<div class="ulist">
<ul>
<li>
<p>Primary: Assign to "XXX" a value of type "YYY" instead of "ZZZ" or update the type hint of "XXX".</p>
</li>
<li>
<p>Secondary: Type hint.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If the assignment value is <code>None</code></p>
<div class="ulist">
<ul>
<li>
<p>Primary: Replace the type hint "XXX" with "Optional[XXX]" or don&#8217;t assign "None" to "YYY"</p>
</li>
<li>
<p>Secondary: Type hint.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="ulist">
<ul>
<li>
<p>Primary: The assigned value</p>
</li>
<li>
<p>Secondary: The type hint</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_12_may_2021_004518_mike_heyns_wrote">on 12 May 2021, 00:45:18 Mike Heyns wrote:</h3>
<div class="paragraph">
<p>This rule does not appear to be working for <a href="https://docs.python.org/3/library/dataclasses.html#init-only-variables">Dataclass Init-Only variables</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@dataclass
class Book:
    name: str
    condition: InitVar[str] = ''</pre>
</div>
</div>
<div class="paragraph">
<p><em><em>_Assign to "condition" a value of type "InitVar[str]" instead of "str" or update its type hint.</em>_</em></p>
</div>
<div class="paragraph">
<p>In fact, most examples including the official documentation use <code>None</code> as the default for init-only arguments. Attempting to use <code>InitVar[Optional[str]]</code> has the same effect as above.</p>
</div>
</div>
</div>
</div>