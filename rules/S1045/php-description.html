<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Exceptions handlers (<code>catch</code>) are evaluated in the order they are written. Once a match is found, the evaluation stops.</p>
</div>
<div class="paragraph">
<p>In some contexts a <code>catch</code> block is dead code as it will never catch any exception:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If there is a handler for a base class followed by a handler for class derived from that base class, the second handler will never trigger: the handler for the base class will match the derived class, and will be the only executed handler.</p>
</li>
<li>
<p>When multiple <code>catch</code> blocks try to catch the same exception class, only the first one will be executed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This rule raises an issue when a <code>catch</code> block catches every exception before a later <code>catch</code> block could catch it.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-php" data-lang="php">class MyException extends Exception {}
class MySubException extends MyException {}

try {
  doSomething();
} catch (MyException $e) {
  echo $e;
} catch (MySubException $e) { // Noncompliant: MySubException is a subclass of MyException
  echo "Never executed";
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-php" data-lang="php">class MyException extends Exception {}
class MySubException extends MyException {}

try {
  doSomething();
} catch (MySubException $e) {
  echo "Executed";
} catch (MyException $e) {
  echo $e;
}</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="ulist">
<ul>
<li>
<p>Primary: class name in the 2nd "catch"</p>
</li>
<li>
<p>Secondary: class name in the 1st "catch"
Message should be one of the following:</p>
<div class="ulist">
<ul>
<li>
<p>'A parent exception class is caught here.'</p>
</li>
<li>
<p>'The same exception class is caught here.'</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s1046">relates to: <a data-rspec-id="S1046" class="rspec-auto-link">S1046</a></h3>

</div>
<div class="sect2">
<h3 id="_on_14_oct_2014_164020_ann_campbell_wrote">on 14 Oct 2014, 16:40:20 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~samuel.mercier], please fix the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Code should be quoted in the message</p>
</li>
<li>
<p>Add a See section to the description listing the appropriate MISRA number</p>
</li>
<li>
<p>Fill in Applicability. Almost always this is both Sources and Tests</p>
</li>
<li>
<p>Make sure the appropriate MISRA C and MISRA C&#43;&#43; fields on the references tab are filled in</p>
</li>
<li>
<p>The message is worded as though there will be one issue per <code>try</code>. Instead, I would recommend/expect one issue per out-of-order <code>catch</code>. E.G. Move this "catch" for "xxx" above the "catch" for "yyy".</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_on_17_oct_2014_134001_ann_campbell_wrote">on 17 Oct 2014, 13:40:01 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>FYI [~samuel.mercier] I moved this to Reliability because when the <code>catch</code> blocks are out of order, the actions expected for a subtype will never be executed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_23_jan_2017_164055_jean_christophe_collet_wrote">on 23 Jan 2017, 16:40:55 Jean-Christophe Collet wrote:</h3>
<div class="paragraph">
<p>Do we need a message for the secondary catch? Right now it&#8217;s a bit misleading as there is no "conflict" in either cases.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_21_mar_2018_190657_ann_campbell_wrote">on 21 Mar 2018, 19:06:57 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>ABAP: http://www.erpworkbench.com/abap-statements/c/catc/catch_try.htm</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>A CATCH block handles the exceptions of the exception classes cx_class1 cx_class2 &#8230;&#8203; that are specified after the statement CATCH as well as the exceptions of the subclasses of these exception classes. In each CATCH statement of a TRY</p>
</div>
<div class="paragraph">
<p>control structure, you can list any number of exception classes</p>
</div>
<div class="paragraph">
<p>cx_class1 cx_class2 &#8230;&#8203; , whereby more special exception classes (subclasses) must be listed before more general exception classes (superclasses). This order must be kept both within a CATCH statement and across multiple CATCH statements of a TRY control structure.</p>
</div>
<div class="paragraph">
<p><strong>Latest notes:</strong> The rule whereby CATCH special exception classes must be listed before general classes ensures that an exception is not handled by a general exception handler (superclass) if a special handler (subclass) is provided.</p>
</div>
</blockquote>
</div>
</div>
</div>
</div>