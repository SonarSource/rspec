<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an issue when using <code>allow_blank: false</code> with <code>presence: true</code>, or implementing custom validations that check for blank values when <code>presence: true</code> already handles this automatically.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Rails' <code>presence: true</code> validation automatically rejects blank values, including <code>nil</code>, empty strings, and strings containing only whitespace characters. It uses Ruby&#8217;s <code>blank?</code> method internally, which considers values like <code>""</code>, <code>"   "</code>, <code>"\n\t"</code>, and <code>nil</code> as blank.</p>
</div>
<div class="paragraph">
<p>When developers add <code>allow_blank: false</code> alongside <code>presence: true</code>, they create redundant code because presence validation already disallows blank values by default. Similarly, implementing custom regex patterns or validation methods to check for whitespace-only strings duplicates functionality that Rails already provides.</p>
</div>
<div class="paragraph">
<p>This redundancy makes code harder to read and maintain. Other developers might wonder why both validations exist, leading to confusion about the intended behavior. The extra code also increases the surface area for potential bugs without providing any additional functionality.</p>
</div>
<div class="paragraph">
<p>Rails' validation system is designed to be declarative and clear. Using the built-in validations as intended makes code more predictable and easier for other Rails developers to understand.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>This issue primarily affects code maintainability and readability. Redundant validations can confuse developers and make the codebase harder to understand. While it doesn&#8217;t introduce security vulnerabilities or runtime errors, it can slow down development and increase the likelihood of mistakes when modifying validation logic.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it_in_rails">How to fix it in Rails</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Remove redundant <code>allow_blank: false</code> when using <code>presence: true</code>. The presence validation already handles blank values automatically.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class User &lt; ApplicationRecord
  validates :name, presence: true, allow_blank: false # Noncompliant
end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class User &lt; ApplicationRecord
  validates :name, presence: true
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace custom regex validations that check for whitespace with simple presence validation. Rails' presence validation already rejects whitespace-only strings.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_code_examples_2">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class Post &lt; ApplicationRecord
  validates :body, format: { with: /\A[[:graph:]]\Z/i } # Noncompliant
end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class Post &lt; ApplicationRecord
  validates :body, presence: true
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Remove custom validation methods that duplicate Rails' blank checking behavior. Use presence validation instead of manually checking for whitespace-only strings.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_code_examples_3">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example_3">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class Article &lt; ApplicationRecord
  validates :content, presence: true
  validate :not_only_whitespace # Noncompliant

  private

  def not_only_whitespace
    errors.add(:content, "cannot be only whitespace") if content&amp;.strip&amp;.empty?
  end
end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_3">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class Article &lt; ApplicationRecord
  validates :content, presence: true
end</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Rails Validation Helpers - presence - <a href="https://guides.rubyonrails.org/active_record_validations.html#presence">Official Rails documentation explaining how presence validation works</a></p>
</li>
<li>
<p>Ruby Object#blank? method - <a href="https://api.rubyonrails.org/classes/Object.html#method-i-blank-3F">Documentation for the blank? method that presence validation uses internally</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>