<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>match</code> and a chain of <code>if</code>/<code>else if</code> statements is evaluated from top to bottom. At most, only one branch will be executed: the first one with a condition that evaluates to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>Therefore, duplicating a condition automatically leads to dead code. Usually, this is due to a copy/paste error. At best, it&#8217;s simply dead code and at worst, it&#8217;s a bug that is likely to induce further bugs as the code is maintained, and obviously it could lead to unexpected behavior.</p>
</div>
<div class="paragraph">
<p>For a <code>match</code>, the second <code>case</code> will never be executed, rendering it dead code. Worse there is the risk in this situation that future maintenance will be done on the dead case, rather than on the one that&#8217;s actually used.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-scala" data-lang="scala">if (param == 1) {
  openWindow
} else if (param == 2) {
  closeWindow
} else if (param == 1) { // Noncompliant
  moveWindowToTheBackground
}

param match {
  case 1 =&gt;
  // ...
  case 3 =&gt;
  // ...
  case 1 =&gt; // Noncompliant
  // ...
  case _ =&gt;
  //...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-scala" data-lang="scala">if (param == 1) {
  openWindow
} else if (param == 2) {
  closeWindow
} else if (param == 3) {
  moveWindowToTheBackground
}

param match {
  case 1 =&gt;
  // ...
  case 3 =&gt;
  // ...
  case _ =&gt;
  //...
}</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>This [branch|case] duplicates the one on line n.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="ulist">
<ul>
<li>
<p>primary: 2nd duplicate condition</p>
</li>
<li>
<p>secondary: 1st condition</p>
<div class="ulist">
<ul>
<li>
<p>message: Original</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Only the characters part of the conditions should be underlined.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_deprecates_s1950">deprecates: <a data-rspec-id="S1950" class="rspec-auto-link">S1950</a></h3>

</div>
<div class="sect2">
<h3 id="_is_related_to_s1763">is related to: <a data-rspec-id="S1763" class="rspec-auto-link">S1763</a></h3>

</div>
<div class="sect2">
<h3 id="_is_related_to_s901">is related to: <a data-rspec-id="S901" class="rspec-auto-link">S901</a></h3>

</div>
<div class="sect2">
<h3 id="_is_related_to_s2760">is related to: <a data-rspec-id="S2760" class="rspec-auto-link">S2760</a></h3>

</div>
<div class="sect2">
<h3 id="_on_12_feb_2015_072325_nicolas_peru_wrote">on 12 Feb 2015, 07:23:25 Nicolas Peru wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2]I am updating example and message for Java as a switch with twice the same case won&#8217;t compile cf http://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.11</p>
</div>
<div class="paragraph">
<p>"No two of the case constants associated with the switch statement have the same value."</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_12_feb_2015_134806_ann_campbell_wrote">on 12 Feb 2015, 13:48:06 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~nicolas.peru] I&#8217;ve updated the title for Java as well</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_6_apr_2015_132606_evgeny_mandrikov_wrote">on 6 Apr 2015, 13:26:06 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] same for C-Family as for Java, in fact I suppose that majority of languages forbids duplicate "cases" and minority allows, so might be better to do opposite - generalize "if" and specialize "switch"</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_9_apr_2015_161633_ann_campbell_wrote">on 9 Apr 2015, 16:16:33 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~evgeny.mandrikov] laborious cleanup done to make sure each language has the right title and right description details for the language features.</p>
</div>
<div class="paragraph">
<p>| |if|switch w/dup cond|break|</p>
</div>
<div class="paragraph">
<p>|Java|x|-||</p>
</div>
<div class="paragraph">
<p>|C-Family|x|-||</p>
</div>
<div class="paragraph">
<p>|JavaScript|x|x|x|</p>
</div>
<div class="paragraph">
<p>|PHP'|x|x|x|</p>
</div>
<div class="paragraph">
<p>|PL/SQL|x|x|-|</p>
</div>
<div class="paragraph">
<p>|Cobol|x|x|-|</p>
</div>
<div class="paragraph">
<p>|Swift|x|x|-|</p>
</div>
<div class="paragraph">
<p>|Python|x|-||</p>
</div>
<div class="paragraph">
<p>|C#|x|-|</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_apr_2015_075236_evgeny_mandrikov_wrote">on 10 Apr 2015, 07:52:36 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>Thanks [~ann.campbell.2]!</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_9_mar_2018_112719_tibor_blenessy_wrote">on 9 Mar 2018, 11:27:19 Tibor Blenessy wrote:</h3>
<div class="paragraph">
<p>Just a note: for Go compiler may disallow some trivial duplicated conditions in <code>case</code> clauses, but it is possible in general. https://golang.org/ref/spec#Switch_statements</p>
</div>
</div>
</div>
</div>