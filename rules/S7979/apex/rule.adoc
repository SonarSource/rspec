This rule raises an issue when a SOQL query uses `SELECT *` or selects fields that are not used in the subsequent code.

== Why is this an issue?

Using `SELECT *` or selecting unnecessary fields in SOQL queries creates several problems that impact both performance and code maintainability.

SOQL queries with wildcard selection (`SELECT *`) retrieve all available fields from an object, regardless of whether they are actually needed. This approach has significant performance implications:

* **Increased data transfer**: More data is transmitted between the Salesforce server and your application, consuming bandwidth and increasing response times.
* **Higher memory usage**: Your application must allocate memory to store all retrieved fields, even those that are never accessed.
* **Governor limit consumption**: Salesforce enforces strict limits on data retrieval, and selecting unnecessary fields consumes these limits faster.

Beyond performance, wildcard queries also harm code maintainability:

* **Unclear dependencies**: Other developers cannot easily understand which fields the code actually uses without examining the entire implementation.
* **Brittle code**: If field permissions change or fields are removed, the query may fail unexpectedly.
* **Harder debugging**: When issues arise, it's difficult to determine which specific fields are causing problems.

Explicit field selection makes your code more predictable, efficient, and easier to understand. It also helps with security by ensuring you only request access to the data you actually need.

=== What is the potential impact?

Performance degradation due to unnecessary data transfer and memory usage. Faster consumption of Salesforce governor limits. Reduced code maintainability and clarity about data dependencies.

== How to fix it

Replace wildcard selection with explicit field names. Only include fields that are actually used in your code logic.

=== Code examples

==== Noncompliant code example

[source,apex,diff-id=1,diff-type=noncompliant]
----
SELECT * FROM LoginEvent ORDER BY EventDate DESC // Noncompliant
----

==== Compliant solution

[source,apex,diff-id=1,diff-type=compliant]
----
SELECT EventDate, UserId, Username, UserType, Browser, Country, Status FROM LoginEvent ORDER BY EventDate DESC
----

== Resources

=== Documentation

 * SOQL SELECT Syntax - https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/sforce_api_calls_soql_select.htm[Official Salesforce documentation on SOQL SELECT statement syntax and best practices]

 * SOQL Best Practices - https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/langCon_apex_SOQL_SOSL_best_practices.htm[Salesforce best practices for writing efficient SOQL queries]

=== Standards

 * CWE-400: Uncontrolled Resource Consumption - https://cwe.mitre.org/data/definitions/400.html[Relates to inefficient resource usage through unnecessary data retrieval]

=== Related rules

 * RSPEC-6905 - https://rules.sonarsource.com/java/RSPEC-6905/[Similar rule for Java database queries avoiding SELECT *]
