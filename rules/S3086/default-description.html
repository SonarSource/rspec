<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Making an operator a convenience wrapper around an existing function or method provides additional flexibility to users in how the functionality is called and in what options are passed in.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when the function that defines the operation of a operator consists of something other than a single function call.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-swift" data-lang="swift">infix operator &gt;&lt; { associativity right precedence 90 }
func &gt;&lt; (left: Double, right: Double) -&gt; Double {  // Noncompliant
  let leftD = (left % 1) * 100
  let rightD = (right % 1) * 100
  let leftW = (left - leftD) / 100
  let rightW = (right - rightD) / 100
  return (leftD + leftW) * (rightD + rightW)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-swift" data-lang="swift">infix operator &gt;&lt; { associativity right precedence 90 }
func &gt;&lt; (left: Double, right: Double) -&gt; Double {
  return fubar(left, right)
}

func fubar(left: Double, right: Double) -&gt; Double {
  let leftD = (left % 1) * 100
  let rightD = (right % 1) * 100
  let leftW = (left - leftD) / 100
  let rightW = (right - rightD) / 100
  return (leftD + leftW) * (rightD + rightW)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>Operators that end with <code>=</code> are expected to update their left-hand operands, and are therefore ignored.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-swift" data-lang="swift">func **= (inout p1:Int, p2:Int) {
    p1 = p1 ** p2
}</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Move the body of this operator function into another function and call the function from here.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_19_jun_2015_135923_elena_vilchik_wrote">on 19 Jun 2015, 13:59:23 Elena Vilchik wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] What about less strict raising issue?</p>
</div>
<div class="literalblock">
<div class="content">
<pre>"This rule raises an issue when the function that defines the operation of a custom operator consists of something other than a single *return statement*."</pre>
</div>
</div>
<div class="paragraph">
<p>(we don&#8217;t care about return value expression)</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_19_jun_2015_154220_ann_campbell_wrote">on 19 Jun 2015, 15:42:20 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>That&#8217;s up to you [~elena.vilchik], but if the point of the rule is to off-load the logic into another function for flexibility, then people can get around the rule if they can cram all the functionality into a single line without actually fulfilling the purpose. E.G.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  return (( (left % 1) * 100) + ((left - ( (left % 1) * 100)) / 100)) * (((right % 1) * 100) + ((right - ((right % 1) * 100)) / 100))</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_on_19_jun_2015_154616_elena_vilchik_wrote">on 19 Jun 2015, 15:46:16 Elena Vilchik wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] do you have nothing else to do?))</p>
</div>
<div class="paragraph">
<p>Ok, let&#8217;s keep it as it is :)</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_24_jun_2015_092605_elena_vilchik_wrote">on 24 Jun 2015, 09:26:05 Elena Vilchik wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I&#8217;ve added exception and removed all mentioning of "custom" as this rule is about all operator functions. Could you verify?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_24_jun_2015_134929_ann_campbell_wrote">on 24 Jun 2015, 13:49:29 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>I&#8217;ve made some minor edits [~elena.vilchik]. Double-check me, please.</p>
</div>
</div>
</div>
</div>