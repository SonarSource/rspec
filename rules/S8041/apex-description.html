<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when an Apex HTTP callout is made without implementing retry logic to handle transient failures.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unlike Outbound Messaging, Apex callouts do not have built-in retry mechanisms. When you make an HTTP callout without retry logic, temporary network issues, service timeouts, or brief service unavailability will cause the callout to fail permanently.</p>
</div>
<div class="paragraph">
<p>This creates several problems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Data loss</strong>: Failed callouts may result in lost data that cannot be recovered</p>
</li>
<li>
<p><strong>Poor user experience</strong>: Users may see errors for temporary issues that could be resolved with a simple retry</p>
</li>
<li>
<p><strong>Reduced system reliability</strong>: Your integration becomes fragile and prone to failure</p>
</li>
<li>
<p><strong>Increased support burden</strong>: More manual intervention needed to handle failed integrations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Transient failures are common in distributed systems. Network hiccups, temporary service overload, or brief maintenance windows can cause callouts to fail even when the target service is generally available. Without retry logic, these temporary issues become permanent failures.</p>
</div>
<div class="paragraph">
<p>Implementing retry logic with exponential backoff helps distinguish between temporary issues (which can be resolved by waiting and retrying) and permanent failures (which need different handling). This makes your integrations more robust and reliable.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Failed callouts due to transient network issues can result in data loss, poor user experience, and reduced system reliability. Critical business processes that depend on external integrations may fail unnecessarily.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Wrap HTTP callouts in retry logic with proper exception handling. Use a loop to retry failed requests, and implement exponential backoff to avoid overwhelming failing services.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">@future(callout=true)
public static void makeCallout() {
    Http http = new Http();
    HttpRequest request = new HttpRequest();
    request.setEndpoint('https://api.example.com/data');
    request.setMethod('POST');
    HttpResponse response = http.send(request); // Noncompliant
    // No retry logic - fails permanently on transient issues
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">@future(callout=true)
public static void makeCallout() {
    Integer maxRetries = 3;
    Integer retryDelay = 1000; // Start with 1 second

    for (Integer attempt = 0; attempt &lt; maxRetries; attempt++) {
        try {
            Http http = new Http();
            HttpRequest request = new HttpRequest();
            request.setEndpoint('https://api.example.com/data');
            request.setMethod('POST');
            request.setTimeout(10000);

            HttpResponse response = http.send(request);

            // Success - exit retry loop
            if (response.getStatusCode() &gt;= 200 &amp;&amp; response.getStatusCode() &lt; 300) {
                break;
            }

            // Server error - retry
            if (response.getStatusCode() &gt;= 500 &amp;&amp; attempt &lt; maxRetries - 1) {
                System.debug('Server error, retrying in ' + retryDelay + 'ms');
                // Exponential backoff
                retryDelay *= 2;
                continue;
            }

        } catch (Exception e) {
            if (attempt == maxRetries - 1) {
                // Final attempt failed - rethrow
                throw e;
            }
            System.debug('Callout failed, retrying: ' + e.getMessage());
            retryDelay *= 2;
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Apex HTTP Callouts - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_callouts_http.htm">Official Salesforce documentation on making HTTP callouts in Apex</a></p>
</li>
<li>
<p>Callout Limits and Timeouts - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_callouts_timeouts.htm">Documentation on Apex callout limits and timeout handling</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-754: Improper Check for Unusual or Exceptional Conditions - <a href="https://cwe.mitre.org/data/definitions/754.html">Failure to handle exceptional conditions like network timeouts</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>