<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Most checks against an <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.indexof">IndexOf</a> value compare it with -1 because <strong>0 is a valid index</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">strings.IndexOf(someString) == -1 // Test for "index not found"
strings.IndexOf(someString) &lt; 0   // Test for "index not found"
strings.IndexOf(someString) &gt;= 0  // Test for "index found"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any checks which look for values <code>&gt; 0</code> ignore the first element, which is likely a bug. If the intent is merely to check the inclusion of a value in a <code>string</code>, <code>List</code>, or array, consider using the <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.contains">Contains</a> method instead.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">strings.Contains(someString) // bool result</code></pre>
</div>
</div>
<div class="paragraph">
<p>This rule raises an issue when the output value of any of the following methods is tested against <code>&gt; 0</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.ilist.indexof">IndexOf</a>, applied to <code>string</code>, list or array</p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.indexofany">IndexOfAny</a>, applied to a <code>string</code></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.lastindexof">LastIndexOf</a>, applied to a <code>string</code>, list or array</p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.lastindexofany">LastIndexOfAny</a>, applied to a <code>string</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">someArray.IndexOf(someItem) &gt; 0        // Noncompliant: index 0 missing
someString.IndexOfAny(charsArray) &gt; 0  // Noncompliant: index 0 missing
someList.LastIndexOf(someItem) &gt; 0     // Noncompliant: index 0 missing
someString.LastIndexOf(charsArray) &gt; 0 // Noncompliant: index 0 missing</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">string color = "blue";
string name = "ishmael";

List&lt;string&gt; strings = new List&lt;string&gt;();
strings.Add(color);
strings.Add(name);
string[] stringArray = strings.ToArray();

if (strings.IndexOf(color) &gt; 0) // Noncompliant
{
  // ...
}

if (name.IndexOf("ish") &gt; 0) // Noncompliant
{
  // ...
}

if (name.IndexOf("ae") &gt; 0) // Noncompliant
{
  // ...
}

if (Array.IndexOf(stringArray, color) &gt; 0) // Noncompliant
{
  // ...
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">string color = "blue";
string name = "ishmael";

List&lt;string&gt; strings = new List&lt;string&gt;();
strings.Add(color);
strings.Add(name);
string[] stringArray = strings.ToArray();

if (strings.IndexOf(color) &gt; -1)
{
  // ...
}

if (name.IndexOf("ish") &gt;= 0)
{
  // ...
}

if (name.Contains("ae"))
{
  // ...
}

if (Array.IndexOf(stringArray, color) &gt;= 0)
{
  // ...
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.contains">String.Contains Method</a></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.indexofany">String.IndexOfAny Method</a></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.lastindexof">String.LastIndexOf Method</a></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.lastindexofany">String.LastIndexOfAny Method</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>0 is a valid index, but this check against n ignores it.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s2912">relates to: <a data-rspec-id="S2912" class="rspec-auto-link">S2912</a></h3>

</div>
<div class="sect2">
<h3 id="_on_5_may_2015_123922_ann_campbell_wrote">on 5 May 2015, 12:39:22 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>After discussion, rule only checks for tests against <code>&gt;0</code>, so this is ignored: <code>if (str.indexOf('a') &gt;  1)</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_on_26_jun_2015_152907_ann_campbell_wrote">on 26 Jun 2015, 15:29:07 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>looks good [~tamas.vajk]</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_26_jun_2015_133635_tamas_vajk_wrote">on 26 Jun 2015, 13:36:35 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] this rule talks about both lists and strings, but the error message explicitly mentions strings. Also, the rule seems to only check for <code>&gt;0</code>, but the message says <code>n</code>.</p>
</div>
<div class="paragraph">
<p>I would probably go with something like this: <em>0 is a valid index, but this check ignores it.</em></p>
</div>
</div>
<div class="sect2">
<h3 id="_on_26_jun_2015_134507_tamas_vajk_wrote">on 26 Jun 2015, 13:45:07 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I&#8217;ve added an additional C# specific option: <code>Array.IndexOf</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_on_26_jun_2015_152759_ann_campbell_wrote">on 26 Jun 2015, 15:27:59 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Done [~tamas.vajk]</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_apr_2017_152904_elena_vilchik_wrote">on 10 Apr 2017, 15:29:04 Elena Vilchik wrote:</h3>
<div class="paragraph">
<p>Temporary removed from SW before FP are removed: SONARJS-991</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_06_jun_2023_163000_antonio_aversa_wrote">on 06 Jun 2023, 16:30:00 Antonio Aversa wrote:</h3>
<div class="paragraph">
<p>During a LaYC sprint, I removed dummy implementations for the following languages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>cfamily</p>
</li>
<li>
<p>flex</p>
</li>
<li>
<p>go</p>
</li>
<li>
<p>php</p>
</li>
<li>
<p>python</p>
</li>
<li>
<p>vb6</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>They are not implemented in the corresponding analyzer and there currently are no tickets open in order to do so.</p>
</div>
</div>
</div>
</div>