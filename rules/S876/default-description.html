<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Applying the unary minus operator to an unsigned variable or expression will always yield another unsigned expression. More plainly, in some cases the operation itself is meaningless, and in some other cases the result will be unexpected. In all cases it is bad practice. Therefore the unary minus operator should not be applied to unsigned variables or expressions.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">uint8_t a = -1U;
int32_t b = -a; // Noncompliant; b is assigned -255
uint32_t c = 1U;
int64_t d = -c; // Noncompliant; d is assigned MAX_UINT</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>This rule ignores <code>-1U</code> because it is commonly used as shorthand for <code>MAX_UINT</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>MISRA C:2004, 12.9 - The unary minus operator shall not be applied to an expression whose underlying type is unsigned.</p>
</li>
<li>
<p>MISRA C&#43;&#43;:2008, 5-3-2 - The unary minus operator shall not be applied to an expression whose underlying type is unsigned.</p>
</li>
<li>
<p>MISRA C:2012, 10.1 - Operands shall not be of an inappropriate essential type</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Remove the unary minus operator or change the expression&#8217;s underlying type.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_28_sep_2014_232445_evgeny_mandrikov_wrote">on 28 Sep 2014, 23:24:45 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>Provided solution is not compliant - unary minus is still applied on unsiged expression "1U". Clang emits warning in both cases:</p>
</div>
<div class="paragraph">
<p>{noformat}</p>
</div>
<div class="paragraph">
<p>#include &lt;stdint.h&gt;</p>
</div>
<div class="paragraph">
<p>uint8_t b = - 1U; // warning: implicit conversion from 'unsigned int' to 'uint8_t' (aka 'unsigned char') changes value from 4294967295 to 255</p>
</div>
<div class="paragraph">
<p>int8_t a = - 1U; // warning: implicit conversion from 'unsigned int' to 'int8_t' (aka 'signed char') changes value from 4294967295</p>
</div>
<div class="paragraph">
<p>{noformat}</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_3_oct_2014_190403_ann_campbell_wrote">on 3 Oct 2014, 19:04:03 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Thanks for the catch [~evgeny.mandrikov]</p>
</div>
</div>
</div>
</div>