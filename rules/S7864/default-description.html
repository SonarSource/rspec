<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when a method&#8217;s main logic is wrapped inside conditional blocks (<code>if</code>, <code>unless</code>) that could be replaced with guard clauses (early returns).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Guard clauses are a coding pattern that handles preconditions and edge cases at the beginning of a method using early returns. This approach offers several advantages over nested conditional blocks.</p>
</div>
<div class="paragraph">
<p>When the main logic of a method is wrapped in conditional statements, it creates unnecessary nesting. This nesting makes code harder to read and understand, especially as conditions become more complex or multiple validations are needed.</p>
</div>
<div class="paragraph">
<p>Guard clauses flip this pattern by checking for invalid conditions first and returning early when they&#8217;re met. This leaves the main logic at the top level of the method, making it more prominent and easier to follow.</p>
</div>
<div class="paragraph">
<p>The benefits include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Reduced cognitive load</strong>: Readers can quickly identify and dismiss edge cases, then focus on the main functionality</p>
</li>
<li>
<p><strong>Flatter code structure</strong>: Less indentation makes code easier to scan and understand</p>
</li>
<li>
<p><strong>Clearer intent</strong>: Guard clauses explicitly show what conditions must be met for the method to proceed</p>
</li>
<li>
<p><strong>Easier maintenance</strong>: Adding new preconditions doesn&#8217;t increase nesting levels</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>While this issue doesn&#8217;t affect functionality, it impacts code maintainability and readability. Deeply nested conditional blocks increase cognitive complexity, making code harder to understand, debug, and modify. This can slow down development and increase the likelihood of introducing bugs during maintenance.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace the conditional block with a guard clause that returns early when the condition is not met. Move the main logic to the top level of the method.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">def authenticate_user
  # Main logic wrapped in conditional
  if @user&amp;.authenticate(password)
    create_session
    render_success
  else
    render_error('Invalid username or password')
  end
end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">def authenticate_user
  # Guard clause - early return for invalid conditions
  return render_error('Invalid username or password') unless @user&amp;.authenticate(password)

  # Main logic at top level
  create_session
  render_success
end</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Ruby Style Guide - Guard Clauses - <a href="https://rubystyle.guide/#no-nested-conditionals">Official Ruby style guide recommendation for avoiding nested conditionals</a></p>
</li>
<li>
<p>Refactoring Guru - Replace Nested Conditional with Guard Clauses - <a href="https://refactoring.guru/replace-nested-conditional-with-guard-clauses">Detailed explanation of the guard clause refactoring pattern</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>