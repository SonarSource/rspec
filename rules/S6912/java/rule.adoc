== Why is this an issue?

Frequent communication with the database can introduce overhead and decrease performance, especially in scenarios involving multiple SQL statements.
By batching SQL queries, the number of interactions with the database is reduced, leading to improved efficiency and faster execution times.
This can be achieved using the methods provided by the `java.sql.Statement` and `java.sql.PreparedStatement` interfaces for batch processing.

== How to fix it

Group SQL statements by using method `addBatch` to add them to a batch, and then execute them using `executeBatch` to send them to the database in a single call.

=== Code examples

==== Noncompliant code example

[source,java,diff-id=1,diff-type=noncompliant]
----
public void execute(Connection connection) {
  try {
    Statement statement = connection.createStatement();

    statement.execute("INSERT INTO myTable (column1, column2) VALUES (123, 'value1')"); // Noncompliant
    statement.execute("INSERT INTO myTable (column1, column2) VALUES (456, 'value2')"); // Noncompliant
    statement.execute("INSERT INTO myTable (column1, column2) VALUES (789, 'value3')"); // Noncompliant

    statement.close();
    connection.close();
  } catch (SQLException e) {
    e.printStackTrace();
  }
}
----

==== Compliant solution

[source,java,diff-id=1,diff-type=compliant]
----
public void execute(Connection connection) {
  try {
    Statement statement = connection.createStatement();

    statement.addBatch("INSERT INTO myTable (column1, column2) VALUES (123, 'value1')"); // Compliant
    statement.addBatch("INSERT INTO myTable (column1, column2) VALUES (456, 'value2')"); // Compliant
    statement.addBatch("INSERT INTO myTable (column1, column2) VALUES (789, 'value3')"); // Compliant

    statement.executeBatch();

    statement.executeBatch();
    statement.close();
    connection.close();
  } catch (SQLException e) {
    e.printStackTrace();
  }
}
----

== Resources

=== Documentation

* https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/Statement.html[Oracle Java SE 21 API - java.sql.Statement]
* https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/PreparedStatement.html[Oracle Java SE 21 API - java.sql.PreparedStatement]

=== Articles & blog posts

* https://www.baeldung.com/jdbc-batch-processing[Baeldung - JDBC Batch Processing]

