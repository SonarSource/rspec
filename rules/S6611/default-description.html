<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When accessing <code>Map</code> elements by key, you should keep in mind that value might not be present. If value is not present, <code>null</code> will be returned. To make it possible, the type of returned value is nullable. In Kotlin, it&#8217;s not usually convenient to operate with nullable types, so developers usually try to avoid them or convert them to non-nullable types. One of the possible solutions is to use <code>!!</code> (non-null assertion operator). If during the runtime the actual value applied to non-null asserrion operator was <code>null</code>, then <code>NullPointerException</code> will be thrown. While in some cases it could still be legitimate to use <code>!!</code>, accesing <code>Map</code> values is not one of them. Usage of a <code>!!</code> when accesing <code>Map</code> values is a bad practice and can lead to <code>NullPointerException</code> in Kotlin and potential crashes, if Java interop was involved.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You should avoid using the non-null assertion operator when accessing <code>Map</code> elements.</p>
</div>
<div class="paragraph">
<p>Instead, you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>return an instance of a nullable type.</p>
</li>
<li>
<p>use <code>getValue</code>. This will throw <code>NoSuchElementException</code> when an element is not present.</p>
</li>
<li>
<p>use either <code>getOrElse</code> or <code>getOrDefault</code> functions and explicitly specify the behavior in case of a null value.</p>
</li>
<li>
<p>use an elvis operator <code>?:</code> to specify the behavior in case of a null value.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="paragraph">
<p>This example will throw a <code>NullPointerException</code> at the <code>!!</code> operator because <code>map</code> doesn&#8217;t have a key <code>123</code> and the result of <code>get(123)</code> will be null.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">val l = mapOf(1 to "one", 2 to "two", 3 to "five")
l.get(123)!! // Noncompliant
l[123]!! // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="paragraph">
<p>By removing the non-null assertion operator the result of the <code>get(123)</code> call will return an instance of a nullable type, and the user can handle the potential <code>null</code> value properly.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">val l = mapOf(1 to "one", 2 to "two", 3 to "five")
l.get(123) // Compliant, returns nullable
l[123] // Compliant, returns nullable
l.getValue(123) // Compliant, throws NoSuchElementException
l.getOrElse(123 ) { "empty" } // Compliant, has default
l.getOrDefault(123, "empty") // Compliant, has default
l[123] ?: "empty" // Compliant, has default</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://kotlinlang.org/docs/null-safety.html">Kotlin Documentation - Null safety</a></p>
</li>
<li>
<p><a href="https://kotlinlang.org/docs/map-operations.html">Kotlin Documentation - Map-specific operations</a></p>
</li>
<li>
<p><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/get-or-else.html">Kotlin Documentation - getOrElse</a></p>
</li>
<li>
<p><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/get-or-default.html">Kotlin Documentation - getOrDefault</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_articles_blog_posts">Articles &amp; blog posts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://medium.com/@igorwojda/kotlin-combating-non-null-assertions-5282d7b97205">Kotlin â€” combating non-null assertions (!!)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>