<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when <code>config.assets.compile</code> is set to <code>true</code> in Rails production environment configuration files.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Enabling asset compilation in production environments creates significant performance problems for Rails applications.</p>
</div>
<div class="paragraph">
<p>When <code>config.assets.compile = true</code> is set in production, the Rails asset pipeline compiles assets on-demand during runtime. This means every request for a CSS, JavaScript, or image file must be processed by Sprockets, the Rails asset compilation engine.</p>
</div>
<div class="paragraph">
<p>This live compilation approach has several serious drawbacks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Performance overhead</strong>: Each asset request requires compilation processing, adding latency to page loads</p>
</li>
<li>
<p><strong>Server resource consumption</strong>: The compilation process uses CPU and memory resources that should be dedicated to serving user requests</p>
</li>
<li>
<p><strong>Missing optimizations</strong>: Live compilation bypasses important production optimizations like asset minification, compression, and fingerprinting</p>
</li>
<li>
<p><strong>Caching issues</strong>: Dynamically compiled assets are harder to cache effectively, both on the server and in browsers</p>
</li>
<li>
<p><strong>Deployment complexity</strong>: Production servers need development dependencies like JavaScript runtimes for compilation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Rails framework defaults to <code>config.assets.compile = false</code> in production for good reason. Assets should be precompiled during the deployment process using <code>rake assets:precompile</code>, which creates optimized, compressed, and fingerprinted versions that can be served efficiently by web servers.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Applications with asset compilation enabled in production will experience slower page load times, increased server resource usage, and reduced scalability. Users will face longer wait times when loading pages, especially those with many CSS and JavaScript files. The server will consume more CPU and memory for asset processing instead of handling user requests, potentially leading to performance bottlenecks under load.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Disable asset compilation in production and ensure assets are precompiled during deployment. Set up proper asset serving configuration for optimal performance.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># config/environments/production.rb
Rails.application.configure do
  # Avoid: Enabling live compilation in production causes performance issues
  config.assets.compile = true # Noncompliant
end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># config/environments/production.rb
Rails.application.configure do
  # Disable asset compilation in production for better performance
  config.assets.compile = false

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  config.assets.digest = true

  # Precompile additional assets during deployment
  config.assets.precompile += %w( admin.js admin.css )
end</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Rails Asset Pipeline Guide - <a href="https://guides.rubyonrails.org/asset_pipeline.html">Official Rails documentation on the asset pipeline and production configuration</a></p>
</li>
<li>
<p>Rails Configuration Guide - Assets - <a href="https://guides.rubyonrails.org/configuring.html#configuring-assets">Detailed documentation on Rails asset configuration options</a></p>
</li>
<li>
<p>Sprockets Documentation - <a href="https://github.com/rails/sprockets">Documentation for the Rails asset compilation engine</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>