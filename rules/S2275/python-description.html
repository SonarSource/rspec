<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Formatting strings, either with the <code>%</code> operator or <code>str.format</code> method, requires a valid string and arguments matching this string&#8217;s replacement fields.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when formatting a string will raise an exception because the input string or arguments are invalid. Rule <a data-rspec-id="S3457" class="rspec-auto-link">S3457</a> covers cases where no exception is raised and the resulting string is simply not formatted properly.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">print('Error code %d' % '42')  # Noncompliant. Replace this value with a number as %d requires.

print('User {1} is not allowed to perform this action'.format('Bob'))  # Noncompliant. Replacement field numbering should start at 0.

print('User {0} has not been able to access {}'.format('Alice', 'MyFile'))  # Noncompliant. Use only manual or only automatic field numbering, don't mix them.

print('User {a} has not been able to access {b}'.format(a='Alice'))  # Noncompliant. Provide a value for field "b".</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">print('Error code %d' % 42)

print('User {0} is not allowed to perform this action'.format('Bob'))

print('User {0} has not been able to access {1}'.format('Alice', 'MyFile'))

print('User {a} has not been able to access {b}'.format(a='Alice', b='MyFile'))</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.python.org/3/library/string.html#format-string-syntax">Python documentation - Format String Syntax</a></p>
</li>
<li>
<p><a href="https://docs.python.org/3/library/stdtypes.html#printf-style-string-formatting">Python documentation - printf-style String Formatting</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>Fix this formatted string&#8217;s syntax.</p>
</li>
<li>
<p>Fix this formatted string&#8217;s syntax; !z is not a valid conversion flag.</p>
</li>
<li>
<p>Fix this string formatting; index 1 doesn&#8217;t match any argument.</p>
</li>
<li>
<p>Name unnamed conversion specifiers.</p>
</li>
<li>
<p>Replace this formatting argument with a tuple.</p>
</li>
<li>
<p>Replace this formatting argument with a mapping.</p>
</li>
<li>
<p>Replace this value with a number as "%d" requires.</p>
</li>
<li>
<p>Replace this value with an integer as "%X" requires.</p>
</li>
<li>
<p>Replace this value with an integer as "*" requires.</p>
</li>
<li>
<p>Add X missing argument(s).</p>
</li>
<li>
<p>Remove X unexpected arguments.</p>
</li>
<li>
<p>Provide a value for field "X".</p>
</li>
<li>
<p>Replace this key; %-format accepts only string keys.</p>
</li>
<li>
<p>Use only positional or only named field, don&#8217;t mix them.</p>
</li>
<li>
<p>Use only manual or only automatic field numbering, don&#8217;t mix them.</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s3457">relates to: <a data-rspec-id="S3457" class="rspec-auto-link">S3457</a></h3>

</div>
<div class="sect2">
<h3 id="_is_related_to_s3941">is related to: <a data-rspec-id="S3941" class="rspec-auto-link">S3941</a></h3>

</div>
<div class="sect2">
<h3 id="_on_2_feb_2015_204330_sébastien_gioria_wrote">on 2 Feb 2015, 20:43:30 Sébastien Gioria wrote:</h3>
<div class="paragraph">
<p>could fall in OWASP Top10 2013 A6</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_3_feb_2015_203229_ann_campbell_wrote">on 3 Feb 2015, 20:32:29 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>I don&#8217;t understand how [~sebastien.gioria]</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_14_jul_2016_180743_ann_campbell_wrote">on 14 Jul 2016, 18:07:43 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~nicolas.peru] I think https://github.com/google/error-prone/blob/master/docs/bugpattern/FormatString.md has cases not covered here&#8230;&#8203;?</p>
</div>
</div>
</div>
</div>