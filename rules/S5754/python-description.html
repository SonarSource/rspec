<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when a bare <code>except:</code>, an <code>except BaseException</code> or an <code>except SystemExit</code> block does not re-raise the exception caught.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <a href="https://docs.python.org/3/library/exceptions.html#SystemExit"><code>SystemExit</code></a> exceptionÂ is raised when <a href="https://docs.python.org/3/library/sys.html#sys.exit"><code>sys.exit()</code></a> is called.
This exception is used to signal the interpreter to exit. The exception is expected to propagate up until the program stops.
It is possible to catch this exception in order to perform, for example, clean-up tasks. It should, however, be raised again to allow the interpreter to exit as expected.
Not re-raising such exception could lead to undesired behaviour.</p>
</div>
<div class="paragraph">
<p>A <a href="https://docs.python.org/3/reference/compound_stmts.html#the-try-statement">bare <code>except:</code> statement</a>, i.e. an <code>except</code> block without any exception class, is equivalent to <a href="https://docs.python.org/3/library/exceptions.html#BaseException"><code>except BaseException</code></a>.
Both statements will catch every exceptions, including <code>SystemExit</code>. It is recommended to catch instead a more specific exception.
If it is not possible, the exception should be raised again.</p>
</div>
<div class="paragraph">
<p>It is also a good idea to re-raise the <a href="https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt"><code>KeyboardInterrupt</code></a> exception. Similarly to <code>SystemExit</code>,<code>KeyboardInterrupt</code> is used to signal the interpreter to exit. Not re-raising such exception could also lead to undesired behaviour.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Re-raise <code>SystemExit</code>, <code>BaseException</code> and any exceptions caught in a bare <code>except</code> clause.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">try:
    ...
except SystemExit:  # Noncompliant: the SystemExit exception is not re-raised.
    pass

try:
    ...
except BaseException:  # Noncompliant: BaseExceptions encompass SystemExit exceptions and should be re-raised.
    pass

try:
    ...
except:  # Noncompliant: exceptions caught by this statement should be re-raised or a more specific exception should be caught.
    pass</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">try:
    ...
except SystemExit as e:
    ...
    raise e

try:
    ...
except BaseException as e:
    ...
    raise e

try:
    ...
except FileNotFoundError:
    ... # Handle a more specific exception</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>PEP 352 - <a href="https://www.python.org/dev/peps/pep-0352/#id5">Required Superclass for Exceptions</a></p>
</li>
<li>
<p>Python Documentation - <a href="https://docs.python.org/3/library/exceptions.html">Built-in exceptions</a></p>
</li>
<li>
<p>Python Documentation - <a href="https://docs.python.org/3/reference/compound_stmts.html#the-try-statement">The <code>try</code> statement</a></p>
</li>
<li>
<p>CWE - <a href="https://cwe.mitre.org/data/definitions/391">CWE-391, Unchecked Error Condition</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>if it is a bare "except:":</p>
</li>
<li>
<p>specify an exception class to catch or reraise the exception.</p>
</li>
<li>
<p>if it catches a BaseException:</p>
</li>
<li>
<p>catch a more specific exception or reraise the exception.</p>
</li>
<li>
<p>if SystemExit is caught:the application as the user expects.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>the "except" statement</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s1181">relates to: <a data-rspec-id="S1181" class="rspec-auto-link">S1181</a></h3>

</div>
<div class="sect2">
<h3 id="_relates_to_s2142">relates to: <a data-rspec-id="S2142" class="rspec-auto-link">S2142</a></h3>

</div>
<div class="sect2">
<h3 id="_relates_to_s2738">relates to: <a data-rspec-id="S2738" class="rspec-auto-link">S2738</a></h3>

</div>
<div class="sect2">
<h3 id="_on_6_mar_2020_150541_nicolas_harraudeau_wrote">on 6 Mar 2020, 15:05:41 Nicolas Harraudeau wrote:</h3>
<div class="paragraph">
<p>This rule is similar to <a data-rspec-id="S2142" class="rspec-auto-link">RSPEC-2142</a> but this one is a code smell because python 2 forced developers to use a bare <code>except:</code> for a long time. Thus old projects will have many issues. Yet even in python 2 it is possible to handle properly the exception. Thus we raise a code smell issue for both python 2 and python 3.</p>
</div>
</div>
</div>
</div>