<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Recursion">Recursion</a> is a technique used to define a problem in terms of the problem itself, usually in terms of a simpler version of the problem itself.</p>
</div>
<div class="paragraph">
<p>For example, the implementation of the generator for the n-th value of the <a href="https://en.wikipedia.org/wiki/Fibonacci_sequence">Fibonacci sequence</a> comes naturally from its mathematical definition, when recursion is used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">int NthFibonacciNumber(int n)
{
    if (n &lt;= 1)
    {
        return 1;
    }
    else
    {
        return NthFibonacciNumber(n - 1) + NthFibonacciNumber(n - 2);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As opposed to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">int NthFibonacciNumber(int n)
{
    int previous = 0;
	int last = 1;
	for (var i = 0; i &lt; n; i++)
	{
        (previous, last) = (last, last + previous);
	}
	return last;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The use of recursion is acceptable in methods, like the one above, where you can break out of it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">int NthFibonacciNumber(int n)
{
    if (n &lt;= 1)
    {
        return 1; // Base case: stop the recursion
    }
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also acceptable and makes sense in some type definitions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">class Box : IComparable&lt;Box&gt;
{
    public int CompareTo(Box? other)
    {
        // Compare the two Box instances...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With types, some invalid recursive definitions are caught by the compiler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">class C2&lt;T&gt; : C2&lt;T&gt;     // Error CS0146: Circular base type dependency
{
}

class C2&lt;T&gt; : C2&lt;C2&lt;T&gt;&gt; // Error CS0146: Circular base type dependency
{
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In more complex scenarios, however, the code will compile but execution will result in a <a href="https://learn.microsoft.com/en-us/dotnet/api/system.typeloadexception">TypeLoadException</a> if you try to instantiate the class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">class C1&lt;T&gt;
{
}

class C2&lt;T&gt; : C1&lt;C2&lt;C2&lt;T&gt;&gt;&gt; // Noncompliant
{
}

var c2 = new C2&lt;int&gt;();     // This would result into a TypeLoadException</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/Recursion_(computer_science)">Recursion</a></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.typeloadexception">TypeLoadException</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_articles_blog_posts">Articles &amp; blog posts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern">Curiously recurring template pattern</a></p>
</li>
<li>
<p><a href="https://blog.stephencleary.com/2022/09/modern-csharp-techniques-1-curiously-recurring-generic-pattern.html">Modern C# Techniques, Part 1: Curiously Recurring Generic Pattern</a></p>
</li>
<li>
<p><a href="https://ericlippert.com/2011/02/02/curiouser-and-curiouser/">Curiouser and curiouser</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Refactor this class so that the generic inheritance chain is not recursive.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>class name &amp; type &amp; inherited class &amp; type</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_10_dec_2015_173209_ann_campbell_wrote">on 10 Dec 2015, 17:32:09 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Targeting to C&#43;&#43; because according to [~evgeny.mandrikov],</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>from language specification - there is no limit</p>
</div>
<div class="paragraph">
<p>templates are turing complete</p>
</div>
<div class="paragraph">
<p>so in theory - this is valid</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_on_11_dec_2015_091458_tamas_vajk_wrote">on 11 Dec 2015, 09:14:58 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I changed the description a bit</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_11_dec_2015_135831_ann_campbell_wrote">on 11 Dec 2015, 13:58:31 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>looks good [~tamas.vajk]</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_27_sep_2018_201118_loïc_joly_wrote">on 27 Sep 2018, 20:11:18 Loïc Joly wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] -I would remove C&#43;&#43;, because such inheritance is indeed totally valid, and is even a commonly used idiom see for instance the https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern link-</p>
</div>
<div class="paragraph">
<p>After better understanding of this rule, I would still remove it for C&#43;&#43;, but for other reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There could be places where that works, because template specialization could break the recursion</p>
</li>
<li>
<p>In places where it does not work, since templates are fully resolved during compilation, the code would not compile, so no need to report anything during analysis.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_on_27_sep_2018_204807_ann_campbell_wrote">on 27 Sep 2018, 20:48:07 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Feel free, [~loic.joly] :-)</p>
</div>
</div>
</div>
</div>