<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a container image is not tagged with a specific version, it is referred to as <code>latest</code>.
This means that every time the image is built, deployed, or run, it will always use the latest version of the image.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While using always the latest version may seem convenient, the build cannot be repeated because it is not clear which was the last version. In addition, it can lead to unpredictability and issues such as version mismatch and potential security vulnerabilities.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>For example, if a developer builds and deploys an application using <code>my-image:latest</code>, they may unknowingly be using a different version of the image than another developer who also built and deployed the same application using <code>my-image:latest</code>.
This can lead to version mismatches, which can cause bugs or compatibility issues.</p>
</div>
<div class="paragraph">
<p>In addition, using <code>latest</code> as the tag for container images can potentially introduce security vulnerabilities.
For instance, if a security vulnerability is discovered in an image and a new version is released to fix it, using <code>latest</code> as the tag means that the application will automatically use the updated image, even if it has not been properly tested and vetted for compatibility with the application.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To avoid these issues, it is recommended to use specific version tags for container images.</p>
</div>
<div class="paragraph">
<p>This can be done by appending the version number or tag to the container image name.
For example, instead of <code>my-image:latest</code>, it is better to use <code>my-image:1.2.3-alpine</code> or <code>my-image:1.2.3</code>.</p>
</div>
<div class="paragraph">
<p>For even more control and traceability, it is also possible to specify your image by digest using the sha256 of the image. This will pin your image to a specific version in time, but will also exclude it from eventual security updates.
An example would be using <code>my-image@sha256:26c68657ccce2cb0a31b330cb0be2b5e108d467f641c62e13ab40cbec258c68d</code>.</p>
</div>
<div class="paragraph">
<p>More information can be found in the documentation at the end.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: example
spec:
  containers:
    - name: nginx
      image: nginx # Noncompliant

    - name: nginx
      image: nginx:latest # Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: example
spec:
  containers:
    - name: nginx
      image: nginx:1.14.2 # Compliant, fixed tag

    - name: nginx
      image: nginx@sha256:b0ad43f7ee5edbc0effbc14645ae7055e21bc1973aee5150745632a24a752661 # Compliant, SHA of the image</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_does_this_work">How does this work?</h3>
<div class="paragraph">
<p>This way, the same version of the container image is used every time the application is built, deployed, or run, ensuring consistency and predictability across different environments. It is also not enough to use the latest tag, as this version also changes with each release.</p>
</div>
</div>
<div class="sect2">
<h3 id="_going_the_extra_mile">Going the extra mile</h3>
<div class="paragraph">
<p>Adhering to this can also make it easier to track which version of the container image is being used, which can be useful for debugging and troubleshooting purposes.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://helm.sh/docs/chart_best_practices/pods/#images">Helm chart best practices - Images</a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/containers/images/">Kubernetes - Images</a></p>
</li>
<li>
<p><a href="https://docs.docker.com/engine/reference/commandline/image_pull/#pull-an-image-by-digest-immutable-identifier">Pull an image by digest (immutable identifier)</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>If a noncompliant tag is available (e.g. <code>latest</code>):</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Use a specific version tag for the image instead of "latest".</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a noncompliant tag is not available (either absent or cannot be resolved):</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Use a specific version tag for the image.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>Highlight the image without tag or highlight the image with the <code>latest</code> tag.</p>
</div>
<hr>
</div>
</div>
</div>