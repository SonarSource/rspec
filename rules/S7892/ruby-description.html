<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when code uses verbose or redundant conditional expressions to check for nil, empty strings, or falsy values instead of Ruby&#8217;s idiomatic methods.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ruby and Rails provide elegant, built-in methods for checking nil, empty, and falsy values, but developers often write verbose conditional expressions that are harder to read and maintain.</p>
</div>
<div class="paragraph">
<p>When checking for nil or empty values, expressions like <code>variable.nil? || (!variable.nil? &amp;&amp; variable.empty?)</code> contain redundant logic. The <code>!variable.nil?</code> check is unnecessary because if <code>variable.nil?</code> is false, then <code>variable</code> is not nil, making the second part of the AND condition redundant due to short-circuit evaluation.</p>
</div>
<div class="paragraph">
<p>Similarly, manual checks like <code>@user.city != nil &amp;&amp; @user.city != ""</code> are verbose and error-prone. Rails provides the <code>present?</code> method that handles nil, empty strings, whitespace-only strings, and empty collections in a single, clear method call.</p>
</div>
<div class="paragraph">
<p>Using non-idiomatic comparisons like <code>value == nil</code> instead of <code>value.nil?</code> goes against Ruby conventions and reduces code readability. The <code>nil?</code> method is more explicit about the intent and follows Ruby&#8217;s predicate method naming convention.</p>
</div>
<div class="paragraph">
<p>Complex nested conditions for checking nil and false values can often be simplified using Ruby&#8217;s safe navigation operator (<code>&amp;.</code>) introduced in Ruby 2.3, which safely calls methods on potentially nil objects without explicit nil checks.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Using verbose conditional expressions instead of idiomatic Ruby methods reduces code readability and maintainability. Complex conditions are more prone to logical errors and make the codebase harder to understand for other developers. This can slow down development and increase the likelihood of bugs in conditional logic.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace redundant nil checks with simplified boolean logic. Remove unnecessary nil checks in expressions that already benefit from short-circuit evaluation.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># Redundant nil check due to short-circuit evaluation
variable = id if variable.nil? || (!variable.nil? &amp;&amp; variable.empty?) // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># Simplified boolean logic without redundant checks
variable = id if variable.nil? || variable.empty?</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it_in_rails">How to fix it in Rails</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use Rails' <code>present?</code> method instead of manual nil and empty string checks. The <code>present?</code> method returns true if the value is not nil, not empty, and not whitespace-only.</p>
</div>
<div class="sect2">
<h3 id="_code_examples_2">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># Verbose manual checks for nil and empty
@city = @user.city != nil &amp;&amp; @user.city != "" // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># Use .present? to check if value exists and has content
@city = @user.city.present?</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Ruby Safe Navigation Operator - <a href="https://ruby-doc.org/core/doc/syntax/calling_methods_rdoc.html#label-Safe+navigation+operator">Official Ruby documentation on the safe navigation operator (&amp;.)</a></p>
</li>
<li>
<p>Rails Object#blank? and Object#present? - <a href="https://api.rubyonrails.org/classes/Object.html#method-i-blank-3F">Rails API documentation for blank? and present? methods</a></p>
</li>
<li>
<p>Ruby Predicate Methods - <a href="https://ruby-doc.org/core/Object.html#method-i-nil-3F">Ruby documentation on predicate methods like nil?</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S6582" class="rspec-auto-link">S6582</a> - <a href="https://rules.sonarsource.com/javascript/RSPEC-6582/">JavaScript rule for using optional chaining instead of logical AND</a></p>
</li>
<li>
<p><a data-rspec-id="S1155" class="rspec-auto-link">S1155</a> - <a href="https://rules.sonarsource.com/csharp/RSPEC-1155/">C# rule for using Any() to test for emptiness</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>