<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>@ComponentScan</code> is used to find which Spring <code>@Component</code> beans (<code>@Service</code> or <code>@Repository</code> or <code>Controller</code>) are available in the classpath so they can be used in the application context. This is a convenient feature especially when you begin a new project but it comes with the drawback of slowing down the application start-up time especially when the application becomes bigger (ie: it references a large JAR file, or it references a significant number of JAR files, or the base-package refers to a large amount of .class files).</p>
</div>
<div class="paragraph">
<p><code>@ComponentScan</code> should be replaced by an explicit list of Spring beans loaded by <code>@Import</code>.</p>
</div>
<div class="paragraph">
<p>The interface <code>@SpringBootApplication</code> is also considered by this rule because it is annotated with <code>@ComponentScan</code>.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@ComponentScan
public class MyApplication {
...
}

@SpringBootApplication
public class MyApplication {
...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Configuration
@Import({
        DispatcherServletAutoConfiguration.class,
        ErrorMvcAutoConfiguration.class,
        HttpEncodingAutoConfiguration.class,
        HttpMessageConvertersAutoConfiguration.class,
        MultipartAutoConfiguration.class,
        ServerPropertiesAutoConfiguration.class,
        PropertyPlaceholderAutoConfiguration.class,
        WebMvcAutoConfiguration.class
})
public class MyApplication {
...
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://sites.google.com/site/appsdevelopersindia/google-blog/optimizingspringframeworkforappengineapplications">Optimizing Spring Framework for App Engine Applications</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Consider replacing "@SpringBootApplication" | "@ComponentScan" by a list of beans imported with @Import to speed-up the start-up of the application.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_20_apr_2018_140032_alexandre_gigleux_wrote">on 20 Apr 2018, 14:00:32 Alexandre Gigleux wrote:</h3>
<div class="paragraph">
<p>Reference: https://alexecollins.com/spring-boot-performance/?spm=5176.100239.blogcont2360.15.1px5s9</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_20_apr_2018_173104_ann_campbell_wrote">on 20 Apr 2018, 17:31:04 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~alexandre.gigleux] the title says "fine-tuned" and the description says "replaced". Should title be "should not be used"?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_21_jun_2018_163500_andrei_epure_wrote">on 21 Jun 2018, 16:35:00 Andrei Epure wrote:</h3>
<div class="paragraph">
<p>This rule partially overlaps with <a href="https://jira.sonarsource.com/browse/RSPEC-4604">RSPEC-4604</a> with regards to <code>SpringBootApplication</code>. <a data-rspec-id="S4604" class="rspec-auto-link">RSPEC-4604</a> suggests having either <code>@SpringBootApplication(exclude = {})</code> , or using <code>@Import</code> - like this rule</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_22_jun_2018_092814_alban_auzeill_wrote">on 22 Jun 2018, 09:28:14 Alban Auzeill wrote:</h3>
<div class="paragraph">
<p>Even if it overlaps with <a data-rspec-id="S4604" class="rspec-auto-link">RSPEC-4604</a>, [~andrei.epure] and I decided to add it to SonarJava because this rule is not in the "Sonar way" profile. So it will be not be noisy, but useful to those who requires it.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_29_aug_2018_183014_michal_domagala_wrote">on 29 Aug 2018, 18:30:14 Michal Domagala wrote:</h3>
<div class="paragraph">
<p>Are you aware of <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#beans-scanning-index">beans-scanning-index</a>?</p>
</div>
<div class="paragraph">
<p>Did you notice that you refer to article from 2012 (Spring 3) https://cloud.google.com/appengine/articles/spring_optimization ?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_14_mar_2021_180806_stéphane_nicoll_wrote">on 14 Mar 2021, 18:08:06 Stéphane Nicoll wrote:</h3>
<div class="paragraph">
<p>Spring Boot developer here.</p>
</div>
<div class="paragraph">
<p> Unfortunately, I think this rule is misleading. The impact of component scanning is very low, even with somewhat large application. We&#8217;ve implemented a compile-time indexer that really makes a difference with thousands of beans from tens of thousands of candidates.</p>
</div>
<div class="paragraph">
<p>A better way to structure this rule would be to guide users to rationalize the candidates in a given package. So, for instance, avoiding the use of <code>@ComponentScan("org")</code> or even`@ComponentScan("org.mycompany")<code>. Component scan is better use on the project&#8217;s asserts (i.e. `org.mycomponent.myproject</code>). For libraries or reusable components, <code>@Import</code> is a better choice indeed.</p>
</div>
</div>
</div>
</div>