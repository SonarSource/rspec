<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an issue when decorators are applied directly to Flask View classes instead of using the <code>decorators</code> class attribute.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Flask, class-based views work differently from regular view functions. When you create a class-based view, the actual view function is generated by calling the <code>as_view()</code> method.</p>
</div>
<div class="paragraph">
<p>Decorators applied directly to the view class are not applied to this generated view function. This means your decorators will have no effect - they won&#8217;t be executed when requests are handled.</p>
</div>
<div class="paragraph">
<p>This can lead to serious problems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Authentication decorators like <code>@login_required</code> won&#8217;t protect your endpoints</p>
</li>
<li>
<p>Caching decorators won&#8217;t cache responses</p>
</li>
<li>
<p>Rate limiting decorators won&#8217;t limit requests</p>
</li>
<li>
<p>Custom decorators for logging, validation, or other functionality won&#8217;t work</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Flask provides the <code>decorators</code> class attribute specifically to handle this. When you list decorators in this attribute, Flask applies them to the view function returned by <code>as_view()</code>, ensuring they work correctly.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Decorators applied directly to Flask view classes are silently ignored, which can lead to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Security vulnerabilities if authentication or authorization decorators are bypassed</p>
</li>
<li>
<p>Performance issues if caching decorators don&#8217;t work</p>
</li>
<li>
<p>Missing functionality if custom decorators for logging, validation, or rate limiting are ignored</p>
</li>
<li>
<p>Difficult-to-debug issues since the decorators appear to be applied but have no effect</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Move decorators from the class definition to the <code>decorators</code> class attribute. List them in the order they should be applied (innermost decorator first).</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">@login_required
@cache(minutes=2)
class UserList(View):
    def dispatch_request(self):
        users = User.query.all()
        return render_template('users.html', users=users)  # Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class UserList(View):
    decorators = [cache(minutes=2), login_required]

    def dispatch_request(self):
        users = User.query.all()
        return render_template('users.html', users=users)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Flask Class-based Views - View Decorators - <a href="https://flask.palletsprojects.com/en/stable/views/#view-decorators">Official Flask documentation explaining how to properly apply decorators to class-based views</a></p>
</li>
<li>
<p>Flask Views API Reference - <a href="https://flask.palletsprojects.com/en/stable/api/#flask.views.View.decorators">API documentation for the View.decorators attribute</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>