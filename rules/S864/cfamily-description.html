<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The rules of operator precedence are complicated and can lead to errors. For this reason, parentheses should be used for clarification in complex statements. However, this does not mean that parentheses should be gratuitously added around every operation.</p>
</div>
<div class="paragraph">
<p>Parentheses are not needed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>with a unary operator, except when <code>!</code> is used as left operand in comparison expressions</p>
</li>
<li>
<p>when all the operators in an expression are the same</p>
</li>
<li>
<p>when only a single operator is involved</p>
</li>
<li>
<p>around the right-hand side of an assignment operator unless the right-hand side itself contains an assignment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Parentheses are needed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in the condition of a ternary operator if it uses operators</p>
</li>
<li>
<p>when overloaded shift operator <code>&lt;&lt;</code> or <code>&gt;&gt;</code> is used in an expression with comparison operators</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">x = a + b;
x = a * -1;
x = a + b + c;
x = f ( a + b, c );

x = a == b ? a : a - b; // Noncompliant
x = a + b - c + d; // Noncompliant
x = a * 3 + c + d; // Noncompliant

if (a = f(b,c) == true) { ... } // Noncompliant; == evaluated first
x - b ? a : c; // Noncompliant; "-" evaluated first
s &lt;&lt; 5 == 1; // Noncompliant; "&lt;&lt;" evaluated first</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">x = a + b;
x = a * -1;
x = a + b + c;
x = f ( a + b, c );

x = ( a == b ) ? a : ( a - b );
x = ( a + b ) - ( c + d );
x = ( a * 3 ) + c + d;

if ( (a = f(b,c)) == true) { ... }
(x - b) ? a : c; // Compliant
(s &lt;&lt; 5) == 1; // Compliant</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>MISRA C:2004, 12.1 - Limited dependence should be placed on C&#8217;s operator precedence rules in expressions</p>
</li>
<li>
<p>MISRA C:2004, 12.2 - The value of an expression shall be the same under any order of evaluation that the standard permits.</p>
</li>
<li>
<p>MISRA C:2004, 12.5 - The operands of a logical &amp;&amp; or || shall be primary-expressions.</p>
</li>
<li>
<p>MISRA C&#43;&#43;:2008, 5-0-1 - The value of an expression shall be the same under any order of evaluation that the standard permits.</p>
</li>
<li>
<p>MISRA C&#43;&#43;:2008, 5-0-2 - Limited dependence should be placed on C&#43;&#43; operator precedence rules in expressions</p>
</li>
<li>
<p>MISRA C&#43;&#43;:2008, 5-2-1 - Each operand of a logical &amp;&amp; or || shall be a postfix-expression.</p>
</li>
<li>
<p>MISRA C:2012, 12.1 - The precedence of operators within expressions should be made explicit</p>
</li>
<li>
<p><a href="https://wiki.sei.cmu.edu/confluence/x/YdYxBQ">CERT, EXP00-C.</a> - Use parentheses for precedence of operation</p>
</li>
<li>
<p>CWE - <a href="https://cwe.mitre.org/data/definitions/783">CWE-783 - Operator Precedence Logic Error</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Add parentheses to make the operator precedence explicit.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_duplicated_by_s865">is duplicated by: <a data-rspec-id="S865" class="rspec-auto-link">S865</a></h3>

</div>
<div class="sect2">
<h3 id="_is_related_to_s868">is related to: <a data-rspec-id="S868" class="rspec-auto-link">S868</a></h3>

</div>
<div class="sect2">
<h3 id="_on_2_mar_2015_164325_samuel_mercier_wrote">on 2 Mar 2015, 16:43:25 Samuel Mercier wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2]</p>
</div>
<div class="paragraph">
<p>I added the two cert references which we had in the .html page. Can you double check?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_3_mar_2015_144252_samuel_mercier_wrote">on 3 Mar 2015, 14:42:52 Samuel Mercier wrote:</h3>
<div class="paragraph">
<p>Answer from Ann on hipchat on March 3rd, 2014, 14:31 looks good @SamuelMercier . Thx</p>
</div>
</div>
</div>
</div>