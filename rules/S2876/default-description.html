<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when the object returned by <code>__iter__</code> is not a valid iterator.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An <a href="https://docs.python.org/3/glossary.html#term-iterable">iterable</a> object is an object capable of returning its members one at a time. To do so, it must define an <code>__iter__</code> method that returns an iterator.</p>
</div>
<div class="paragraph">
<p>The <a href="https://docs.python.org/3/library/stdtypes.html#iterator-types">iterator protocol</a> specifies that, in order to be a valid iterator, an object must define a <code>__next__</code> and an <code>__iter__</code> method (because iterators are also iterable).</p>
</div>
<div class="paragraph">
<p>Defining an <code>__iter__</code> method that returns anything else than an iterator will raise a <code>TypeError</code> as soon as the iteration begins.</p>
</div>
<div class="paragraph">
<p>Note that <a href="https://docs.python.org/3/tutorial/classes.html#generators">generators</a> and <a href="https://docs.python.org/3/tutorial/classes.html#generator-expressions">generator expressions</a> have both <code>__next__</code> and <code>__iter__</code> methods generated automatically.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Make sure that the <code>__iter__</code> method returns a valid iterator.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class MyIterable:
    def __init__(self, values):
        self._values = values

    def __iter__(self):
        return None  # Noncompliant: Not a valid iterator</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class MyIterable:
    def __init__(self, values):
        self._values = values

    def __iter__(self):
        return MyIterator(self._values)

class MyIterator:
    def __init__(self, values):
        self._values = values
        self._index = 0

    def __next__(self):
        if self._index &gt;= len(self._values):
            raise StopIteration()
        value = self._values[self._index]
        self._index += 1
        return value

    def __iter__(self):
        return self</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Python Documentation -  <a href="https://docs.python.org/3/library/stdtypes.html#iterator-types">Iterator Types</a></p>
</li>
<li>
<p>PEP 234 - <a href="https://www.python.org/dev/peps/pep-0234/#python-api-specification">Iterators</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>Return an object complying with iterator protocol.</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_related_to_s5625">is related to: <a data-rspec-id="S5625" class="rspec-auto-link">S5625</a></h3>

</div>
</div>
</div>