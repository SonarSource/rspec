<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when <code>Array.prototype.map()</code> is immediately followed by <code>Array.prototype.flat()</code> with no arguments or a depth of 1.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JavaScript&#8217;s <code>Array.prototype.flatMap()</code> method combines the functionality of <code>map()</code> and <code>flat()</code> in a single operation. When you chain <code>.map().flat()</code> or <code>.map().flat(1)</code>, you&#8217;re performing two separate operations that could be done more efficiently and clearly with one.</p>
</div>
<div class="paragraph">
<p>The <code>flatMap()</code> method was specifically designed for this common pattern. It maps each element using a mapping function, then flattens the result by one level. This approach has several advantages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Better performance</strong>: <code>flatMap()</code> avoids creating an intermediate array that <code>map()</code> would produce before <code>flat()</code> processes it.</p>
</li>
<li>
<p><strong>Clearer intent</strong>: The method name explicitly communicates that you&#8217;re both mapping and flattening.</p>
</li>
<li>
<p><strong>More concise</strong>: One method call instead of two chained calls reduces code complexity.</p>
</li>
<li>
<p><strong>Standard practice</strong>: Using the dedicated method follows JavaScript best practices and makes code more maintainable.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The pattern <code>.map().flat()</code> is essentially reimplementing what <code>flatMap()</code> already does optimally.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Using <code>.map().flat()</code> instead of <code>.flatMap()</code> creates unnecessary intermediate arrays, which can impact memory usage and performance, especially with large datasets. It also makes the code less readable and goes against JavaScript best practices.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_fix">How to fix?</h3>
<div class="paragraph">
<p>Replace the chained <code>.map().flat()</code> calls with a single <code>.flatMap()</code> call. The mapping function remains the same.</p>
</div>
<div class="sect3">
<h4 id="_non_compliant_code_example">Non-compliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const result = items.map(item =&gt; transform(item)).flat(); // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_code_example">Compliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const result = items.flatMap(item =&gt; transform(item));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/sindresorhus/eslint-plugin-unicorn#readme">eslint-plugin-unicorn</a> - Rule <a href="https://github.com/sindresorhus/eslint-plugin-unicorn/blob/HEAD/docs/rules/prefer-array-flat-map.md">prefer-array-flat-map</a></p>
</li>
<li>
<p>MDN - Array.prototype.flatMap() - <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap">Official documentation for the flatMap() method</a></p>
</li>
<li>
<p>MDN - Array.prototype.flat() - <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat">Official documentation for the flat() method</a></p>
</li>
<li>
<p>MDN - Array.prototype.map() - <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">Official documentation for the map() method</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>