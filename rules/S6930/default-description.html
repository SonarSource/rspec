<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Backslash characters (<code>\</code>) should be avoided in <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/routing#route-templates">route templates</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://learn.microsoft.com/en-us/aspnet/core/mvc/controllers/routing">Routing</a> in ASP.NET MVC maps <a href="https://learn.microsoft.com/en-us/aspnet/core/mvc/controllers/actions#what-is-a-controller">controllers</a> and <a href="https://learn.microsoft.com/en-us/aspnet/core/mvc/controllers/actions#defining-actions">actions</a> to paths in request <a href="https://en.wikipedia.org/wiki/Uniform_Resource_Identifier">URIs</a>.</p>
</div>
<div class="paragraph">
<p>In the former syntax specification of URIs, backslash characters (<code>\</code>) were not allowed at all (see <a href="https://datatracker.ietf.org/doc/html/rfc2396/#section-2.4.3">section "2.4.3. Excluded US-ASCII Characters" of RFC 2396</a>).
While the current specification (<a href="https://datatracker.ietf.org/doc/html/rfc3986">RFC 3986</a>) doesn&#8217;t include anymore the "Excluded US-ASCII Characters" section, most URL processors still don&#8217;t support backslash properly.</p>
</div>
<div class="paragraph">
<p>For instance, a backslash in the <a href="https://datatracker.ietf.org/doc/html/rfc3986#section-3.3">"path" part</a> of a <a href="https://en.wikipedia.org/wiki/URL#Syntax">URL</a> is automatically converted to a forward slash (<code>/</code>) both by Chrome and Internet Explorer (see <a href="https://stackoverflow.com/q/10438008">here</a>).</p>
</div>
<div class="paragraph">
<p>As an example, <code>\Calculator\Evaluate?expression=3\4</code> is converted on the fly into <code>/Calculator/Evaluate?expression=3\4</code> before the HTTP request is made to the server.</p>
</div>
<div class="paragraph">
<p>While backslashes are allowed in the "query" part of a URL, and it&#8217;s common to have them as part of a complex query expression, the route of a controller is always part of the "path".</p>
</div>
<div class="paragraph">
<p>That is why the use of backslashes in controller templates should be avoided in general.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>A backslash in the route pattern of a controller would only make sense if the developer intended the backslash in the route to be explicitly escaped by the user, using <a href="https://en.wikipedia.org/wiki/Percent-encoding#Character_data"><code>%5C</code></a>.</p>
</div>
<div class="paragraph">
<p>For example, the route <code>Something\[controller]</code> for the <code>HomeController</code> would need to be called as <code>Something%5CHome</code>.</p>
</div>
<div class="paragraph">
<p>The validity of such a scenario is unlikely and the resulting behavior is surprising.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">[Route(@"Something\[controller]")] // Noncompliant: Replace '\' with '/'.
public class HomeController : Controller
{
    [HttpGet]
    public ActionResult Index() =&gt; View();
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">[Route(@"Something/[controller]")] // '\' replaced with '/'
public class HomeController : Controller
{
    [HttpGet]
    public ActionResult Index() =&gt; View();
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">app.MapControllerRoute(
    name: "default",
    pattern: "{controller=Home}\\{action=Index}"); // Noncompliant: Replace '\' with '/'.</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">app.MapControllerRoute(
    name: "default",
    pattern: "{controller=Home}/{action=Index}"); // '\' replaced with '/'</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/routing">Routing in ASP.NET Core</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/aspnet/core/mvc/controllers/routing">Routing to controller actions in ASP.NET Core</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/aspnet/core/mvc/controllers/actions">Handle requests with controllers in ASP.NET Core MVC</a></p>
</li>
<li>
<p>Wikipedia - <a href="https://en.wikipedia.org/wiki/Uniform_Resource_Identifier">Uniform Resource Identifier</a></p>
</li>
<li>
<p>Wikipedia - <a href="https://en.wikipedia.org/wiki/URL#Syntax">URL - Syntax</a></p>
</li>
<li>
<p>Wikipedia - <a href="https://en.wikipedia.org/wiki/Percent-encoding">Percent-encoding</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_articles_blog_posts">Articles &amp; blog posts</h3>
<div class="ulist">
<ul>
<li>
<p>StackOverflow - <a href="https://stackoverflow.com/questions/10438008">Different behaviours of treating \ (backslash) in the url by FireFox and Chrome</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>IETF.org - <a href="https://datatracker.ietf.org/doc/html/rfc3986">RFC 3986 - Uniform Resource Identifier (URI): Generic Syntax</a></p>
</li>
<li>
<p>IETF.org - <a href="https://datatracker.ietf.org/doc/html/rfc2396">RFC 2396 - Uniform Resource Identifiers (URI): Generic Syntax (OBSOLETE, replaced by RFC 3986)</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Replace '\' with '/'.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>The entire string which contains the '\' character(s).</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
</div>
</div>