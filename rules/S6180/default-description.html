<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>C&#43;&#43;20 introduces two standard attributes to indicate the likelihood of a branch: <code>[[likely]]</code> and <code>[[unlikely]]</code>.</p>
</div>
<div class="paragraph">
<p>These attributes replace the non-standard built-in <code>__builtin_expect</code> supported by Clang and GCC that was mostly used as part of <code>likely()</code> and <code>unlikely()</code> macros.</p>
</div>
<div class="paragraph">
<p>The standard annotations should always be preferred because they make the code portable and future-proof.</p>
</div>
<div class="paragraph">
<p>This rule reports the direct use of <code>__builtin_expect</code> built-in and its indirect use through <code>likely()</code> and <code>unlikely()</code> macros.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">if (likely(!v.empty())) { // Noncompliant
  std::cout &lt;&lt;v[0] &lt;&lt;'\n';
}

if (unlikely(nullptr == ptr)) { // Noncompliant
  std::cerr &lt;&lt;"Unexpected null pointer\n";
  exit(0);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">if (!v.empty()) [[likely]] {
  std::cout &lt;&lt;v[0] &lt;&lt;'\n';
}

if (nullptr == ptr) [[unlikely]] {
  std::cerr &lt;&lt;"Unexpected null pointer\n";
  exit(0);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>C&#43;&#43; reference - <a href="https://en.cppreference.com/w/cpp/language/attributes/likely">C&#43;&#43; attribute: likely, unlikely</a></p>
</li>
</ul>
</div>
</div>
</div>