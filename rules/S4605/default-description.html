<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring beans belonging to packages that are not included in a <code>@ComponentScan</code> configuration will not be accessible in the Spring Application Context. Therefore, it&#8217;s likely to be a configuration mistake that will be detected by this rule.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> the <code>@ComponentScan</code> is implicit in the <code>@SpringBootApplication</code> annotation, case in which Spring Boot will auto scan for components in the package containing the Spring Boot main class and its sub-packages.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.mycompany.app;

@Configuration
@ComponentScan("com.mycompany.app.beans")
public class Application {
...
}

package com.mycompany.app.web;

@Controller
public class MyController { // Noncompliant; MyController belong to "com.mycompany.app.web" while the ComponentScan is looking for beans in "com.mycompany.app.beans" package
...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.mycompany.app;

@Configuration
@ComponentScan({"com.mycompany.app.beans","com.mycompany.app.web"})
or
@ComponentScan("com.mycompany.app")
or
@ComponentScan
public class Application {
...
}

package com.mycompany.app.web;

@Controller
public class MyController { // "com.mycompany.app.web" is referenced by a @ComponentScan annotated class
...
}</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>XXX is not reachable by @ComponentScan or @SpringBootApplication. Either move it to a package configured in @ComponentScan or update your @ComponentScan configuration.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_11_jun_2018_153447_andrei_epure_wrote">on 11 Jun 2018, 15:34:47 Andrei Epure wrote:</h3>
<div class="paragraph">
<p><strong>Note:</strong> the <code>@ComponentScan</code> is implicit in the <code>@SpringBootApplication</code> annotation, case in which Spring Boot will auto scan for components in the package containing the <code>@SpringBoot</code> main class and its sub packages.</p>
</div>
<div class="paragraph">
<p><strong>Out of scope:</strong>  usage of filters to customize scanning, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@ComponentScan(basePackages = "org.example",
        includeFilters = @Filter(type = FilterType.REGEX, pattern = ".*Stub.*Repository"),
        excludeFilters = @Filter(Repository.class))</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_on_27_jun_2018_111604_andrei_epure_wrote">on 27 Jun 2018, 11:16:04 Andrei Epure wrote:</h3>
<div class="paragraph">
<p>This rule should never be in the Default Profile because:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it ignores XML <em>component-scan</em> configuration</p>
</li>
<li>
<p>it&#8217;s perfectly valid to have project A with a @Component class which is not actually consumed in project A. And then project B declares in a @ComponentScan configuration class the package from Project A, and consumes it as a dependency. Everything will work just fine, even if the code for project A is totally separate from the code from project B.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_on_14_mar_2021_181012_stéphane_nicoll_wrote">on 14 Mar 2021, 18:10:12 Stéphane Nicoll wrote:</h3>
<div class="paragraph">
<p>A more compliant solution would be to remove the <code>@ComponentScan</code> directive altogether and use <code>@SpringBootApplication</code>. This way <code>com.mycompany.app</code> is used. This also helps with slice tests where the appropriate filter will be configured automatically.</p>
</div>
</div>
</div>
</div>