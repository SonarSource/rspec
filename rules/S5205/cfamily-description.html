<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you want to receive a function as a parameter in a function definition, there are three ways to declare its parameter type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A function pointer:<br>
<code>void f(void (*callback)());</code></p>
</li>
<li>
<p>A typed-erased function wrapper such as <code>std::function</code>:<br>
<code>void f(std::function&lt;void()&gt; callback);</code></p>
</li>
<li>
<p>A template parameter:<br>
<code>template &lt;class Callback&gt; void f(Callback callback);</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using a function pointer is an inferior solution for the following reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Only a function pointer can be passed as an argument, while the other options offer the caller more flexibility because they can take more advanced functors, such as lambdas with some captured state</p>
</li>
<li>
<p>The syntax is obscure</p>
</li>
<li>
<p>It typically has worse performance than the template parameter solution.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a data-rspec-id="S5213" class="rspec-auto-link">S5213</a> for a discussion on choosing between <code>std::function</code> and a template parameter.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">using Criterion = bool (*)(DataPoint const&amp;);
void filter(DataSet&amp; data, Criterion criterion); // Noncompliant

using Callback = void (*)(EventInfo const&amp;);
class Button {
public:
  void addOnClick(Callback c) { // Noncompliant
    myOnClickHandler = c;
  }

private:
  Callback myOnClickHandler;
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">template &lt;class Criterion&gt; // Compliant, uses the more efficient template argument
void filter(DataSet&amp; data, Criterion criterion);

using Callback = std::function&lt;void(EventInfo const&amp;)&gt;;
class Button {
public:
  void addOnClick(Callback c) { // Compliant, uses the more flexible std::function
    myOnClickHandler = std::move(c);
  }

private:
  Callback myOnClickHandler;
};</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>C&#43;&#43; reference - <a href="https://en.cppreference.com/w/cpp/utility/functional/function"><code>std::function</code></a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_external_coding_guidelines">External coding guidelines</h3>
<div class="ulist">
<ul>
<li>
<p>C&#43;&#43; Core Guidelines - <a href="https://github.com/isocpp/CppCoreGuidelines/blob/e49158a/CppCoreGuidelines.md#t40-use-function-objects-to-pass-operations-to-algorithms">T.40: Use function objects to pass operations to algorithms</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S5213" class="rspec-auto-link">S5213</a> Template parameters should be preferred to "std::function" when configuring behavior at compile time</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Replace this function pointer with a template parameter or a "std::function"</p>
</div>
</div>
</div>
</div>