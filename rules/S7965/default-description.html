<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an issue when a method annotated with <code>@future</code> declares parameters that are sObjects (standard or custom) or custom Apex objects.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Future methods execute asynchronously when system resources become available, which means there can be a significant delay between when the method is called and when it actually runs.</p>
</div>
<div class="paragraph">
<p>If sObjects or custom objects were allowed as parameters, the data they contain could become stale by the time the future method executes. For example, if you pass an Account object to a future method, but that Account record gets updated in the database before the future method runs, the future method would be working with outdated information.</p>
</div>
<div class="paragraph">
<p>This could lead to data inconsistency issues where the future method overwrites newer changes with older values, potentially causing data loss or corruption.</p>
</div>
<div class="paragraph">
<p>The Apex compiler prevents this by only allowing primitive data types, collections of primitive data types, and arrays of primitive data types as future method parameters. These types don&#8217;t reference database records that could change over time.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>This will result in a compilation error, preventing the code from being deployed or executed. The application cannot function until the parameter types are corrected to use supported primitive types.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace sObject parameters with their corresponding Id values, then query for the current data within the future method.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">@future
public static void processAccount(Account acc) { // Noncompliant
    // Process account logic
    acc.Status__c = 'Processed';
    update acc;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">@future
public static void processAccount(Id accountId) {
    Account acc = [SELECT Id, Name, Status__c FROM Account WHERE Id = :accountId];
    // Process account logic
    acc.Status__c = 'Processed';
    update acc;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Future Methods - Salesforce Developer Guide - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_invoking_future_methods.htm">Official Salesforce documentation on future methods and their parameter restrictions</a></p>
</li>
<li>
<p>Asynchronous Apex - Future Methods - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_classes_future_methods.htm">Detailed guide on implementing future methods with proper parameter handling</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>Salesforce Apex Language Reference - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexref.meta/apexref/">Official language specification for Apex including future method constraints</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>