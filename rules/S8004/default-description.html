<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when HTTP callouts in Apex code lack proper error handling, including missing try-catch blocks, no status code validation, or absent error logging.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HTTP callouts are inherently unreliable operations that can fail for various reasons including network issues, service unavailability, timeouts, or invalid responses. Without proper error handling, applications may process invalid responses as successful operations, fail silently making debugging difficult, or crash unexpectedly.</p>
</div>
<div class="paragraph">
<p>When making HTTP callouts, several types of failures can occur:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Network failures</strong>: Connection timeouts, DNS resolution failures, or network connectivity issues</p>
</li>
<li>
<p><strong>Service errors</strong>: The external service returns error status codes (4xx, 5xx)</p>
</li>
<li>
<p><strong>Invalid responses</strong>: Malformed JSON, unexpected data formats, or empty responses</p>
</li>
<li>
<p><strong>Platform exceptions</strong>: CalloutException thrown by the Salesforce platform</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Without comprehensive error handling, these failures can lead to data inconsistencies, poor user experience, and difficult-to-diagnose integration issues. The application may continue processing as if the callout succeeded, leading to incomplete or incorrect business logic execution.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Applications may process invalid responses as successful operations, leading to data inconsistencies and incorrect business logic execution. Silent failures make it extremely difficult to diagnose integration issues, potentially causing prolonged service disruptions. Users may experience unexpected application behavior or crashes when external services are unavailable.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Wrap HTTP callouts in try-catch blocks, validate response status codes, and implement proper error logging. Always check the HTTP status code before processing the response body.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">public class ApiIntegration {
    public static String makeCallout() {
        Http http = new Http();
        HttpRequest request = new HttpRequest();
        request.setEndpoint('https://api.example.com/data');
        request.setMethod('GET');
        HttpResponse response = http.send(request); // Noncompliant
        return response.getBody(); // No error handling
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">public class ApiIntegration {
    public static String makeCallout() {
        try {
            Http http = new Http();
            HttpRequest request = new HttpRequest();
            request.setEndpoint('https://api.example.com/data');
            request.setMethod('GET');
            HttpResponse response = http.send(request);

            if (response.getStatusCode() == 200) {
                return response.getBody();
            } else {
                System.debug('API call failed with status: ' + response.getStatusCode());
                throw new CalloutException('External service returned error: ' + response.getStatus());
            }
        } catch (CalloutException e) {
            System.debug('Callout failed: ' + e.getMessage());
            throw e;
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Apex HTTP Classes - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexref.meta/apexref/apex_classes_restful_http.htm">Official Salesforce documentation for HTTP classes and callout methods</a></p>
</li>
<li>
<p>Invoking Callouts Using Apex - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_callouts.htm">Comprehensive guide on making HTTP callouts in Apex with best practices</a></p>
</li>
<li>
<p>Exception Handling in Apex - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_exception_definition.htm">Documentation on exception handling patterns and best practices in Apex</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-754: Improper Check for Unusual or Exceptional Conditions - <a href="https://cwe.mitre.org/data/definitions/754.html">Addresses the security implications of not properly handling exceptional conditions</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>