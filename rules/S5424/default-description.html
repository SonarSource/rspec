<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are three ways to initialize a non-static data member in a class:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>With an in-class initializer</p>
</li>
<li>
<p>In the initialization list of a constructor</p>
</li>
<li>
<p>In the constructor body</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You should use those methods in that order of preference. When applicable, in-class initializers are best, because they apply automatically to all constructors of the class (except for default copy/move constructors and constructors where an explicit initialization for this member is provided). But they can only be used for initialization with constant values.</p>
</div>
<div class="paragraph">
<p>If your member value depends on a parameter, you can initialize it in the constructor&#8217;s initialization list. If the initialization is complex, you can define a function to compute the value, and use this function in the initializer list.</p>
</div>
<div class="paragraph">
<p>Initialization in the constructor body has several issues. First, it&#8217;s not an initialization, but an assignment. Which means it will not work with all data types (const-qualified members, members of reference type, member of a type without default constructor&#8230;&#8203;). And even if it works, the member will first be initialized, then assigned to, which means useless operations will take place. To prevent "use-before-set" errors, it&#8217;s better to immediately initialize the member with its real value.</p>
</div>
<div class="paragraph">
<p>It&#8217;s hard to find a good example where setting the value of a member in the constructor would be appropriate. One case might be when you assign to several data members in one operation. As a consequence constructor bodies are empty in many situations.</p>
</div>
<div class="paragraph">
<p>This rules raises an issue in two conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When you assign a value to a member variable in the body of a constructor.</p>
</li>
<li>
<p>When you initialize a member variable in the initializer list of a constructor, but could have done so directly in the class:</p>
<div class="ulist">
<ul>
<li>
<p>The initial value does not depend on a constructor parameter</p>
</li>
<li>
<p>The variable has either no in-class initializer, or an in-class initializer with the same value as in the constructor</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class S {
  int i1;
  int i2;
  int i3;
public:
  S( int halfValue, int i2 = 0) : i2(i2), i3(42) { // Noncompliant for i1 and i3, compliant for i2
    this-&gt;i1 = 2*halfValue;
  }
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class S {
  int i1;
  int i2;
  int i3 = 42; // In-class initializer
public:
  S( int halfValue, int i2 = 0 ) : i1(2*halfValue), i2(i2) {} // Compliant
};</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>C++ Core Guidelines - <a href="https://github.com/isocpp/CppCoreGuidelines/blob/e49158a/CppCoreGuidelines.md#c48-prefer-in-class-initializers-to-member-initializers-in-constructors-for-constant-initializers">C.48: Prefer in-class initializers to member initializers in constructors for constant initializers</a></p>
</li>
<li>
<p>C++ Core Guidelines - <a href="https://github.com/isocpp/CppCoreGuidelines/blob/e49158a/CppCoreGuidelines.md#c49-prefer-initialization-to-assignment-in-constructors">C.49: Prefer initialization to assignment in constructors</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_duplicates_s3230">duplicates: <a data-rspec-id="S3230" class="rspec-auto-link">S3230</a></h3>

</div>
<div class="sect2">
<h3 id="_on_2_sep_2019_221524_loïc_joly_wrote">on 2 Sep 2019, 22:15:24 Loïc Joly wrote:</h3>
<div class="paragraph">
<p>\[~geoffray.adde]: Can you please review my changes?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_23_sep_2019_112025_geoffray_adde_wrote">on 23 Sep 2019, 11:20:25 Geoffray Adde wrote:</h3>
<div class="paragraph">
<p>As discussed, all fine by me.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_4_oct_2019_130909_geoffray_adde_wrote">on 4 Oct 2019, 13:09:09 Geoffray Adde wrote:</h3>
<div class="paragraph">
<p>moved to previously existing <a data-rspec-id="S3230" class="rspec-auto-link">RSPEC-3230</a></p>
</div>
</div>
</div>
</div>