<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Comparing two values of different types with operator <code>===</code> or <code>!==</code> will always return respectively <code>true</code> and <code>false</code>. The same is true for operators <code>==</code> and <code>!=</code> when two <code>objects</code> of unrelated types, i.e. one is not a prototype of the other, are compared.</p>
</div>
<div class="paragraph">
<p>Chai provides assertion functions which use these operators to compare two values. These assertions should not compare values of incompatible types as they would always fail or always succeed.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const assert = require('chai').assert;
const expect = require('chai').expect;
const should = require('chai').should();

describe("invalid comparisons", function() {

    it("uses chai 'assert'", function() {
        const str = "1";
        const today = new Date();
        const nb = new Number(42);

        // These assertions use non-strict equality. Only unrelated "object" types are considered.
        assert.equal(today, nb);  // Noncompliant. This always fails.
        assert.notEqual(today, nb);  // Noncompliant. This always succeeds.

        // These assertions use strict equality. Unrelated "object" types and primitive types are considered.
        assert.strictEqual(str, 1);  // Noncompliant. This always fails.
        assert.notStrictEqual(str, 1);  // Noncompliant. This always succeeds.

        // Comparing primitive types to objects with == or != is ok
        // even if it is not recommended. Using strict equality is better.
        assert.equal(str, [1]);  // Ok
        assert.notEqual(str, [0]);  // Ok
    });

    it("uses chai 'expect' and 'should'", function() {
        const str = "1";
        // These assertions use strict equality
        expect(str).to.equal(1);  // Noncompliant. This always fails.
        expect(str).to.not.equal(1);  // Noncompliant. This always succeeds.

        str.should.equal(1);  // Noncompliant. This always fails.
        str.should.not.equal(1);  // Noncompliant. This always succeeds.
    });
});</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Equality">MDN webdoc - Equality</a></p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Strict_equality">MDN webdoc - Strict Equality</a></p>
</li>
<li>
<p><a data-rspec-id="S2159" class="rspec-auto-link">S2159</a> Silly equality checks should not be made</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Primary: Change this assertion to not compare dissimilar types ("XXX" and "YYY").</p>
</div>
<div class="paragraph">
<p>Secondary: Last assignment of "ZZZ".</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>Primary: the called assertion function with its arguments.</p>
</div>
<div class="paragraph">
<p>Secondaries (if args are variables): the last assignment of the variable.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s2159">relates to: <a data-rspec-id="S2159" class="rspec-auto-link">S2159</a></h3>

</div>
</div>
</div>