<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when <code>require</code> statements are placed inside methods, classes, or other code blocks instead of at the top level of the file.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When <code>require</code> statements are scattered throughout your code, it becomes difficult to understand what dependencies a file needs at a glance. This creates several problems:</p>
</div>
<div class="paragraph">
<p>First, it hurts readability. Other developers (including your future self) have to scan through the entire file to understand what libraries and modules are being used. This makes code review and maintenance more time-consuming.</p>
</div>
<div class="paragraph">
<p>Second, it can lead to performance issues. Ruby&#8217;s <code>require</code> method loads and executes files, which takes time. When requires are placed inside methods that might be called multiple times, you risk loading the same library repeatedly, even though Ruby&#8217;s require mechanism prevents duplicate loading.</p>
</div>
<div class="paragraph">
<p>Third, it makes dependency management harder. Build tools, bundlers, and static analysis tools often look for require statements at the top of files to understand project dependencies. Scattered requires can be missed by these tools.</p>
</div>
<div class="paragraph">
<p>Finally, it goes against Ruby community conventions. The Ruby style guide and most Ruby projects follow the practice of placing all requires at the top of files, making your code inconsistent with established patterns.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Scattered require statements reduce code maintainability and readability. They make it harder for developers to understand file dependencies, can impact performance when requires are placed in frequently-called methods, and may cause issues with dependency analysis tools.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Move all require statements to the top of the file, before any class or module definitions. Group them logically and sort them alphabetically for better organization.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class ApiClient
  def initialize
    # Class implementation
  end

  def fetch_data
    require 'net/http'  # Noncompliant
    response = Net::HTTP.get(URI('https://api.example.com/data'))

    require 'json'  # Noncompliant
    JSON.parse(response)
  end

  def process_ssl
    require 'openssl'  # Noncompliant
    # SSL processing logic
  end
end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># All requires at the top of the file
require 'json'
require 'net/http'
require 'openssl'

class ApiClient
  def initialize
    # Class implementation
  end

  def fetch_data
    response = Net::HTTP.get(URI('https://api.example.com/data'))
    JSON.parse(response)
  end

  def process_ssl
    # SSL processing logic
  end
end</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Ruby Documentation - Kernel#require - <a href="https://ruby-doc.org/core/Kernel.html#method-i-require">Official documentation for Ruby&#8217;s require method</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>