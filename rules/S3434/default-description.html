<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Shadowing parent class members by creating properties and methods with the same signatures as non-<code>virtual</code> parent class members can result in seemingly strange behavior if an instance of the child class is cast to the parent class. In such cases, the parent class' code will be executed instead of the code in the child class, confusing callers and potentially causing hard-to-find bugs.</p>
</div>
<div class="paragraph">
<p>Instead the child class member should be renamed.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">public class Fruit
{
  public double GetCost()
  {
    return 3.5;
  }
}

public class Raspberry : Fruit
{
  public new double GetCost()  // Noncompliant
  {
    return 7.5;
  }
}

// ...
var r = new Raspberry();
var f = (Fruit) r;
Console.WriteLine(r.GetCost());  // prints 7.5
Console.WriteLine(f.GetCost());  // prints 3.5; there's only one instance but different code executes depending on cast</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">public class Fruit
{
  public double GetCost()
  {
    return 3.5;
  }
}

public class Raspberry : Fruit
{
  public double GetInflatedCost()
  {
    return 7.5;
  }
}

// ...
var r = new Raspberry();
var f = (Fruit) r;
Console.WriteLine(r.GetCost());  // prints 3.5
Console.WriteLine(f.GetCost());  // prints 3.5; same code executes every time
Console.WriteLine(r.GetInflatedCost()); // prints 7.5</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>This rule ignores <code>private</code> parent class members, and any method named <code>Equals</code>.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Rename this member so it doesn&#8217;t shadow the member with the same name in the parent class.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>Member name</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_related_to_s2387">is related to: <a data-rspec-id="S2387" class="rspec-auto-link">S2387</a></h3>

</div>
<div class="sect2">
<h3 id="_is_related_to_s4015">is related to: <a data-rspec-id="S4015" class="rspec-auto-link">S4015</a></h3>

</div>
<div class="sect2">
<h3 id="_on_2_dec_2015_144102_tamas_vajk_wrote">on 2 Dec 2015, 14:41:02 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I&#8217;ve created this RSPEC based on our discussion. Could you please go through it?</p>
</div>
<div class="paragraph">
<p>cc [~nicolas.peru], I&#8217;ve created a Java subtask too. You should definitely double-check my Java code.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_2_dec_2015_162541_ann_campbell_wrote">on 2 Dec 2015, 16:25:41 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~tamas.vajk] I think the message is a little too &#8230;&#8203; "soft". I.E. "Consider&#8230;&#8203;" versus "Rename&#8230;&#8203;".</p>
</div>
<div class="paragraph">
<p>I&#8217;ve also made a few edits to the Java description. (cc [~nicolas.peru])</p>
</div>
<div class="paragraph">
<p>Otherwise looks good.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_2_dec_2015_163401_ann_campbell_wrote">on 2 Dec 2015, 16:34:01 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>I took another look and made a minor description edit [~tamas.vajk]</p>
</div>
</div>
</div>
</div>