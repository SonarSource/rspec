<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>malloc</code>, <code>realloc</code>, <code>calloc</code> and <code>free</code> routines are used to dynamically allocate memory in the heap. But, in contrast to the <code>new</code> and <code>delete</code> operators introduced in C&#43;&#43;, they allocate raw memory, which is not type-safe, and they do not correctly invoke object constructors. Additionally, mixing them with <code>new</code>/<code>delete</code> results in undefined behavior.</p>
</div>
<div class="paragraph">
<p>Note that directly replacing those functions with <code>new</code>/<code>delete</code> is usually not a good idea (see <a data-rspec-id="S5025" class="rspec-auto-link">S5025</a>).</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">string* pStringArray1 = static_cast&lt;string*&gt;(malloc(10 * sizeof(string))); // Noncompliant
Person *p = (Person*)malloc(sizeof(Person)); // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">std::array&lt;string, 10&gt; stringArray1 ; // Compliant, use std::vector instead if the size is dynamic
auto p1 = new Person("Bjarne"); // Compliant, but don't do that, prefer the version on next line
auto p2 = std::make_unique&lt;Person&gt;("Bjarne"); // Compliant</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>C++ Core Guidelines - <a href="https://github.com/isocpp/CppCoreGuidelines/blob/e49158a/CppCoreGuidelines.md#r10-avoid-malloc-and-free">R.10: Avoid <code>malloc()</code> and <code>free()</code></a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Remove this use of "XXX".</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_6_sep_2013_141109_freddy_mallet_wrote">on 6 Sep 2013, 14:11:09 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>See http://stackoverflow.com/questions/240212/what-is-the-difference-between-new-delete-and-malloc-free</p>
</div>
</div>
</div>
</div>