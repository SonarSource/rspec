<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In C#, the <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/statements#13106-the-throw-statement">throw</a> statement can be used in two different ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>by specifying an expression</p>
</li>
<li>
<p>without specifying an expression</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_by_specifying_an_expression">By specifying an expression</h3>
<div class="paragraph">
<p>In the software development context, an expression is a value or anything that executes and ends up being a value. The expression shall be implicitly convertible to <code>System.Exception</code>, and the result of evaluating the expression is converted to <code>System.Exception</code> before being thrown.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">try
{
}
catch(Exception exception)
{
  // code that uses the exception
  throw exception; // The exception stack trace is cleared up to this point.
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the <a href="https://en.wikipedia.org/wiki/Stack_trace">stack trace</a>, will be cleared, losing the list of method calls between the original method that threw the exception and the current method.</p>
</div>
</div>
<div class="sect2">
<h3 id="_without_specifying_an_expression">Without specifying an expression</h3>
<div class="paragraph">
<p>This syntax is supported only in a <code>catch</code> block, in which case, that statement re-throws the exception currently being handled by that <code>catch</code> block, preserving the stack trace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">try
{
}
catch(Exception exception)
{
  // code that uses the exception
  throw; // The stack trace of the initial exception is preserved.
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>It is allowed using the thrown <code>exception</code> as an argument and wrapping it in another <code>exception</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">try
{
}
catch(Exception exception)
{
  throw new Exception("Additional information", exception);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The recommended way to re-throw an exception is to use the throw statement without including an expression. This ensures that all call stack information is preserved when the exception is propagated to the caller, making debugging easier.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">try
{
}
catch(Exception exception)
{
  throw exception;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">try
{
}
catch(Exception)
{
  throw;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.exception#re-throwing-an-exception">Re-throwing an exception</a></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/statements#13106-the-throw-statement">The throw statement</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Stack_trace">stack trace</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Use "throw;" instead of "throw xxx;" to preserve the stack trace.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>The whole "throw exc;" statement</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_8_dec_2015_091418_tamas_vajk_wrote">on 8 Dec 2015, 09:14:18 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] LGTM</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_26_jul_2016_175015_tamas_vajk_wrote">on 26 Jul 2016, 17:50:15 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I don&#8217;t think this is a bug.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_27_jul_2016_133000_freddy_mallet_wrote">on 27 Jul 2016, 13:30:00 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>Agreed [~tamas.vajk] and this is the limit of the usage of this "Bug" issue type because this is really a "Reliability" issue that might prevent someone in production to understand an unexpected behavior as the root cause of the issue is lost. That&#8217;s why we&#8217;re classifying this issue as a bug. cc [~ann.campbell.2]</p>
</div>
</div>
</div>
</div>