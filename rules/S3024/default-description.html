<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The use of a <code>StringBuilder</code> or <code>StringBuffer</code> makes <code>String</code> assembly more efficient than plain concatenation when you perform a large number of appends.
Using <code>String</code> concatenation within <code>StringBuilder.append</code> defeats the purpose of the <code>StringBuilder</code>.
If you concatenate only a few strings, use direct <code>String</code> concatenation.
Otherwise, replace <code>String</code> concatenation with calls to <code>append</code>.</p>
</div>
<div class="paragraph">
<p>This rule applies to String concatenations performed repeatedly, inside loops. In such scenarios, the performance penalty associated with inefficient StringBuilder.append usage can multiply significantly.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">StringBuilder sb = new StringBuilder();
for (String name : names) {
  sb.append("Hello : " + name); // Noncompliant
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">StringBuilder sb = new StringBuilder();
for (String name : names) {
  sb.append("Hello : ").append(name);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_benchmarks">Benchmarks</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Runtime</th>
<th class="tableblock halign-left valign-top">Average time</th>
<th class="tableblock halign-left valign-top">Error margin</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">append</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14.26 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±0.50 ns/op</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">concat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">17.77 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±0.66 ns/op</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">concatWithinBuilder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">31.42 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±1.80 ns/op</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The results were generated by running the following snippet with <a href="https://github.com/openjdk/jmh">jmh</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">private String name1 = "John";
private String name2 = "Jane";

@Benchmark
public String concat() {
  return name1 + ", " + name2;
}

@Benchmark
public String concatWithinBuilder() {
  return new StringBuilder()
    .append(name1 + ", " + name2)
    .toString();
}

@Benchmark
public String append() {
  return new StringBuilder()
    .append(name1)
    .append(", ")
    .append(name2)
    .toString();
}</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>"append" each concatenated value separately.</p>
</div>
</div>
</div>
</div>