<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a function has several consecutive parameters of the same type, there is a risk that the arguments are not provided in the right order. Moreover, it is generally the sign of code which is too low-level. Maybe</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the arguments should have a stronger type</p>
</li>
<li>
<p>some arguments could be grouped together to form a higher level abstraction.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The use of two parameters of the same type is useful in situations like comparing arguments, combining arguments through a binary operation and swapping arguments but three or more arguments of the same type is considered bad practice.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when a function is defined with more than two consecutive parameters of the same type. For this rule, only the "raw" type of the parameter will be considered (a <code>string const &amp;</code> will be considered the same type as a <code>std::string</code>).</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">double acceleration(double initialSpeed, double finalSpeed, double deltaT) { // Noncompliant
  return (finalSpeed - initialSpeed) / deltaT;
}
double dot_product(double x1, double y1, double x2, double y2); // Noncompliant

void f() {
  double x1,x2,y1,y2;
  auto result = dot_product(x1,x2,y1,y2);// The order is wrong, even if it might look logical
  auto acc = acceleration(10, 50, 110); // Very unclear, probably a bug...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">// This code assumes the use of a strong type / units library
Acceleration acceleration(Speed initialSpeed, Speed finalSpeed, Duration deltaT){
  return (finalSpeed - initialSpeed) / deltaT;
}

struct point {
  double x;
  double y;
};

double dot_product(point p1, point p2);

double f() {
  point p1,p2;
  auto result = dot_product(p1,p2);
  auto acc = acceleration(50 * km / hour, 110 * km / hour, 10s);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>C++ Core Guidelines - <a href="https://github.com/isocpp/CppCoreGuidelines/blob/e49158a/CppCoreGuidelines.md#i4-make-interfaces-precisely-and-strongly-typed">I.4: Make interfaces precisely and strongly typed</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Rewrite the function arguments to make its use less error-prone.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_30_aug_2019_115125_loïc_joly_wrote">on 30 Aug 2019, 11:51:25 Loïc Joly wrote:</h3>
<div class="paragraph">
<p>\[~geoffray.adde]: Could you please review my changes?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_30_aug_2019_180936_nicolas_harraudeau_wrote">on 30 Aug 2019, 18:09:36 Nicolas Harraudeau wrote:</h3>
<div class="paragraph">
<p>\[~loic.joly] The Noncompliant part seems to be on the wrong lines. Shouldn&#8217;t it raise on the function signature rather than the call?</p>
</div>
<div class="paragraph">
<p>It seems to me that such a rule would raise many false positives. Ex: a function comparing two objects of the same type, merging them or doing something similar.</p>
</div>
<div class="paragraph">
<p>It would also encourage developers to reorder their arguments just to not raise an issue.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_30_aug_2019_221937_loïc_joly_wrote">on 30 Aug 2019, 22:19:37 Loïc Joly wrote:</h3>
<div class="paragraph">
<p>\[~nicolas.harraudeau]:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Changed the position of noncompliant</p>
</li>
<li>
<p>Two objects of the same type are ok, it is only triggered with 3 objects.</p>
</li>
<li>
<p>Reordering would be a way to silence the issue, but for me, it would probably be an inferior solution most of the time. And I&#8217;m afraid that if we explicitly mention it, it might lead some developers to laziness (sweeping things under the rug), this is why I removed it from the first specification. I&#8217;m even wondering about removing the "consecutive" part of this rule&#8230;&#8203; If you have a good example where reordering would lead to good code, let me know.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_on_9_sep_2019_200359_ann_campbell_wrote">on 9 Sep 2019, 20:03:59 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~geoffray.adde] &amp; [~loic.joly] it&#8217;s not clear to me why 3 params of the same type is bad but 2 is okay.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_sep_2019_092740_loïc_joly_wrote">on 10 Sep 2019, 09:27:40 Loïc Joly wrote:</h3>
<div class="paragraph">
<p>There are many functions for which 2 arguments of the same type are useful. For instance copying data from a source to a destination, or combining two elements into a third one (for instance, finding the GCD of 2 numbers). We felt that signaling those would raise far too many issues.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_sep_2019_131835_ann_campbell_wrote">on 10 Sep 2019, 13:18:35 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>IMO you should add that to the description [~loic.joly]. Currently it seems totally arbitrary.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_oct_2019_161939_geoffray_adde_wrote">on 10 Oct 2019, 16:19:39 Geoffray Adde wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2], I justified the part about 3 arguments.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_11_oct_2019_141535_ann_campbell_wrote">on 11 Oct 2019, 14:15:35 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~geoffray.adde], [~loic.joly] I&#8217;ve done a little additional wordsmithing. See what you think</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_14_oct_2019_100016_geoffray_adde_wrote">on 14 Oct 2019, 10:00:16 Geoffray Adde wrote:</h3>
<div class="paragraph">
<p>Fine by me</p>
</div>
</div>
</div>
</div>