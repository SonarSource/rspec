This rule raises an issue when `return`, `break`, or `continue` statements are used in a way that exits a `finally` block.

== Why is this an issue?

Using `return`, `break`, or `continue` statements that exit a `finally` block can lead to confusing control flow and unexpected behavior. When these statements exit a `finally` block, they can mask exceptions that were raised in the corresponding `try` or `except` blocks, making debugging difficult.

Starting with Python 3.14, this pattern emits a `SyntaxWarning` as specified in PEP 765, indicating that this usage is discouraged and may become a syntax error in future Python versions. The `finally` block is intended for cleanup code that should always execute, regardless of how the `try` block exits. When control flow statements exit the `finally` block, they can interfere with this guarantee.

Additionally, this pattern can make code harder to understand and maintain, as the actual exit point becomes unclear when reading the code.

=== What is the potential impact?

Using control flow statements that exit `finally` blocks can lead to:

* **Exception masking**: Exceptions raised in `try` or `except` blocks may be suppressed unexpectedly
* **Debugging difficulties**: The actual cause of issues may be hidden when exceptions are masked
* **Future compatibility issues**: Code may break in future Python versions when this becomes a syntax error
* **Reduced code maintainability**: Control flow becomes harder to follow and understand
* **Unexpected behavior**: The program may not behave as intended when exceptions occur

=== How to fix?


Move the return statement outside the finally block and use a variable to store the return value if needed.

==== Non-compliant code example

[source,python,diff-id=1,diff-type=noncompliant]
----
def risky_function():
    try:
        do_something()
    finally:
        cleanup()
        return "done"  # Noncompliant
----

==== Compliant code example

[source,python,diff-id=1,diff-type=compliant]
----
def safe_function():
    result = None
    try:
        do_something()
        result = "done"
    finally:
        cleanup()
    return result
----

=== Documentation

 * PEP 765 - Disallow return/break/continue that exit a finally block - https://peps.python.org/pep-0765/[The Python Enhancement Proposal that specifies this change]
 * Python 3.14 What's New - PEP 765 - https://docs.python.org/3.14/whatsnew/3.14.html#pep-765-disallow-return-break-continue-that-exit-a-finally-block[Documentation of the SyntaxWarning introduced in Python 3.14]
 * Python try statement documentation - https://docs.python.org/3/reference/compound_stmts.html#the-try-statement[Official documentation for try statements and finally blocks]

=== Standards

 * PEP 765 - https://peps.python.org/pep-0765/[Python Enhancement Proposal defining the deprecation of control flow statements exiting finally blocks]

