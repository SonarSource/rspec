<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when <code>getErrors()</code> is called on an SObject and the returned list size is immediately checked, instead of first using <code>hasErrors()</code> to determine if errors exist.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When working with SObject error handling, calling <code>getErrors()</code> and then checking the size of the returned list is less readable than first checking if errors exist using <code>hasErrors()</code>.</p>
</div>
<div class="paragraph">
<p>The <code>hasErrors()</code> method was introduced in Winter '21 specifically to provide a clean way to check if an SObject has any errors before retrieving them. This approach offers several benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Improved readability</strong>: The intent is clearer when you first check <code>hasErrors()</code> before accessing the actual errors</p>
</li>
<li>
<p><strong>Better performance</strong>: Avoiding the creation and size check of potentially empty lists</p>
</li>
<li>
<p><strong>Consistent pattern</strong>: Following the established pattern of checking existence before accessing collections</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you call <code>getErrors()</code> directly and then check <code>errors.size() &gt; 0</code>, you&#8217;re essentially doing what <code>hasErrors()</code> already does, but in a more verbose way.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>This issue has minimal impact on functionality but affects code readability and maintainability. Using the recommended pattern makes the code more expressive and follows Salesforce best practices for error handling.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use <code>hasErrors()</code> to check if errors exist before calling <code>getErrors()</code> to retrieve them. This makes the code more readable and follows the intended usage pattern.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">Account a = new Account();
List&lt;Database.Error&gt; errors = a.getErrors(); // Noncompliant
if (errors.size() &gt; 0) {
    // Process errors
    for (Database.Error error : errors) {
        System.debug(error.getMessage());
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">Account a = new Account();
if (a.hasErrors()) {
    List&lt;Database.Error&gt; errors = a.getErrors();
    // Process errors
    for (Database.Error error : errors) {
        System.debug(error.getMessage());
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>SObject Methods - hasErrors() - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexref.meta/apexref/apex_methods_system_sobject.htm#apex_System_SObject_hasErrors">Official Salesforce documentation for the hasErrors() method</a></p>
</li>
<li>
<p>SObject Methods - getErrors() - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexref.meta/apexref/apex_methods_system_sobject.htm#apex_System_SObject_getErrors">Official Salesforce documentation for the getErrors() method</a></p>
</li>
<li>
<p>Apex Testing with SObject Error Methods - <a href="https://www.apexhours.com/improve-apex-testing-with-new-sobject-error-methods">Guide on using the new SObject error methods introduced in Winter '21</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>