<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is inefficient to build a <code>String</code> from a <code>StringBuilder</code> or <code>StringBuffer</code> just to check if it&#8217;s empty. Instead, directly use the <code>.isEmpty</code> method.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">StringBuilder sb = new StringBuilder();
// ...
if ("".equals(sb.toString()) { // Noncompliant
  // ...
}
if (sb.toString().isEmpty()) { // Noncompliant
  // ...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">StringBuilder sb = new StringBuilder();
// ...
if (sb.isEmpty()) {
  // ...
}
if (sb.isEmpty()) {
  // ...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_benchmarks">Benchmarks</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">stringBuilderSize</th>
<th class="tableblock halign-left valign-top">Runtime</th>
<th class="tableblock halign-left valign-top">Average time</th>
<th class="tableblock halign-left valign-top">Error margin</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">isEmpty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.57 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±0.38 ns/op</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">isEmpty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.68 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±0.10 ns/op</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">isEmpty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.80 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±0.12 ns/op</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.83 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±0.12 ns/op</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.66 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±0.11 ns/op</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.67 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±0.07 ns/op</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">toStringEquals</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">13.92 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±0.18 ns/op</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">toStringEquals</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">59.09 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±0.53 ns/op</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">toStringEquals</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">465.79 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±5.86 ns/op</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">toStringIsEmpty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">13.83 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±0.23 ns/op</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">toStringIsEmpty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60.06 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±3.42 ns/op</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">toStringIsEmpty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temurin 21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">484.58 ns/op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±4.24 ns/op</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Benchmarking code</strong></p>
</div>
<div class="paragraph">
<p>The results were generated by running the following snippet with <a href="https://github.com/openjdk/jmh">JMH</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Param({"10", "100", "1000"})
int stringBuilderSize;


private StringBuilder sb;

@Setup(Level.Iteration)
public void setup() {
  sb = new StringBuilder();
  IntStream.range(0, stringBuilderSize).forEach(i -&gt; sb.append("word"));
}

@Benchmark
public StringBuilder toStringEquals() {
  if ("".equals((sb.toString()))) {
    return sb;
  }
  return new StringBuilder();
}

@Benchmark
public StringBuilder toStringIsEmpty() {
  if (sb.toString().isEmpty()) {
    return sb;
  }
  return new StringBuilder();
}

@Benchmark
public StringBuilder length() {
  if (sb.length() == 0) {
    return sb;
  }
  return new StringBuilder();
}

@Benchmark
public StringBuilder isEmpty() {
  if (sb.isEmpty()) {
    return sb;
  }
  return new StringBuilder();
}</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Test "xxx.length()" against 0 to see if "xxx" is empty.</p>
</div>
</div>
</div>
</div>