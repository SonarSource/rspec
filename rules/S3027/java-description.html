<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An <code>indexOf</code> or <code>lastIndexOf</code> call with a single letter <code>String</code> can be made more performant by switching to a call with a <code>char</code> argument.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String myStr = "Hello World";
// ...
int pos = myStr.indexOf("W");  // Noncompliant
// ...
int otherPos = myStr.lastIndexOf("r"); // Noncompliant
// ...</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String myStr = "Hello World";
// ...
int pos = myStr.indexOf('W');
// ...
int otherPos = myStr.lastIndexOf('r');
// ...</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>Put single-quotes around 'x' to use the faster "indexOf(char)" method.</p>
</li>
<li>
<p>Put single-quotes around 'x' to use the faster "lastIndexOf(char)" method.</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_18_mar_2016_104621_michael_gumowski_wrote">on 18 Mar 2016, 10:46:21 Michael Gumowski wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I removed the reference to <code>pmd:SimplifyStartsWith</code> and updated the RSPEC to only target <code>indexOf</code>/<code>lastIndexOf</code>, as replacing <code>str.startWith("c")</code> by <code>!str.isEmpty &amp;&amp; str.charAt(0) == 'c'</code> is really controversial (3 operations instead of 1? proof of efficiency should be done). Note that I didn&#8217;t created a new RSPEC to cover that newly unmapped pmd rule. Similarly, the CodePro mapping is not valid anymore.</p>
</div>
<div class="paragraph">
<p>The part regarding <code>indexOf</code> is however still pretty valid and should be activated by default.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_6_may_2020_104750_johann_beleites_wrote">on 6 May 2020, 10:47:50 Johann Beleites wrote:</h3>
<div class="paragraph">
<p>It seems as though this rule is not relevant (anymore). It is hard to find evidence that supports indexOf(char) being faster than indexOf(String). On the contrary, in current Java versions, you can collect evidence that points to the opposite being true. In either case, performance differences are not huge. In any case, it does not generally seem better to use the char instead of the String version of indexOf. Hence, I have deprecated this rule (see SONARJAVA-3339).</p>
</div>
</div>
</div>
</div>