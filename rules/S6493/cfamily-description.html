<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>std::make_format_args</code> and <code>std::make_wformat_args</code> return objects containing an array of formatting arguments that can be implicitly converted to <code>std::basic_format_args</code>. The type of the returned object cannot be spelled; it can only be accessed through <code>auto</code>.</p>
</div>
<div class="paragraph">
<p>A formatting argument has reference semantics for non-built-in types and does not extend the lifetime of the passed arguments.
It is your responsibility to ensure that the arguments to <code>std::make_format_args</code> and <code>std::make_wformat_args</code> outlive their return value. Specifically, be aware that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Assigning the result of <code>std::make_format_args</code> to a variable of type <code>std::basic_format_args</code> will always dangle.</p>
</li>
<li>
<p>Assigning the result of <code>std::make_format_args</code> to a variable of type <code>auto</code> will dangle when the formatting arguments contain an rvalue of a non-built-in type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While it is possible to assign <code>std::make_format_args</code> to a variable declared with <code>auto</code> if all the formatting arguments
are built-in types or lvalues, it is suspicious and error-prone. That is why we recommend that the result of
<code>std::make_format_args</code> is only used as an argument for formatting functions.</p>
</div>
<div class="paragraph">
<p>This rule detects when the result of <code>std::make_format_args</code> or <code>std::make_wformat_args</code> isn&#8217;t used as an argument.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pass the result of <code>std::make_format_args</code> or <code>std::make_wformat_args</code> directly as an argument.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">void helloAndGoodByeReality() {
  // Noncompliant, dangles
  std::format_args numberOfHellosAndGoodByes = std::make_format_args(1000, 1);
  std::cout &lt;&lt; vformat("Hello {0} times, and goodbyes {1} times :(\n", numberOfHellosAndGoodByes);
}

void helloAndGoodByeExpectation() {
  // Noncompliant, error-prone but doesn't dangle due to built-in types
  auto numberOfHellosAndGoodByes = std::make_format_args(1000, 1000000);
  std::cout &lt;&lt; vformat("Hello {0} times, and goodbyes {1} times :)\n", numberOfHellosAndGoodByes);
}

std::string getHellosForRemote() {
  return "zero";
}

std::string getGoodbyesForRemote() {
  return "zero";
}
void helloAndGoodByeForRemote() {
  // Noncompliant, dangles; getHellosForRemote() is an rvalue of non-built-in type std::string
  auto numberOfHelloAndGoodBye = std::make_format_args(getHellosForRemote(), getGoodbyesForRemote());
  std::cout &lt;&lt; vformat("Hello {0} times, and goodbyes {1} times :|\n", numberOfHelloAndGoodBye);
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">void helloAndGoodByeReality() {
  std::cout &lt;&lt; vformat("Hello {0} times, and goodbyes {1} times :(\n",
    std::make_format_args(1000, 1));  // Compliant
}

void helloAndGoodByeExpectation() {
  std::cout &lt;&lt; vformat("Hello {0} times, and goodbyes {1} times :)\n",
    std::make_format_args(1000, 1000000));  // Compliant
}

std::string getHellosForRemote() {
  return "zero";
}

std::string getGoodbyesForRemote() {
  return "zero";
}
void helloAndGoodByeForRemote() {
  std::cout &lt;&lt;
    vformat("Hello {0} times, and goodbyes {1} times :|\n",
      std::make_format_args(getHellosForRemote(), getGoodbyesForRemote())); // Compliant
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>