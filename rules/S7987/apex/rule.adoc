This rule raises an issue when hardcoded values like email addresses, record IDs, user IDs, or configuration settings are used directly in automation workflows instead of using configurable alternatives.

== Why is this an issue?

Hardcoding values in automation workflows creates several significant problems that impact code maintainability and deployment flexibility.

When values like email addresses, record IDs, or configuration settings are embedded directly in code, they become tightly coupled to a specific environment or configuration. This makes it extremely difficult to deploy the same code across different Salesforce orgs (development, staging, production) without manual code modifications.

Hardcoded values also create maintenance nightmares. When business requirements change - such as updating notification recipients, changing approval processes, or modifying system configurations - developers must locate and update code in multiple places. This process is error-prone and time-consuming.

Furthermore, hardcoded values make testing more challenging. Unit tests cannot easily simulate different configurations or edge cases when values are fixed in the code. This reduces test coverage and makes it harder to verify that automation works correctly under various conditions.

Salesforce provides several built-in mechanisms specifically designed to handle configuration data: Custom Settings for simple key-value pairs, Custom Metadata Types for more complex configuration structures, and Custom Labels for user-facing text. These tools allow administrators to modify behavior without code changes and support proper deployment practices across environments.

=== What is the potential impact?

Applications become difficult to maintain and deploy across different environments. Configuration changes require code modifications and redeployment, increasing the risk of errors and downtime. Testing becomes more challenging, and the application lacks the flexibility needed for different business scenarios or organizational structures.

== How to fix it

Replace hardcoded email addresses with values from Custom Settings. This allows administrators to update notification recipients without code changes.

=== Code examples

==== Noncompliant code example

[source,apex,diff-id=1,diff-type=noncompliant]
----
public class NotificationService {
    public static void sendAlert(String message) {
        Messaging.SingleEmailMessage email = new Messaging.SingleEmailMessage();
        email.setToAddresses(new String[]{'admin@company.com'}); // Noncompliant
        email.setSubject('System Alert');
        email.setPlainTextBody(message);
        Messaging.sendEmail(new Messaging.SingleEmailMessage[]{email});
    }
}
----

==== Compliant solution

[source,apex,diff-id=1,diff-type=compliant]
----
public class NotificationService {
    public static void sendAlert(String message) {
        String adminEmail = System_Settings__c.getInstance().Admin_Email__c;
        if (String.isNotBlank(adminEmail)) {
            Messaging.SingleEmailMessage email = new Messaging.SingleEmailMessage();
            email.setToAddresses(new String[]{adminEmail});
            email.setSubject('System Alert');
            email.setPlainTextBody(message);
            Messaging.sendEmail(new Messaging.SingleEmailMessage[]{email});
        }
    }
}
----

== Resources

=== Documentation

 * Custom Settings - https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_customsettings.htm[Salesforce documentation on using Custom Settings for configuration data]

 * Custom Metadata Types - https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_custommetadata.htm[Guide to using Custom Metadata Types for application configuration]

 * Deployment Best Practices - https://developer.salesforce.com/docs/atlas.en-us.sfdx_dev.meta/sfdx_dev/sfdx_dev_develop_any_org.htm[Salesforce best practices for developing applications that work across multiple environments]

=== Standards

 * CWE-547: Use of Hard-coded, Security-relevant Constants - https://cwe.mitre.org/data/definitions/547.html[Security weakness related to hardcoding sensitive configuration values]

=== Related rules

 * RSPEC-5390 - https://rules.sonarsource.com/apex/RSPEC-5390[Related rule about hardcoded credentials in Apex]

 * RSPEC-5379 - https://rules.sonarsource.com/apex/RSPEC-5379[Related rule about configuration management in Apex]
