<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when <code>isinstance()</code> checks are used to differentiate between string parts and <code>Interpolation</code> objects while processing template strings, instead of using structural pattern matching with <code>match</code>/<code>case</code> statements.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When processing template strings introduced in PEP 750, using <code>isinstance()</code> checks to handle different types of template components results in verbose and less readable code. PEP 750 specifically recommends using structural pattern matching as the best practice for template processing.</p>
</div>
<div class="paragraph">
<p>Structural pattern matching with <code>match</code>/<code>case</code> statements provides several advantages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Better readability</strong>: The pattern matching syntax is more concise and expressive than multiple <code>isinstance()</code> checks</p>
</li>
<li>
<p><strong>Follows PEP recommendations</strong>: PEP 750 explicitly recommends this approach as the expected best practice</p>
</li>
<li>
<p><strong>More Pythonic</strong>: Pattern matching is the modern Python way to handle type-based dispatching</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Using <code>isinstance()</code> checks instead of structural pattern matching when processing template strings results in more verbose, less readable code that doesn&#8217;t follow the recommended patterns from PEP 750. While functionally equivalent, it makes the codebase harder to maintain and understand.</p>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>This rule raises issues only on Python 3.14 code.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_fix">How to fix?</h3>
<div class="paragraph">
<p>Replace <code>isinstance()</code> checks with structural pattern matching using <code>match</code>/<code>case</code> statements. Use type patterns like <code>str()</code> and <code>Interpolation()</code> to handle different template components.</p>
</div>
<div class="sect3">
<h4 id="_non_compliant_code_example">Non-compliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def process_template(template):
    result = []
    for item in template:
        if isinstance(item, str):  # Noncompliant
            result.append(item.lower())
        elif isinstance(item, Interpolation):  # Noncompliant
            result.append(str(item.value).upper())
    return ''.join(result)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_code_example">Compliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def process_template(template):
    result = []
    for item in template:
        match item:
            case str() as s:
                result.append(s.lower())
            case Interpolation() as interp:
                result.append(str(interp.value).upper())
    return ''.join(result)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>PEP Documentation - <a href="https://peps.python.org/pep-0750/">PEP 750 - Template Strings</a></p>
</li>
<li>
<p>PEP Documentation -  <a href="https://peps.python.org/pep-0634/">PEP 634 - Structural Pattern Matching</a></p>
</li>
<li>
<p>Python Documentation - <a href="https://docs.python.org/3/tutorial/controlflow.html#match-statements">Match Statements</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>