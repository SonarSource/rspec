<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sometimes when implementing a method, there is a need to return more than one value. To reduce the boilerplate of describing another class, other programming languages introduced such structures as <code>Pair</code>, <code>Tuple</code>, <code>Vector</code>, etc.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Unfortunately, in Java, there is no such structure and ``++Map.Entry++`` or ``++Object[]++`` of fixed size are used as a workaround for returning multiple values from a method.</pre>
</div>
</div>
<div class="paragraph">
<p>Java 16 introduced records to represent immutable data structures and they can be used for grouping different values in one entity. By using records, developers will have meaningful names and result in a more readable code. Furthermore, when using <code>Object[]</code>, there is a risk of getting <code>ClassCastException</code> or <code>ArrayIndexOutOfBoundsException</code> if not used carefully. It means that using records is not only more readable but is definitely safer.</p>
</div>
<div class="paragraph">
<p>This rule should report an issue when <code>Object[]</code> of a fixed size (&lt; 7) or <code>Map.Entry</code> are returned from a <strong>private</strong> method.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">private Map.Entry&lt;String, Integer&gt; getPerson() {
    String name = "John";
    int age = 25;
    return Map.entry(name, age); // Noncompliant
}

private Object[] getPerson() {
    Object[] result = new Object[2];
    result[0] = "John";
    result[1] = 25;
    return result; // Noncompliant
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">record Person(String name, int age) {}

Person getPerson() {
  String name = "John";
  int age = 25;
  return new Person(name, age); // Compliant
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>If the result of a method returning <code>Map.Entry</code> is actually used in a <code>Map</code>. Non-private methods are not taken into consideration.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.oracle.com/javase/specs/jls/se16/html/jls-8.html#jls-8.10">Records specification</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Refactor this method to return a record instead of "Map.Entry"|"Object[]"</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="ulist">
<ul>
<li>
<p>Primary: return statement</p>
</li>
<li>
<p>Secondary: returned type and assignments</p>
</li>
</ul>
</div>
</div>
</div>
</div>