<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If an <code>InterruptedException</code> or a <code>ThreadDeath</code> error is not handled properly, the information that the thread was interrupted will be lost.
Handling this exception means either to re-throw it or manually re-interrupt the current thread by calling <code>Thread.interrupt()</code>.
Simply logging the exception is not sufficient and counts as ignoring it.
Between the moment the exception is caught and handled, is the right time to perform cleanup operations on the method&#8217;s state, if needed.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Failing to interrupt the thread (or to re-throw) risks delaying the thread shutdown and losing the information that the thread was interrupted - probably without finishing its task.</p>
</div>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void run () {
  try {
    /*...*/
  } catch (InterruptedException e) { // Noncompliant; logging is not enough
    LOGGER.log(Level.WARN, "Interrupted!", e);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void run () {
  try {
    /* ... */
  } catch (InterruptedException e) { // Compliant; the interrupted state is restored
    LOGGER.log(Level.WARN, "Interrupted!", e);
    /* Clean up whatever needs to be handled before interrupting  */
    Thread.currentThread().interrupt();
  }
}

public void run () {
  try {
    /* ... */
  } catch (ThreadDeath e) { // Compliant; the error is being re-thrown
    LOGGER.log(Level.WARN, "Interrupted!", e);
    /* Clean up whatever needs to be handled before re-throwing  */
    throw e;
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>CWE - <a href="https://cwe.mitre.org/data/definitions/391">CWE-391 - Unchecked Error Condition</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Either re-interrupt this method or rethrow the "{InterruptedException/ThreadDeath}" that can be caught here.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="ulist">
<ul>
<li>
<p>Primary: Catch parameter</p>
</li>
<li>
<p>Secondary: Method call throwing "InterruptedException"</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_related_to_s5754">is related to: <a data-rspec-id="S5754" class="rspec-auto-link">S5754</a></h3>

</div>
<div class="sect2">
<h3 id="_on_14_oct_2014_212147_freddy_mallet_wrote">on 14 Oct 2014, 21:21:47 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>@Ann, could you provide the source of this RSPEC because would like to double-check the main goal of this rule ? For sure here the code snippets are really misleading because we could have the feeling that when the execution of a Runnable class is interrupted, this exception can be caught in the <code>run</code> method which is not at all the case.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_15_oct_2014_115938_ann_campbell_wrote">on 15 Oct 2014, 11:59:38 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~freddy.mallet] https://twitter.com/aparnachaudhary/status/520952677631807488</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_4_sep_2019_203320_réda_housni_alaoui_wrote">on 4 Sep 2019, 20:33:20 Réda Housni Alaoui wrote:</h3>
<div class="paragraph">
<p>Hi,</p>
</div>
<div class="paragraph">
<p>I think the rule derived from this spec is too narrow.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Many people write `catch (Exception e)` in their applications.</pre>
</div>
</div>
<div class="paragraph">
<p>Following this spec, IMO, that means that any <code>catch(Exception e)</code> must ALWAYS be preceded by a catch of InterruptedException like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre>catch (InterruptedException e) {
  Thread.currentThread().interrupt();
} catch (Exception e) {
  //...
}{code}</pre>
</div>
</div>
</div>
</div>
</div>