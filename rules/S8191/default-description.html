<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an issue when error conditions are handled by nesting the happy path inside if-else blocks instead of returning early on errors.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nested error handling creates unnecessary complexity and reduces code readability. When functions handle the "happy path" inside nested if-else blocks that check for successful operations, the main logic becomes buried under multiple levels of indentation.</p>
</div>
<div class="paragraph">
<p>This pattern increases cognitive load for developers who need to mentally track multiple nesting levels to understand the code flow. The deeper the nesting, the harder it becomes to follow the primary logic of the function.</p>
</div>
<div class="paragraph">
<p>Go&#8217;s idiomatic approach favors early returns on error conditions. This keeps the main logic flow at the top level of the function, making it easier to read and understand. The pattern also aligns with Go&#8217;s explicit error handling philosophy, where errors are values that should be checked and handled promptly.</p>
</div>
<div class="paragraph">
<p>By handling errors first and returning immediately, you create a linear flow where each step in the happy path is clearly visible without nested conditions. This approach reduces the mental overhead required to understand the function&#8217;s behavior.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Code with nested error handling is harder to read, understand, and maintain. This increases the time developers need to comprehend the logic and makes the codebase more prone to bugs during modifications. The reduced readability can slow down code reviews and make debugging more difficult.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Handle error conditions early in the function and return immediately. This keeps the happy path logic at the top level without nesting.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">func (g *Gopher) WriteTo(w io.Writer) (size int64, err error) {
    err = binary.Write(w, binary.LittleEndian, int32(len(g.Name)))
    if err == nil { // Noncompliant
        size += 4
        var n int
        n, err = w.Write([]byte(g.Name))
        size += int64(n)
        if err == nil { // Noncompliant
            err = binary.Write(w, binary.LittleEndian, int64(g.AgeYears))
            if err == nil { // Noncompliant
                size += 4
            }
            return
        }
        return
    }
    return
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">func (g *Gopher) WriteTo(w io.Writer) (size int64, err error) {
    err = binary.Write(w, binary.LittleEndian, int32(len(g.Name)))
    if err != nil {
        return
    }
    size += 4
    n, err := w.Write([]byte(g.Name))
    size += int64(n)
    if err != nil {
        return
    }
    err = binary.Write(w, binary.LittleEndian, int64(g.AgeYears))
    if err == nil {
        size += 4
    }
    return
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Go Best Practices - Avoid nesting by handling errors first - <a href="https://go.dev/talks/2013/bestpractices.slide#1">Official Go presentation on best practices including error handling patterns</a></p>
</li>
<li>
<p>Effective Go - Error handling - <a href="https://go.dev/doc/effective_go#errors">Official Go documentation on idiomatic error handling</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>