<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Comparison operator implementations like <code>==</code> or <code>&lt;=&gt;</code>, despite not being hard to write, remain a source of bugs as they must be updated with every change in the class&#8217;s member list. For instance, if the operation does not consider a newly introduced member in the class, the issue will only manifest if two instances are identical, except for the freshly introduced member. As a consequence, this type of bug is usually hard to spot.</p>
</div>
<div class="paragraph">
<p>C&#43;&#43;20 introduced the ability to define both <code>operator&lt;=&gt;</code> and <code>operator==</code> as defaulted (<code>= default</code>) to indicate that they should consider all members in the order of their declaration. This makes code concise and makes all the comparison operators resilient to the changes to the list of members. Thanks to operator rewriting, all other comparison operations (<code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>=&gt;</code>) can also rely on these robust operators.</p>
</div>
<div class="paragraph">
<p>Furthermore, when <code>operator&lt;=&gt;</code> is defined as defaulted, the compiler will generate a defaulted version of <code>operator==</code> if no other version is declared.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when the implementation of <code>operator&lt;=&gt;</code> or <code>operator==</code> has an equivalent semantic to the defaulted implementation. Defining these operators as defaulted is more concise and robust in these cases.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">struct Comparable {
    int x;
    int y;
};

bool operator==(const Comparable&amp; lhs, const Comparable&amp; rhs) { // Noncompliant
    return lhs.x == rhs.x &amp;&amp; lhs.y == rhs.y;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">struct Comparable {
    int x;
    int y;

    friend bool operator==(const Comparable&amp;, const Comparable&amp;) = default;
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">struct Ordered {
    int x;
    int y;
};

bool operator==(const Ordered&amp; lhs, const Ordered&amp; rhs) { // Noncompliant
    return lhs.x == rhs.x &amp;&amp; lhs.y == rhs.y;
}

auto operator&lt;=&gt;(const Ordered&amp; lhs, const Ordered&amp; rhs) { // Noncompliant
    if (res = lhs.x &lt;=&gt; rhs.x; res != 0)
        return x;
    return lhs.y &lt;=&gt; rhs.y;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">struct Ordered {
    int x;
    int y;

    friend auto operator&lt;=&gt;(const Ordered&amp;, const Ordered&amp;) = default;
};</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>C&#43;&#43; reference - <a href="https://en.cppreference.com/w/cpp/language/default_comparisons">Default comparisons</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S6186" class="rspec-auto-link">S6186</a> - removing redundant comparison operators</p>
</li>
<li>
<p><a data-rspec-id="S6187" class="rspec-auto-link">S6187</a> - replacing multiple comparison operators with <code>operator&lt;=&gt;</code></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s6186">relates to: <a data-rspec-id="S6186" class="rspec-auto-link">S6186</a></h3>

</div>
<div class="sect2">
<h3 id="_relates_to_s6187">relates to: <a data-rspec-id="S6187" class="rspec-auto-link">S6187</a></h3>

</div>
</div>
</div>