<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when files are opened without specifying an explicit encoding parameter.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When opening text files without specifying an encoding, Python uses the system&#8217;s default locale encoding. This creates cross-platform compatibility issues because different operating systems have different default encodings.</p>
</div>
<div class="paragraph">
<p>On Unix-like systems (Linux, macOS), the default encoding is typically UTF-8. However, on Windows, it depends on the system locale and might be cp1252, cp1251, or other encodings. This means code that works perfectly on a developer&#8217;s Unix machine might fail when users try to run it on Windows.</p>
</div>
<div class="paragraph">
<p>For example, if a README.md file contains non-ASCII characters (like emoji, accented characters, or copyright symbols) and is opened without specifying UTF-8 encoding, it will work fine on Unix systems but may cause <code>UnicodeDecodeError</code> on Windows systems with different locale encodings.</p>
</div>
<div class="paragraph">
<p>This issue is particularly problematic in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Package setup scripts that read README files</p>
</li>
<li>
<p>Configuration file parsing</p>
</li>
<li>
<p>Log file processing</p>
</li>
<li>
<p>Any text file processing that needs to work across different platforms</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The problem often goes unnoticed during development because developers frequently work on Unix-like systems where UTF-8 is the default, only to discover encoding issues when the code runs in production or on users' Windows machines.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Cross-platform compatibility issues can cause applications to fail with <code>UnicodeDecodeError</code> on systems with different default encodings. This leads to poor user experience, failed installations, and reduced software reliability across different operating systems.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_fix">How to fix?</h3>
<div class="paragraph">
<p>Specify UTF-8 encoding explicitly when opening text files that should contain UTF-8 data. This is the most common fix and ensures consistent behavior across all platforms.</p>
</div>
<div class="sect3">
<h4 id="_non_compliant_code_example">Non-compliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">with open('README.md', 'r') as f:  # Noncompliant
    content = f.read()</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_code_example">Compliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">with open('README.md', 'r', encoding='utf-8') as f:
    content = f.read()</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Python open() function documentation - <a href="https://docs.python.org/3/library/functions.html#open">Official documentation for Python&#8217;s open() function including encoding parameter</a></p>
</li>
<li>
<p>Python Unicode HOWTO - <a href="https://docs.python.org/3/howto/unicode.html">Comprehensive guide to handling Unicode and text encodings in Python</a></p>
</li>
<li>
<p>PEP 597 - Add optional EncodingWarning - <a href="https://peps.python.org/pep-0597/">Python Enhancement Proposal that introduced EncodingWarning for this exact issue</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-176: Improper Handling of Unicode Encoding - <a href="https://cwe.mitre.org/data/definitions/176.html">Weakness related to improper handling of Unicode encoding that can lead to security vulnerabilities</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>