<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Suppose you override <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object.equals">Object.Equals</a> in a type, you must also override <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object.gethashcode">Object.GetHashCode</a>. If two objects are equal according to the <code>Equals</code> method, then calling <code>GetHashCode</code> on each of them must yield the same integer. If this is not the case, many collections, such as a <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.hashtable">Hashtable</a> or a <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2">Dictionary</a> won&#8217;t handle class instances correctly.</p>
</div>
<div class="paragraph">
<p>In order to not have unpredictable behavior, <code>Equals</code> and <code>GetHashCode</code> should be either both inherited, or both overridden.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you override <code>Equals</code> then you have to also override <code>GetHashCode</code>. You have to override both of them, or simply inherit them.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">class MyClass   // Noncompliant: should also override GetHashCode
{
    public override bool Equals(object obj)
    {
        // ...
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">class MyClass
{
    public override bool Equals(object obj)
    {
        // ...
    }

    public override int GetHashCode()
    {
        // ...
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>CWE - <a href="https://cwe.mitre.org/data/definitions/581">CWE-581 - Object Model Violation: Just One of Equals and Hashcode Defined</a></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.object.equals">Object.Equals Method</a></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.object.gethashcode">Object.GetHashCode Method</a></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.hashtable">Hashtable class</a></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2">Dictionary&lt;TKey,TValue&gt; Class</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>This [class|struct] overrides "GetHashCode()|Equals()" and should therefore also override "GetHashCode()|Equals()".</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>The [class|struct] name.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_20_aug_2013_135031_freddy_mallet_wrote">on 20 Aug 2013, 13:50:31 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>Is implemented by http://jira.codehaus.org/browse/SONARJAVA-302</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_2_oct_2013_090255_dinesh_bolkensteyn_wrote">on 2 Oct 2013, 09:02:55 Dinesh Bolkensteyn wrote:</h3>
<div class="paragraph">
<p>Perhaps HE_HASHCODE_USE_OBJECT_EQUALS and HE_EQUALS_USE_HASHCODE should be deprecated as well.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_2_oct_2013_090651_dinesh_bolkensteyn_wrote">on 2 Oct 2013, 09:06:51 Dinesh Bolkensteyn wrote:</h3>
<div class="paragraph">
<p>Those 2 are now already deprecated in the implementation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_8_jul_2015_130956_ann_campbell_wrote">on 8 Jul 2015, 13:09:56 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Irrelevant because: CS0659 C# compiler warning</p>
</div>
</div>
</div>
</div>