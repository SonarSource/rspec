<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when the expression used in an <code>except</code> statement is neither a class deriving from <code>BaseException</code> nor a tuple of such classes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Python 3&#8217;s <code>except</code> statement, attempting to catch an object that does not derive from <code>BaseException</code> will raise a <code>TypeError</code>.</p>
</div>
<div class="paragraph">
<p>In order to catch multiple exceptions in an <code>except</code> statement, a <code>tuple</code> of exception classes should be provided. Trying to catch multiple exceptions with a <code>list</code> or a <code>set</code> will raise a <code>TypeError</code>.</p>
</div>
<div class="paragraph">
<p>If you are about to create a custom exception class, note that custom exceptions should inherit from <code>Exception</code>, rather than <code>BaseException</code>.</p>
</div>
<div class="paragraph">
<p><code>BaseException</code> is the base class for all built-in exceptions in Python, including system-exiting exceptions like <code>SystemExit</code> or <code>KeyboardInterrupt</code>, which are typically not meant to be caught. On the other hand, <code>Exception</code> is intended for exceptions that are expected to be caught, which is generally the case for user-defined exceptions. See <a href="https://www.python.org/dev/peps/pep-0352/#exception-hierarchy-changes">PEP 352</a> for more information.</p>
</div>
<div class="paragraph">
<p>To fix this issue, make sure the expression used in an <code>except</code> statement is an exception which derives from <code>BaseException</code>/<code>Exception</code> or a tuple of such exceptions.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class CustomException(object):
    """An Invalid exception class."""
    pass

try:
    ...
except CustomException:  # Noncompliant: this custom exception does not derive from BaseException or Exception.
    print("exception")

try:
    ...
except [TypeError, ValueError]:  # Noncompliant: list of exceptions, only tuples are valid.
    print("exception")</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class CustomException(Exception):
    pass

try:
    ...
except CustomException:
    print("exception")

try:
    ...
except (TypeError, ValueError):
    print("exception")</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note</strong>: <em>In Python 2 it is possible to raise and catch old-style classes, which do not inherit from <code>BaseException</code>.</em></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Python Documentation - <a href="https://docs.python.org/3/tutorial/errors.html">Errors and Exceptions</a></p>
</li>
<li>
<p>Python Documentation - <a href="https://docs.python.org/3/reference/compound_stmts.html#except">The <code>try</code> statement</a></p>
</li>
<li>
<p>Python Documentation - <a href="https://docs.python.org/3/library/exceptions.html#exception-hierarchy">Exception hierarchy</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>PEP 352 - <a href="https://www.python.org/dev/peps/pep-0352/#exception-hierarchy-changes">Required Superclass for Exceptions</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>Change this expression to be a class deriving from BaseException or a tuple of such classes.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>The expression which does not resolve in a valid exception class or a tuple of such classes.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s5632">relates to: <a data-rspec-id="S5632" class="rspec-auto-link">S5632</a></h3>

</div>
<div class="sect2">
<h3 id="_on_5_mar_2020_141755_nicolas_harraudeau_wrote">on 5 Mar 2020, 14:17:55 Nicolas Harraudeau wrote:</h3>
<div class="paragraph">
<p>Even if it is possible to catch a class which is not a BaseException in python 2, this rule is still a bug for the following reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>BaseException exists in Python 2 too. There is no reason not to use it. It is advised to use exceptions derived from BaseException since python 2.5 released in 2006.</p>
</li>
<li>
<p>Python 2 is not maintained anymore and there are tools enabling developpers to migrate from python 2 to python 3. When developers migrate this will become a bug.</p>
</li>
<li>
<p>We already have <a data-rspec-id="S5632" class="rspec-auto-link">RSPEC-5632</a> as a Bug and nobody complains. Letâ€™s remain consistent. If we change the rule to code smell we have to change this other rule too.</p>
</li>
<li>
<p>old style classes are the only exception in python 2. Trying to raise a string or a list will fail in in both python 2 and python 3. This exception would be a corner case.</p>
</li>
</ul>
</div>
</div>
</div>
</div>