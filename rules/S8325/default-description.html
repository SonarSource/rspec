<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an issue when declaring variables with <code>def</code> or explicit types (like <code>int</code>, <code>String</code>) in Groovy scripts that are intended to share data with the calling application through a <code>Binding</code> object.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When Groovy scripts are executed with a shared <code>Binding</code> object, variables can be shared between the script and the calling application. However, this data sharing only works with undeclared variables.</p>
</div>
<div class="paragraph">
<p>Using <code>def</code> or explicit type declarations (like <code>int foo = 123</code> or <code>def bar = "hello"</code>) creates local variables within the script scope. These local variables are not accessible from the calling application through the <code>Binding</code> object.</p>
</div>
<div class="paragraph">
<p>This behavior often surprises developers who expect all variables in a script to be automatically shared. When the calling application tries to access these variables using <code>binding.getProperty()</code> or similar methods, it will fail with a <code>MissingPropertyException</code> or return null, leading to runtime errors or unexpected behavior.</p>
</div>
<div class="paragraph">
<p>The issue is particularly problematic because:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The script executes without errors, making the problem hard to detect during development</p>
</li>
<li>
<p>The failure only occurs when the calling application tries to access the variable</p>
</li>
<li>
<p>It violates the principle of least surprise, as developers naturally expect declared variables to be accessible</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>The application may fail at runtime when trying to access variables from the script through the Binding object. This can lead to <code>MissingPropertyException</code> errors or null values where data was expected, potentially causing application crashes or incorrect behavior in production systems.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Remove the variable declaration keyword to make the variable undeclared. This allows it to be written to the shared Binding object and accessed by the calling application.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// In Groovy script executed with GroovyShell
def result = "Hello World" // Noncompliant
int count = 42 // Noncompliant
String message = "Done" // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// In Groovy script executed with GroovyShell
result = "Hello World" // Writes to binding
count = 42 // Writes to binding
message = "Done" // Writes to binding</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Groovy Integration Guide - Sharing data between script and application - <a href="https://groovy-lang.org/integrating.html#_sharing_data_between_a_script_and_the_application">Official Groovy documentation explaining how to share data between scripts and applications using Binding objects</a></p>
</li>
<li>
<p>Groovy GroovyShell Documentation - <a href="https://docs.groovy-lang.org/latest/html/api/groovy/lang/GroovyShell.html">API documentation for GroovyShell class used for script execution</a></p>
</li>
<li>
<p>Groovy Binding Documentation - <a href="https://docs.groovy-lang.org/latest/html/api/groovy/lang/Binding.html">API documentation for Binding class used for sharing variables between script and application</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>