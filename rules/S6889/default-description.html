<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Optimizing resource usage and preventing unnecessary battery drain are critical considerations in Android development.
Failing to release sensor resources when they are no longer needed can lead to prolonged device activity, negatively impacting battery life.
Common Android sensors, such as cameras, GPS, and microphones, provide a method to release resources after they are not in use anymore.</p>
</div>
<div class="paragraph">
<p>This rule identifies situations where a sensor is not released after being utilized, helping developers maintain efficient and battery-friendly applications.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Missing call to <code>release()</code> method:</p>
<div class="ulist">
<ul>
<li>
<p><code>android.os.PowerManager.WakeLock</code></p>
</li>
<li>
<p><code>android.net.wifi.WifiManager$MulticastLock</code></p>
</li>
<li>
<p><code>android.hardware.Camera</code></p>
</li>
<li>
<p><code>android.media.MediaPlayer</code></p>
</li>
<li>
<p><code>android.media.MediaRecorder</code></p>
</li>
<li>
<p><code>android.media.SoundPool</code></p>
</li>
<li>
<p><code>android.media.audiofx.Visualizer</code></p>
</li>
<li>
<p><code>android.hardware.display.VirtualDisplay</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Missing call to <code>close()</code> method</p>
<div class="ulist">
<ul>
<li>
<p><code>android.hardware.camera2.CameraDevice</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Missing call to <code>removeUpdates()</code> method:</p>
<div class="ulist">
<ul>
<li>
<p><code>android.location.LocationManager</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Missing call to <code>unregisterListener()</code> method:</p>
<div class="ulist">
<ul>
<li>
<p><code>android.hardware.SensorManager</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ensure that resources are released when they are no longer needed.
This can be done by calling the appropriate release method, such as <code>release()</code>, <code>removeUpdates()</code>, <code>unregisterListener()</code>, or <code>stop()</code>.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="ulist">
<ul>
<li>
<p><code>android.os.PowerManager.WakeLock</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void method() {
  PowerManager powerManager = (PowerManager) getSystemService(POWER_SERVICE);
  PowerManager.WakeLock wakeLock = powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "My Wake Lock");
  wakeLock.acquire(); // Noncompliant
  // do some work...
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void method() {
  PowerManager powerManager = (PowerManager) getSystemService(POWER_SERVICE);
  PowerManager.WakeLock wakeLock = powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "My Wake Lock");
  wakeLock.acquire(); // Compliant
  // do some work...
  wakeLock.release();
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>android.media.MediaPlayer</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void method() {
  MediaPlayer mediaPlayer = MediaPlayer.create(context, R.raw.sound_file_1);
  mediaPlayer.start(); // Noncompliant
  // do some work...
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void onCreate() {
  MediaPlayer mediaPlayer = MediaPlayer.create(context, R.raw.sound_file_1);
  mediaPlayer.start(); // Compliant
  // do some work...
  wakeLock.release();
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>android.hardware.SensorManager</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example_3">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void method() {
  SensorManager sensorManager = getSystemService(SENSOR_SERVICE);
  Sensor accelerometer = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
  sensorManager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_NORMAL); // Noncompliant
  // do some work...
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_3">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void method() {
  SensorManager sensorManager = getSystemService(SENSOR_SERVICE);
  Sensor accelerometer = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
  sensorManager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_NORMAL); // Compliant
  // do some work...
  sensorManager.unregisterListener(this);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://developer.android.com/reference/android/location/LocationManager">Android - LocationManager</a></p>
</li>
<li>
<p><a href="https://developer.android.com/reference/android/os/PowerManager.WakeLock">Android - PowerManager.WakeLock</a></p>
</li>
<li>
<p><a href="https://developer.android.com/reference/android/net/wifi/WifiManager.MulticastLock">Android - WifiManager.MulticastLock</a></p>
</li>
<li>
<p><a href="https://developer.android.com/reference/android/media/projection/MediaProjection">Android - MediaProjection</a></p>
</li>
<li>
<p><a href="https://developer.android.com/reference/android/media/MediaPlayer">Android - MediaPlayer</a></p>
</li>
<li>
<p><a href="https://developer.android.com/reference/android/media/MediaRecorder">Android - MediaRecorder</a></p>
</li>
<li>
<p><a href="https://developer.android.com/reference/android/media/SoundPool">Android - SoundPool</a></p>
</li>
<li>
<p><a href="https://developer.android.com/reference/android/media/audiofx/Visualizer">Android - Visualizer</a></p>
</li>
<li>
<p><a href="https://developer.android.com/reference/android/hardware/SensorManager">Android - SensorManager</a></p>
</li>
<li>
<p><a href="https://developer.android.com/develop/background-work/background-tasks/scheduling/wakelock">Android - Keep the device awake</a></p>
</li>
<li>
<p><a href="https://developer.android.com/media/platform/mediaplayer">Android - MediaPlayer Overview</a></p>
</li>
<li>
<p><a href="https://developer.android.com/develop/sensors-and-location/sensors/sensors_overview">Android - Sensors Overview</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>