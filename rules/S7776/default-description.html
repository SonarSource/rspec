<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an issue when using <code>Array#includes()</code> to check if a value exists in an array that is used primarily for existence checking and is checked multiple times.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using <code>Array#includes()</code> for existence checks can lead to performance problems, especially with larger datasets.</p>
</div>
<div class="paragraph">
<p><code>Array#includes()</code> has O(n) time complexity because it needs to iterate through the array elements until it finds a match or reaches the end. In contrast, <code>Set#has()</code> has O(1) average time complexity because it uses a hash table internally.</p>
</div>
<div class="paragraph">
<p>For small arrays (typically under 10-20 elements), the performance difference is negligible. However, as the array size grows, the performance gap becomes significant. For an array with 1000 elements, <code>Array#includes()</code> might need to check up to 1000 elements, while <code>Set#has()</code> performs the check almost instantly.</p>
</div>
<div class="paragraph">
<p>This performance difference becomes even more pronounced when the existence check is performed multiple times, such as in loops or frequently called functions.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Performance degradation can occur when checking existence in large arrays, especially when these checks are performed frequently. This can lead to slower application response times and poor user experience in performance-critical code paths.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_fix">How to fix?</h3>
<div class="paragraph">
<p>Replace the array with a Set when the primary use case is existence checking. Convert the array to a Set using the Set constructor, then use <code>Set#has()</code> instead of <code>Array#includes()</code>.</p>
</div>
<div class="sect3">
<h4 id="_non_compliant_code_example">Non-compliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const allowedValues = [1, 2, 3, 4, 5];
const isAllowed = value =&gt; allowedValues.includes(value); // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_code_example">Compliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const allowedValues = new Set([1, 2, 3, 4, 5]);
const isAllowed = value =&gt; allowedValues.has(value);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/sindresorhus/eslint-plugin-unicorn#readme">eslint-plugin-unicorn</a> - Rule <a href="https://github.com/sindresorhus/eslint-plugin-unicorn/blob/HEAD/docs/rules/prefer-set-has.md">prefer-set-has</a></p>
</li>
<li>
<p>MDN - Set.prototype.has() - <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/has">Documentation for the Set.has() method</a></p>
</li>
<li>
<p>MDN - Array.prototype.includes() - <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes">Documentation for the Array.includes() method</a></p>
</li>
<li>
<p>MDN - Set - <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">Complete documentation for the Set object</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>