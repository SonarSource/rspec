<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when a channel is created and used for sending values but is never explicitly closed using the <code>close()</code> function.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Go&#8217;s concurrency model, channels serve as communication pathways between goroutines. When a channel is used to send values but never closed, it creates several serious problems.</p>
</div>
<div class="paragraph">
<p>First, <strong>goroutines waiting to receive from the channel may block indefinitely</strong>. If a receiver is using a <code>for range</code> loop or waiting for a channel to be closed as a signal, it will never know when no more values are coming. This leads to goroutines that never terminate, consuming memory and potentially causing the entire program to hang.</p>
</div>
<div class="paragraph">
<p>Second, <strong>resource leaks occur</strong> because the Go runtime cannot garbage collect channels that still have potential senders or receivers. Unclosed channels keep references alive, preventing proper cleanup of associated resources.</p>
</div>
<div class="paragraph">
<p>Third, <strong>deadlock situations can arise</strong> in complex concurrent programs. When multiple goroutines are coordinating through channels, unclosed channels can break the expected communication flow, causing the entire system to freeze.</p>
</div>
<div class="paragraph">
<p>The Go language provides the <code>close()</code> function specifically to signal that no more values will be sent on a channel. This allows receivers to detect when the channel is closed and react appropriately, enabling proper program termination and resource cleanup.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Unclosed channels can cause goroutine leaks, leading to increased memory usage and potential application hangs. In severe cases, this can result in deadlocks where the entire program becomes unresponsive, requiring a restart and potentially causing data loss or service interruption.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add <code>defer close(ch)</code> at the beginning of the function that sends values to the channel. The <code>defer</code> statement ensures the channel is closed when the function exits, even if an error occurs.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">func producer(ch chan int) {
    for i := 0; i &lt; 10; i++ {
        ch &lt;- i
    }
    // Channel never closed // Noncompliant
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">func producer(ch chan int) {
    defer close(ch)
    for i := 0; i &lt; 10; i++ {
        ch &lt;- i
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Go Language Specification - Channel types - <a href="https://golang.org/ref/spec#Channel_types">Official Go specification covering channel types and operations</a></p>
</li>
<li>
<p>Effective Go - Channels - <a href="https://golang.org/doc/effective_go#channels">Best practices for using channels in Go programs</a></p>
</li>
<li>
<p>Go Blog - Go Concurrency Patterns - <a href="https://blog.golang.org/pipelines">Detailed explanation of Go concurrency patterns including proper channel management</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-404: Improper Resource Shutdown or Release - <a href="https://cwe.mitre.org/data/definitions/404.html">Failure to properly release or shutdown resources can lead to resource exhaustion</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>