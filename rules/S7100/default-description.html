<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Calling <a href="https://api.dart.dev/stable/dart-core/Iterable/toList.html"><code>toList</code></a> on an <a href="https://api.dart.dev/stable/dart-core/Iterable/Iterable.html"><code>Iterable</code></a> used in a list literal with a <a href="https://dart.dev/language/collections#spread-operators">spread operator</a> is redundant and should be removed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://dart.dev/language/collections#spread-operators">spread operators</a> (<code>...</code> and <code>...?</code>) are convenient ways to flatten a collection into a collection literal, that work on multiple types of collections supporting literals: <code>List</code>, <code>Map</code>, and <code>Set</code>.</p>
</div>
<div class="paragraph">
<p>When a spread operator is used in a <code>List</code> literal, it looks like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">final list = [1, 2, ...anIterable, 3, 4];</code></pre>
</div>
</div>
<div class="paragraph">
<p>which is more concise, readable, and efficient than the equivalent code not using it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">final list = [1, 2]..addAll(anIterable)..addAll([3, 4]);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, the spread operator will iterate over the elements of <code>anIterable</code>, building the resulting list.</p>
</div>
<div class="paragraph">
<p>There is no need to call <code>toList</code> on the <code>Iterable</code> before spreading it into the list literal, because the spread operator will take care of the iteration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">final list = [1, 2, ...anIterable.toList(), 3, 4]; // toList not necessary</code></pre>
</div>
</div>
<div class="paragraph">
<p>In general, once the intent of flatting an <code>Iterable</code> into a collection literal has been expressed by using the <code>...</code> operator, it&#8217;s best let the compiler figure out what is the best way to achieve that, based on the type of collection literal (<code>List</code>, <code>Set</code>, <code>Map</code>) and the actual type of provided <code>Iterable</code>.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Calling <code>toList</code> unnecessarily is not only redundant and more verbose: it may result in unnecessary memory allocation and performance overhead, since an intermediate <code>List</code> instance would be created, just to be thrown away once it is spread into the list literal.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Remove the <code>toList</code> call from the <code>Iterable</code> passed to the spread operator.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">final list = [
    1,
    2,
    ...anIterable.toList(), // Noncompliant
    3,
    4
];</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">final list = [
    1,
    2,
    ...anIterable,
    3,
    4
];</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">final list = [
    1,
    2,
    ...?aNullableIterable?.toList(), // Noncompliant
    3,
    4
];</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">final list = [
    1,
    2,
    ...?aNullableIterable,
    3,
    4
];</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Dart Docs - <a href="https://dart.dev/tools/linter-rules/unnecessary_to_list_in_spreads">Dart Linter rule - unnecessary_to_list_in_spreads</a></p>
</li>
<li>
<p>Dart Docs - <a href="https://dart.dev/language/collections#spread-operators">Language - Spread operators</a></p>
</li>
<li>
<p>Dart API Reference - <a href="https://api.dart.dev/stable/dart-core/Iterable/toList.html"><code>Iterable&lt;E&gt;.toList</code></a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Unnecessary use of 'toList' in a spread.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>The <code>toList</code> identifier in the <code>toList()</code> call. Neither the object on which the method is called nor the brackets are highlighted.</p>
</div>
</div>
</div>
</div>