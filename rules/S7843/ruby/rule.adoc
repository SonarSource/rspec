This rule raises an issue when `update_column` is called with hash syntax, which causes an ArgumentError, or when it's used for counter operations where `increment` or `decrement` would be more appropriate.

== Why is this an issue?

The `update_column` method in Rails expects two separate arguments: the column name and the new value. Using hash syntax like `update_column(:field => value)` will cause an `ArgumentError` at runtime because the method signature doesn't accept a hash parameter.

Additionally, when performing counter operations (incrementing or decrementing numeric values), Rails provides dedicated methods like `increment` and `decrement` that are more semantic and safer. These methods:

* Make the intent clearer in the code
* Handle edge cases better (like nil values)
* Are specifically designed for counter operations
* Provide better error handling

Using `update_column` for counter operations, even with correct syntax, makes the code less readable and potentially more error-prone.

=== What is the potential impact?

Using incorrect hash syntax with `update_column` will cause an immediate `ArgumentError` at runtime, breaking the application functionality. This can lead to:

* Application crashes when the problematic code is executed
* Poor user experience due to unexpected errors
* Potential data inconsistency if counter operations fail silently in some scenarios

Using `update_column` instead of semantic counter methods can lead to less maintainable code and potential issues with edge cases that the dedicated counter methods handle automatically.

== How to fix it in Rails

Replace the hash syntax with two separate arguments to fix the ArgumentError. For counter operations, use the semantic `increment` method instead.

=== Code examples

==== Noncompliant code example

[source,ruby,diff-id=1,diff-type=noncompliant]
----
@post.update_column(:ups => @post[:ups] + 1) // Noncompliant
----

==== Compliant solution

[source,ruby,diff-id=1,diff-type=compliant]
----
# Fix the syntax error and use semantic method
@post.increment(:ups)
----

When using `update_column` correctly but for counter operations, prefer the more semantic `increment` and `decrement` methods.

=== Code examples

==== Noncompliant code example

[source,ruby,diff-id=2,diff-type=noncompliant]
----
@post.update_column(:ups, @post[:ups] + 1) // Noncompliant
----

==== Compliant solution

[source,ruby,diff-id=2,diff-type=compliant]
----
# Use semantic counter method
@post.increment(:ups)
----

For updating multiple attributes with hash syntax, use `update_attributes` or `update` instead of `update_column`.

=== Code examples

==== Noncompliant code example

[source,ruby,diff-id=3,diff-type=noncompliant]
----
@post.update_column(:ups => new_value, :downs => other_value) // Noncompliant
----

==== Compliant solution

[source,ruby,diff-id=3,diff-type=compliant]
----
# Use update_attributes for multiple fields
@post.update_attributes(ups: new_value, downs: other_value)
----

== Resources

=== Documentation

 * Rails ActiveRecord update_column - https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_column[Official Rails documentation for the update_column method]

 * Rails ActiveRecord increment - https://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Dirty.html#method-i-increment[Official Rails documentation for the increment method]

 * Rails ActiveRecord decrement - https://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Dirty.html#method-i-decrement[Official Rails documentation for the decrement method]
