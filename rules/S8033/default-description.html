<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when an <code>HttpRequest</code> is sent without explicitly setting a timeout value using the <code>setTimeout()</code> method.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HTTP callouts in Apex can take a long time to complete, especially when external services are slow or unresponsive. Without an explicit timeout, Salesforce uses a default timeout of 120 seconds, which is often too long for most integration scenarios.</p>
</div>
<div class="paragraph">
<p>Long-running HTTP requests consume valuable execution time and can easily cause your code to hit Salesforce&#8217;s governor limits. In a single transaction, you have a maximum of 120 seconds of total execution time. If you make multiple callouts or have other processing logic, a single slow HTTP request can consume most or all of this time budget.</p>
</div>
<div class="paragraph">
<p>Additionally, users waiting for a response will experience poor performance when requests take too long to complete. This creates a frustrating user experience and can make your application appear unresponsive.</p>
</div>
<div class="paragraph">
<p>By setting an appropriate timeout value, you ensure that HTTP requests fail fast when external services are unresponsive, allowing your code to handle errors gracefully and maintain good performance characteristics.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Without explicit timeouts, HTTP callouts can consume excessive execution time, leading to governor limit violations and transaction failures. Users may experience long wait times or timeouts, degrading the overall user experience. In batch processing scenarios, a single slow request can cause entire batches to fail.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add an explicit timeout using the <code>setTimeout()</code> method before sending the HTTP request. Choose a timeout value appropriate for your use case - typically 10-30 seconds for most integrations.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">public class ExternalServiceCallout {
    public static String callExternalService() {
        Http http = new Http();
        HttpRequest request = new HttpRequest();
        request.setEndpoint('https://api.external.com/data');
        request.setMethod('GET');
        HttpResponse response = http.send(request); // Noncompliant
        return response.getBody();
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">public class ExternalServiceCallout {
    public static String callExternalService() {
        Http http = new Http();
        HttpRequest request = new HttpRequest();
        request.setEndpoint('https://api.external.com/data');
        request.setMethod('GET');
        request.setTimeout(10000); // 10 seconds - appropriate for most APIs
        HttpResponse response = http.send(request);
        return response.getBody();
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>HttpRequest Class - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexref.meta/apexref/apex_classes_restful_http_httprequest.htm">Official Salesforce documentation for the HttpRequest class and setTimeout method</a></p>
</li>
<li>
<p>Apex Governor Limits - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_gov_limits.htm">Documentation on Salesforce execution limits and best practices</a></p>
</li>
<li>
<p>HTTP Callouts Best Practices - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_callouts_http.htm">Best practices for making HTTP callouts in Apex</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-400: Uncontrolled Resource Consumption - <a href="https://cwe.mitre.org/data/definitions/400.html">Relates to resource consumption issues when timeouts are not properly configured</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>