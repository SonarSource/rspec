<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when <code>@isTest</code> annotations use <code>seeAllData=true</code> at the class or method level.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using <code>seeAllData=true</code> in test classes or methods creates dependencies on existing data in the Salesforce org, which violates the fundamental principle of test isolation.</p>
</div>
<div class="paragraph">
<p>When tests rely on existing org data, they become unreliable and unpredictable. The same test might pass in one environment but fail in another, simply because the required data exists in one org but not the other. Even worse, tests that have been working for months can suddenly start failing when someone deletes or modifies the records they depend on.</p>
</div>
<div class="paragraph">
<p>Test isolation ensures that each test is self-contained and creates its own mock data. This approach guarantees that tests will behave consistently across different environments - development, staging, and production orgs.</p>
</div>
<div class="paragraph">
<p>Additionally, there&#8217;s a technical restriction in Apex: <code>seeAllData=true</code> cannot be used when <code>@testSetup</code> methods are present in the same test class. This combination will cause a compilation error, preventing the code from being deployed.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Tests become unreliable and may fail unexpectedly when dependent org data is modified or deleted. This can block deployments and create maintenance overhead. Tests may also behave differently across environments, making it difficult to ensure consistent application behavior.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Remove <code>seeAllData=true</code> from the test method and create the necessary test data within the test method itself.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">@isTest(seeAllData=true)
static void testAccountProcessing() {
    Account acc = [SELECT Id, Name FROM Account LIMIT 1]; // Noncompliant
    // test logic using existing data
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">@isTest
static void testAccountProcessing() {
    Account acc = new Account(Name='Test Account');
    insert acc;
    Account insertedAcc = [SELECT Id, Name FROM Account LIMIT 1];
    // test logic using created data
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Apex Testing Best Practices - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_testing_best_practices.htm">Official Salesforce documentation on Apex testing best practices</a></p>
</li>
<li>
<p>Test Class Annotation - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_classes_annotation_isTest.htm">Documentation on the @isTest annotation and its parameters</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>Salesforce Best Practices - <a href="https://developer.salesforce.com/blogs/developer-relations/2015/01/apex-best-practices-15-apex-commandments.html">Industry best practices for Apex development including test isolation principles</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>