<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The use of <code>%TYPE</code> and <code>%ROWTYPE</code> is an easy way to make sure that a variable&#8217;s type always matches the type of the relevant column in an existing table. If the column type changes, then the variable changes with it.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql">CREATE FUNCTION func1(acc_no IN NUMBER)
   RETURN NUMBER
   IS total NUMBER(11,2); -- Noncompliant
   BEGIN
      SELECT order_total
      INTO total -- total is assigned here: it could be defined as orders.order_total%TYPE
      FROM orders
      WHERE customer_id = acc_no;
      RETURN(total);
    END;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql">CREATE FUNCTION func1(acc_no IN NUMBER)
   RETURN NUMBER
   IS total orders.order_total%TYPE;
   BEGIN
      SELECT order_total
      INTO total
      FROM orders
      WHERE customer_id = acc_no;
      RETURN(total);
   END;</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Use "[%TYPE|%ROWTYPE]" here.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s1703">relates to: <a data-rspec-id="S1703" class="rspec-auto-link">S1703</a></h3>

</div>
<div class="sect2">
<h3 id="_on_10_jan_2017_175840_ann_campbell_wrote">on 10 Jan 2017, 17:58:40 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Note that this RSpec is an almost exact inverse of <a data-rspec-id="S1703" class="rspec-auto-link">RSPEC-1703</a>. The difference between them, and the reason to have both, is Oracle Forms. With Forms in play, <a data-rspec-id="S1703" class="rspec-auto-link">RSPEC-1703</a> should be used. Without it/them, this is the rule that&#8217;s preferred.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_19_jan_2017_111539_pierre_yves_nicolas_wrote">on 19 Jan 2017, 11:15:39 Pierre-Yves Nicolas wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I think that this rule would trigger a lot of noise if it&#8217;s defined like that.</p>
</div>
<div class="paragraph">
<p>I think that using "%TYPE" and "%ROWTYPE" is not always possible. For example, if a variable is used as a counter, it would not refer to any column.</p>
</div>
<div class="paragraph">
<p>I would restrict that rule to cases where we are sure that the variable can be defined with "%TYPE" or "%ROWTYPE" and that probably requires SQL queries.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_19_jan_2017_123128_pierre_yves_nicolas_wrote">on 19 Jan 2017, 12:31:28 Pierre-Yves Nicolas wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] Following my previous comment, I don&#8217;t think we can raise issues on package specifications because we need to know how the variable is used. As a first step, maybe we should only target variables which are assigned in a <code>SELECT...INTO</code>. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CREATE FUNCTION func1(acc_no IN NUMBER)
   RETURN NUMBER
   IS total NUMBER(11,2); -- Noncompliant
   BEGIN
      SELECT order_total
      INTO total -- total is assigned here: it could be defined as orders.order_total%TYPE
      FROM orders
      WHERE customer_id = acc_no;
      RETURN(total);
    END;
/</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_on_23_jan_2017_092922_ann_campbell_wrote">on 23 Jan 2017, 09:29:22 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~pierre-yves.nicolas] I&#8217;ve updated the title and the code samples. Please double-check that I&#8217;ve converted the Compliant Solution correctly</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_23_jan_2017_093438_pierre_yves_nicolas_wrote">on 23 Jan 2017, 09:34:38 Pierre-Yves Nicolas wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] Looks good to me.</p>
</div>
</div>
</div>
</div>