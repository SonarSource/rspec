<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when test methods use SOQL queries to fetch existing organizational data instead of creating their own test data.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Test classes that rely on existing organizational data create unreliable and environment-dependent tests. When tests query for existing records using SOQL statements like <code>[SELECT Id FROM Account LIMIT 1]</code>, they assume that specific data already exists in the org.</p>
</div>
<div class="paragraph">
<p>This approach leads to several problems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Test fragility</strong>: Tests may pass in one environment but fail in another if the expected data doesn&#8217;t exist</p>
</li>
<li>
<p><strong>Unpredictable results</strong>: Tests might behave differently based on what data happens to be present</p>
</li>
<li>
<p><strong>Maintenance burden</strong>: Changes to org data can break tests that have nothing to do with the code being modified</p>
</li>
<li>
<p><strong>Poor test isolation</strong>: Tests become interdependent on external state rather than being self-contained</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Reliable unit tests follow the principle of test isolation - each test should create exactly the data it needs and not depend on any pre-existing state. This ensures tests are predictable, maintainable, and can run successfully in any environment.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Tests that depend on existing org data are unreliable and may fail unexpectedly when deployed to different environments or when org data changes. This reduces confidence in the test suite and can lead to deployment failures or missed bugs in production.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace SOQL queries that fetch existing data with code that creates the required test data. Use the <code>new</code> keyword to create objects and <code>insert</code> them if needed for your test logic.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">@isTest
public class MyTestClass {
    @isTest
    static void testAccountProcessing() {
        Account acc = [SELECT Id, Name FROM Account LIMIT 1]; // Noncompliant
        // test logic using existing data
        processAccount(acc.Id);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">@isTest
public class MyTestClass {
    @isTest
    static void testAccountProcessing() {
        Account acc = new Account(Name='Test Account');
        insert acc;
        // test logic using created data
        processAccount(acc.Id);
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Apex Testing Best Practices - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_testing_best_practices.htm">Official Salesforce documentation on Apex testing best practices including test data creation</a></p>
</li>
<li>
<p>Test Data Creation in Apex - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_testing_utility_classes.htm">Salesforce guide on creating test data and utility classes for testing</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>