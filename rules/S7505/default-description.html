<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when a collection is created with the use of a <code>lambda</code> function inside of <code>map()</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>map()</code> function applies a given function to each item of an iterable.
When this function is a <code>lambda</code>, especially a simple one, the resulting code can sometimes be less readable than its comprehension or generator expression equivalent.
For example:
A comprehension like <code>[x * 2 for x in nums]</code> is more straightforward to read and understand at a glance than <code>list(map(lambda x: x * 2, nums))</code>.
The logic is more self-contained and doesn&#8217;t require mentally parsing the <code>map</code> and <code>lambda</code> separately.</p>
</div>
<div class="paragraph">
<p>Using <code>map()</code> could also have an impact on performance. While <code>map()</code> can be very efficient when used with built-in functions or pre-defined functions written in C,
the use of a Python <code>lambda</code> introduces function call overhead for each element in the iterable.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To fix this issue replace the <code>map(lambda &#8230;&#8203;)</code> construct with an equivalent generator expression or a list, set, or dictionary comprehension.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace <code>map(lambda var: expression, iterable)</code> with the generator expression <code>(expression for var in iterable)</code>.</p>
</li>
<li>
<p>Replace <code>list(map(lambda var: expression, iterable))</code> with the list comprehension <code>[expression for var in iterable]</code>.</p>
</li>
<li>
<p>Replace <code>set(map(lambda var: expression, iterable))</code> with the set comprehension <code>{expression for var in iterable}</code>.</p>
</li>
<li>
<p>Replace <code>dict(map(lambda var: (key_expr, value_expr), iterable))</code> with the dictionary comprehension <code>{key_expr: value_expr for var in iterable}</code> .</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">nums = [1, 2, 3, 4]

list_map = list(map(lambda num: num * 2, nums)) # Noncompliant: the map and lambda function can be replaced by a list-comprehension</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">nums = [1, 2, 3, 4]

list_comp = [num * 2 for num in nums] # Compliant</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Python Documentation - <a href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions">List Comprehensions</a></p>
</li>
<li>
<p>Python Documentation - <a href="https://docs.python.org/3/tutorial/classes.html#generator-expressions">Generator Expressions</a></p>
</li>
<li>
<p>Python Documentation - <a href="https://docs.python.org/3/library/functions.html#map">map()</a></p>
</li>
<li>
<p>Python Documentation - <a href="https://docs.python.org/3/reference/expressions.html#lambda">Lambdas</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_details">Implementation details</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We should detect calls to map(lambda, iterable)
We do not need to detect complex cases such as filtering of lambda.
We do not need to detect lambdas that are assigned to a var.
We do not need to detect tuple(map(lambda, iterable)).</p>
</div>
<div class="sect2">
<h3 id="_highlight">Highlight</h3>
<div class="paragraph">
<p>The <code>map</code> call and the <code>lambda</code> keyword.</p>
</div>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Replace this lambda function with its generator equivalent.</p>
</div>
</div>
</div>
</div>