:package-manager: Swift Package Manager

include::../description.adoc[]

include::../ask-yourself.adoc[]

== Recommended Secure Coding Practices

Swift Package Manager automatically creates a lock file named ``++Package.resolved++``. You should commit this file to your source code repository.

== Sensitive Code Example

Your project's ``++Package.swift++`` file might define a dependency with a version range.
[source,swift]
----
let package = Package(
    name: "Example",
    dependencies: [
        .package(url: "https://example.com/library.git", from: "1.2.3"),
    ],
    targets: [
        .target(
            name: "Example",
            dependencies: ["library"]),
    ]
)
----

Absence of a ``++Package.resolved++`` file in your project will fail to garanty that continuous integration systems and other developers on your team use the exact same version of the dependency.

== Compliant Solution

After you build the project for the first time, Swift Package Manager will resolve the dependencies and create a ``++Package.resolved++`` file. This file contains a reference to the specific commit hash of the version that was downloaded.

[source,swift]
----
let package = Package(
    name: "Example",
    dependencies: [
        .package(url: "https://example.com/library.git", from: "1.2.3"),
    ],
    targets: [
        .target(
            name: "Example",
            dependencies: ["library"]),
    ]
)
----

[source,json]
----
{
  "object": {
    "pins": [
      {
        "package": "library",
        "repositoryURL": "https://example.com/library.git",
        "state": {
          "branch": null,
          "revision": "a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4",
          "version": "1.2.5"
        }
      }
    ]
  },
  "version": 1
}
----

Run ``++swift package update++`` when you need to update a dependency to a newer version. This command finds the latest versions allowed by the ranges in your ``++Package.swift++`` file and updates the ``++Package.resolved++`` file accordingly. After running the command, review the changes to `Package.resolved` and then commit the updated file to your repository. This makes the update a deliberate and traceable action.

include::../see.adoc[]
