<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when the same property name appears multiple times in a Grails domain class <code>constraints</code> block.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Grails domain classes, the <code>constraints</code> block defines validation rules and database mapping constraints for properties. While Grails allows duplicate constraint names syntactically, this practice creates several problems.</p>
</div>
<div class="paragraph">
<p>When you define the same property constraint multiple times, only the last definition takes effect. This behavior can be confusing and error-prone, especially in larger constraint blocks where duplicates might not be immediately obvious.</p>
</div>
<div class="paragraph">
<p>Duplicate constraints often indicate:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copy-paste errors during development</p>
</li>
<li>
<p>Incomplete refactoring where old constraints weren&#8217;t removed</p>
</li>
<li>
<p>Lack of awareness about existing constraints</p>
</li>
<li>
<p>Team collaboration issues where multiple developers modify the same constraints</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This pattern makes the code harder to maintain and understand. Future developers (including yourself) may waste time trying to understand why certain constraints don&#8217;t seem to work, not realizing they&#8217;ve been overridden by later duplicates.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Duplicate constraints can lead to unexpected validation behavior where intended constraints are silently overridden. This may result in data integrity issues if stricter constraints are replaced by more lenient ones, or user experience problems if validation rules don&#8217;t work as expected. The confusion caused by duplicates can also slow down development and debugging efforts.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Remove the duplicate constraint definition and consolidate all constraints for each property into a single entry. If you need to modify existing constraints, update the original definition rather than adding a new one.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String firstName
    String lastName

    static constraints = {
        firstName nullable: true
        lastName nullable: true, maxSize: 30
        firstName nullable: false // Noncompliant
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String firstName
    String lastName

    static constraints = {
        firstName nullable: false
        lastName nullable: true, maxSize: 30
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Grails Validation Documentation - <a href="https://docs.grails.org/latest/guide/validation.html">Official Grails documentation on validation and constraints</a></p>
</li>
<li>
<p>Grails Domain Classes Guide - <a href="https://docs.grails.org/latest/guide/GORM.html#domainClasses">Comprehensive guide to Grails domain classes and their configuration</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p>GrailsDuplicateMapping - <a href="https://codenarc.org/codenarc-rules-grails.html#grailsduplicatemapping-rule">Detects duplicate names in Grails domain class mapping blocks</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>