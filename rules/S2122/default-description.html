<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>ThreadPoolExecutor</code> is an object that efficiently manages and controls the execution of multiple tasks in a thread pool.
A thread pool is a collection of pre-initialized threads ready to execute tasks.
Instead of creating a new thread for each task, which can be costly in terms of system resources, a thread pool reuses existing threads.</p>
</div>
<div class="paragraph">
<p><code>java.util.concurrent.ScheduledThreadPoolExecutor</code> is an extension of <code>ThreadPoolExecutor</code> that can additionally schedule commands to run
after a given delay or to execute periodically.</p>
</div>
<div class="paragraph">
<p><code>ScheduledThreadPoolExecutor</code> 's pool is sized with <code>corePoolSize</code>, so setting <code>corePoolSize</code> to zero means the executor will have no
threads and run nothing. <code>corePoolSize</code> should have a value greater than zero and valid for your tasks.</p>
</div>
<div class="paragraph">
<p>This rule detects instances where <code>corePoolSize</code> is set to zero via its setter or the object constructor.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void do(){

  int poolSize = 5; // value greater than 0

  ScheduledThreadPoolExecutor threadPool1 = new ScheduledThreadPoolExecutor(0); // Noncompliant

  ScheduledThreadPoolExecutor threadPool2 = new ScheduledThreadPoolExecutor(poolSize);
  threadPool2.setCorePoolSize(0);  // Noncompliant
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ScheduledThreadPoolExecutor.html">Oracle Java SE - ScheduledThreadPoolExecutor</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_articles_blog_posts">Articles &amp; blog posts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://engineering.zalando.com/posts/2019/04/how-to-set-an-ideal-thread-pool-size.html">Zalando - How to set an ideal thread pool size</a></p>
</li>
<li>
<p><a href="https://www.baeldung.com/java-threadpooltaskexecutor-core-vs-max-poolsize">Baeldung - ThreadPoolTaskExecutor corePoolSize vs. maxPoolSize</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Increase the "corePoolSize".</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_8_oct_2014_191256_ann_campbell_wrote">on 8 Oct 2014, 19:12:56 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~nicolas.peru] after writing this rule up, I noticed that its analog is commented-out:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>/**</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Since you can change the number of core threads for a scheduled</p>
</li>
<li>
<p>thread pool executor, disabling this for now
*</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So&#8230;&#8203; what do you think of a smarter implementation (I&#8217;d have to update the description) that detects when it&#8217;s set to zero &amp; left that way?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_21_oct_2014_154715_nicolas_peru_wrote">on 21 Oct 2014, 15:47:15 Nicolas Peru wrote:</h3>
<div class="paragraph">
<p>This is way harder. The "left that way" part can concern a lot of code not under analysis scope.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_21_oct_2014_200132_ann_campbell_wrote">on 21 Oct 2014, 20:01:32 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Do you feel the rule has value as-is or should we scrap it as was done in FB?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_4_feb_2015_085904_nicolas_peru_wrote">on 4 Feb 2015, 08:59:04 Nicolas Peru wrote:</h3>
<div class="paragraph">
<p>Let&#8217;s reimplement it as what was done in FB. Scheduled for 3.0.</p>
</div>
</div>
</div>
</div>