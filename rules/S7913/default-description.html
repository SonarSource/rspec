<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when <code>DateTime.strptime</code> or <code>Time.strptime</code> methods are used without timezone specifiers in the format string.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When parsing date strings without explicit timezone information, Ruby&#8217;s <code>strptime</code> methods create time objects that may not represent the intended moment in time. This happens because these methods make assumptions about the timezone when none is specified.</p>
</div>
<div class="paragraph">
<p>For example, <code>DateTime.strptime("10-26-2011 10:16:29", "%m-%d-%Y %H:%M:%S")</code> creates a DateTime object in the system&#8217;s local timezone, but the original string might have been intended to represent a time in a different timezone.</p>
</div>
<div class="paragraph">
<p>This ambiguity becomes particularly problematic in applications that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Serve users across multiple timezones</p>
</li>
<li>
<p>Process data from different geographical locations</p>
</li>
<li>
<p>Store or transmit time information between systems</p>
</li>
<li>
<p>Handle user input where the timezone context is important</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The issue is often subtle and may not be immediately apparent during development, especially if developers and users are in the same timezone. However, it can cause serious problems in production when the application is used globally.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Incorrect time interpretation can lead to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Scheduling errors in applications (meetings, reminders, deadlines)</p>
</li>
<li>
<p>Data corruption when times are stored or transmitted incorrectly</p>
</li>
<li>
<p>Business logic failures in time-sensitive operations</p>
</li>
<li>
<p>Poor user experience when displayed times don&#8217;t match user expectations</p>
</li>
<li>
<p>Compliance issues in systems that require accurate time tracking</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Include timezone information in the format string when parsing dates. This ensures the parsed time represents the correct moment regardless of the system&#8217;s local timezone.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># Parsing without timezone - ambiguous result
DateTime.strptime("10-26-2011 10:16:29", "%m-%d-%Y %H:%M:%S") // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># Include timezone in format string
DateTime.strptime("10-26-2011 10:16:29 CET", "%m-%d-%Y %H:%M:%S %Z")</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it_in_rails">How to fix it in Rails</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Rails applications, use <code>Time.zone.strptime</code> or wrap parsing in a timezone block to ensure consistent timezone handling within the application&#8217;s configured timezone.</p>
</div>
<div class="sect2">
<h3 id="_code_examples_2">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># Rails app parsing without timezone context
DateTime.strptime(user_input, "%m/%d/%Y %H:%M") // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># Use Rails timezone-aware parsing
Time.zone.strptime(user_input, "%m/%d/%Y %H:%M")

# Or use timezone block
Time.use_zone("US/Eastern") do
  Time.zone.strptime(user_input, "%m/%d/%Y %H:%M")
end</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Ruby DateTime.strptime Documentation - <a href="https://ruby-doc.org/stdlib-3.0.0/libdoc/date/rdoc/DateTime.html#method-c-strptime">Official Ruby documentation for DateTime.strptime method</a></p>
</li>
<li>
<p>Ruby Time.strptime Documentation - <a href="https://ruby-doc.org/core-3.0.0/Time.html#method-c-strptime">Official Ruby documentation for Time.strptime method</a></p>
</li>
<li>
<p>Rails Time Zone Handling Guide - <a href="https://guides.rubyonrails.org/active_support_core_extensions.html#time-zones">Rails guide on working with time zones in applications</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>ISO 8601 - <a href="https://en.wikipedia.org/wiki/ISO_8601">International standard for date and time representation including timezone information</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>