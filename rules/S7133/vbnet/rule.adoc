include::../description-dotnet.adoc[]

=== Code examples

==== Noncompliant code example

[source,csharp,diff-id=1,diff-type=noncompliant]
----
Public Class Example

    Private Shared rwLock As New ReaderWriterLock

    Public Sub AcquireWriterLock()
        rwLock.AcquireWriterLock(2000)  ' Noncompliant, As the lock release Is On the callers responsibility
    End Sub

    Public Sub DoSomething()
        ' ...
    End Sub

    Public Sub ReleaseWriterLock()
        rwLock.ReleaseWriterLock()
    End Sub

End Class
----

==== Compliant solution

[source,csharp,diff-id=1,diff-type=compliant]
----
Public Class Example

    Private Shared rwLock As New ReaderWriterLock

    Public Sub DoSomething()
        rwLock.AcquireWriterLock(2000)  ' Compliant, locks are released in the same method
        Try
            ' ...
        Finally
            rwLock.ReleaseWriterLock()
        End Try
    End Sub

End Class
----

include::../resources-dotnet.adoc[]

include::../rspecator.adoc[]