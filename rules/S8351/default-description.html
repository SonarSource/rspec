<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an issue when <code>input</code> statements are used within agent blocks or without timeout configuration in Jenkins pipelines.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jenkins <code>input</code> statements pause pipeline execution to wait for manual or automated approval. This waiting period can cause significant resource waste and pipeline reliability issues.</p>
</div>
<div class="paragraph">
<p>When an <code>input</code> statement is placed within an agent block, it locks both the workspace and a heavyweight Jenkins executor during the entire approval waiting period. Jenkins executors are limited resources that should be available for actual build work, not sitting idle waiting for human approval. This can lead to resource starvation where other builds queue up waiting for executors that are unnecessarily locked.</p>
</div>
<div class="paragraph">
<p>Without timeout configuration, <code>input</code> statements can cause pipelines to hang indefinitely if the required approval never comes. This might happen when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The approver is unavailable or forgets to respond</p>
</li>
<li>
<p>The approval notification is missed or lost</p>
</li>
<li>
<p>There are communication issues in the approval system</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These hanging pipelines consume resources indefinitely and can accumulate over time, eventually exhausting available executors and causing the entire Jenkins system to become unresponsive.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Resource exhaustion can occur when multiple pipelines with improperly configured input statements consume all available Jenkins executors. This leads to build queues backing up and delayed deployments.</p>
</div>
<div class="paragraph">
<p>Pipelines may hang indefinitely without timeout configuration, requiring manual intervention to clean up stuck builds. In severe cases, this can cause the entire Jenkins system to become unresponsive, affecting all development teams.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Move input statements outside of agent blocks and wrap them with timeout blocks. Place input statements in stages without agents, then use separate stages with agents for the actual work that requires executors.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">pipeline {
    agent any
    stages {
        stage('Deploy') {
            steps {
                input message: 'Deploy to production?' // Noncompliant
                sh 'deploy.sh'
            }
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">pipeline {
    stages {
        stage('Approval') {
            steps {
                timeout(time: 5, unit: 'MINUTES') {
                    input message: 'Deploy to production?'
                }
            }
        }
        stage('Deploy') {
            agent any
            steps {
                sh 'deploy.sh'
            }
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Jenkins Pipeline Best Practices - <a href="https://www.cloudbees.com/blog/best-practices-for-jenkins-pipeline">CloudBees guide covering Jenkins Pipeline best practices including proper input statement usage</a></p>
</li>
<li>
<p>Jenkins Pipeline Syntax - Input Step - <a href="https://www.jenkins.io/doc/pipeline/steps/pipeline-input-step/">Official Jenkins documentation for the input pipeline step</a></p>
</li>
<li>
<p>Jenkins Pipeline Syntax - Timeout Step - <a href="https://www.jenkins.io/doc/pipeline/steps/workflow-basic-steps/#timeout-enforce-time-limit">Official Jenkins documentation for the timeout pipeline step</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>