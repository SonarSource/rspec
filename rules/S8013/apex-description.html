<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when exception methods that can return null (like <code>getCause()</code>) are concatenated into strings without null checks.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When building exception detail strings for logging or error reporting, developers often concatenate various exception method results to create comprehensive error messages. However, some exception methods like <code>getCause()</code> can return null values.</p>
</div>
<div class="paragraph">
<p>When null values are concatenated with strings in Apex, they are converted to the literal string "null". This creates several problems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Poor log readability</strong>: Error logs contain confusing "null" text instead of meaningful information</p>
</li>
<li>
<p><strong>Debugging difficulties</strong>: The literal "null" string makes it harder to distinguish between actual null values and the string representation</p>
</li>
<li>
<p><strong>Unprofessional appearance</strong>: Error messages shown to users may contain "null" text, appearing unprofessional</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, if an exception has no cause, <code>e.getCause()</code> returns null. Concatenating this directly results in log entries like "null ; 15 ; Division by zero" instead of a cleaner format.</p>
</div>
<div class="paragraph">
<p>This issue is particularly common in exception handling utilities where developers try to capture comprehensive error information by concatenating multiple exception properties.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>This issue reduces the effectiveness of error logging and debugging. While not a security vulnerability, it can make troubleshooting production issues more difficult and time-consuming. Poor error messages can also impact user experience if these strings are displayed to end users.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add null checks before concatenating exception method results. Use conditional operators or if-else statements to provide meaningful alternatives when values are null.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">String exdetails = e.getCause() + ' ; ' + e.getLineNumber() + ' ; ' + e.getMessage(); // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">String exdetails = (e.getCause() != null ? e.getCause().toString() : '') + ' ; ' + e.getLineNumber() + ' ; ' + e.getMessage();</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Apex Exception Class - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexref.meta/apexref/apex_classes_exception_methods.htm">Official Salesforce documentation for Exception class methods</a></p>
</li>
<li>
<p>Apex String Methods - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexref.meta/apexref/apex_methods_system_string.htm">Documentation for Apex String class methods including valueOf()</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>