<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A CPU limitation for a container is a specified boundary or restriction that
determines the maximum amount of CPU resources that a container can utilize. It
is a part of resource management in a containerized environment, and it is set
to ensure that a single container does not monopolize the CPU resources of the
host machine.</p>
</div>
<div class="paragraph">
<p>CPU limitations are important for maintaining a balanced and efficient system.
They help in distributing resources fairly among different containers, ensuring
that no single container can cause a system-wide slowdown by consuming more than
its fair share of CPU resources.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="sect3">
<h4 id="_performance_degradation">Performance degradation</h4>
<div class="paragraph">
<p>Without CPU limitations, a single container could monopolize all available CPU
resources, leading to a system-wide slowdown. Other containers or processes on
the same host might be deprived of the necessary CPU resources, causing them to
function inefficiently.</p>
</div>
</div>
<div class="sect3">
<h4 id="_system_instability">System instability</h4>
<div class="paragraph">
<p>In extreme cases, a container with no CPU limit could cause the host machine to
become unresponsive. This can lead to system downtime and potential loss of
data, disrupting critical operations and impacting system reliability.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="paragraph">
<p>To avoid potential issues, either specify a CPU limit for each container or create a resource of type <code>LimitRange</code> that sets a default CPU limit for all containers in a namespace.</p>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: example
spec:
  containers:
    - name: web # Noncompliant
      image: nginx</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: nginx-ns-noncompliant
spec:
  containers:
    - name: nginx-ns-noncompliant # Noncompliant
      image: nginx</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: example
spec:
  containers:
    - name: web
      image: nginx
      resources:
        limits:
          cpu: 0.5</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: LimitRange
metadata:
  name: cpu-limit-range
  namespace: default-cpu-example
spec:
  limits:
  - default:
      cpu: 0.5
    type: Container
---
apiVersion: v1
kind: Pod
metadata:
  name: nginx-ns-compliant
  namespace: default-cpu-example
spec:
  containers:
  - name: nginx-ns-compliant
    image: nginx</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_does_this_work">How does this work?</h3>
<div class="paragraph">
<p>A limit can be set through the property <code>resources.limits.cpu</code> of a
container. Alternatively, a default limit for a namespace can be set with
<code>LimitRange</code> through <code>spec.limits[].default.cpu</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Kubernetes Documentation - <a href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/">Resource Management for Pods and Containers</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE - <a href="https://cwe.mitre.org/data/definitions/770">CWE-770 - Allocation of Resources Without Limits or Throttling</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Specify a CPU limit for this container.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="ulist">
<ul>
<li>
<p>Highlight the key of the first child of the container that does not specify a CPU limit.</p>
</li>
</ul>
</div>
</div>
</div>
</div>