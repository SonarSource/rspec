<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when URLs are hardcoded as string literals in Apex code, whether they are Salesforce instance URLs or external service endpoints.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hardcoded URLs in Apex code create several problems that affect maintainability, security, and reliability.</p>
</div>
<div class="paragraph">
<p>When URLs are embedded directly in the code as string literals, they become difficult to manage across different environments. Development, staging, and production environments often use different endpoints, and hardcoded URLs require code changes to switch between them.</p>
</div>
<div class="paragraph">
<p>For Salesforce instance URLs specifically, hardcoding creates a critical issue with My Domain enforcement. Salesforce is phasing out legacy host names and requiring all API calls to use My Domain URLs. Hardcoded instance URLs like <code>na1.salesforce.com</code> will break when My Domain enforcement is applied, causing API failures and integration issues.</p>
</div>
<div class="paragraph">
<p>External service URLs present additional challenges. Hardcoded external endpoints make it difficult to implement proper security controls, rotate API endpoints, or manage different service configurations across environments. They also make the code less flexible and harder to test with mock services.</p>
</div>
<div class="paragraph">
<p>From a security perspective, hardcoded URLs can expose sensitive endpoints in the source code and make it harder to implement centralized URL management and monitoring.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Applications may break when Salesforce enforces My Domain requirements, causing API failures and integration issues. Hardcoded external URLs reduce flexibility in managing different environments and make it difficult to implement proper security controls or rotate endpoints when needed.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For Salesforce instance URLs, use the URL.getOrgDomainUrl() method to dynamically construct URLs that work with My Domain enforcement.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">String endpoint = 'https://na1.salesforce.com/services/data/v58.0/sobjects/Account'; // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">String endpoint = URL.getOrgDomainUrl().toExternalForm() + '/services/data/v58.0/sobjects/Account';</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>URL Class Methods - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexref.meta/apexref/apex_methods_system_url.htm">Salesforce documentation for URL class methods including getOrgDomainUrl()</a></p>
</li>
<li>
<p>Named Credentials - <a href="https://help.salesforce.com/s/articleView?id=sf.named_credentials_about.htm">Guide to using Named Credentials for secure external service integration</a></p>
</li>
<li>
<p>Custom Labels - <a href="https://help.salesforce.com/s/articleView?id=sf.cl_about.htm">Documentation on using Custom Labels for configuration values</a></p>
</li>
<li>
<p>My Domain Enforcement - <a href="https://help.salesforce.com/s/articleView?id=sf.domain_name_overview.htm">Information about My Domain requirements and enforcement</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-547: Use of Hard-coded, Security-relevant Constants - <a href="https://cwe.mitre.org/data/definitions/547.html">Weakness related to hardcoding security-relevant constants in source code</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S1075" class="rspec-auto-link">S1075</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>