This rule flags code that uses `JSON.parse(JSON.stringify())` or library functions like `_.cloneDeep()` to create deep clones of objects.

== Why is this an issue?

`structuredClone()` is the modern, standardized way to create deep clones in JavaScript. It's part of the web platform and provides several advantages over alternative approaches.

The `JSON.parse(JSON.stringify())` pattern has significant limitations. It cannot handle functions, undefined values, symbols, or Date objects correctly. It also fails with circular references and loses prototype information.

Library-based solutions like `_.cloneDeep()` work correctly but add external dependencies to your project. They increase bundle size and create maintenance overhead.

`structuredClone()` handles these cases properly. It supports a wide range of data types including Date objects, RegExp, Maps, Sets, and even handles circular references. It's also faster than JSON-based approaches and doesn't require external libraries.

=== What is the potential impact?

Using inferior cloning methods can lead to subtle bugs when the cloned objects don't behave as expected. The JSON approach can silently corrupt data by dropping properties or changing types. External libraries increase bundle size and create dependency management overhead.

=== How to fix?


Replace `JSON.parse(JSON.stringify())` with `structuredClone()`. This provides proper deep cloning without the limitations of JSON serialization.

==== Non-compliant code example

[source,javascript,diff-id=1,diff-type=noncompliant]
----
const clone = JSON.parse(JSON.stringify(originalObject)); // Noncompliant
----

==== Compliant code example

[source,javascript,diff-id=1,diff-type=compliant]
----
const clone = structuredClone(originalObject);
----

=== Documentation

* https://github.com/sindresorhus/eslint-plugin-unicorn#readme[eslint-plugin-unicorn] - Rule https://github.com/sindresorhus/eslint-plugin-unicorn/blob/HEAD/docs/rules/prefer-structured-clone.md[prefer-structured-clone]
 * MDN: structuredClone() - https://developer.mozilla.org/en-US/docs/Web/API/structuredClone[Official documentation for the structuredClone() API]
 * MDN: Structured Clone Algorithm - https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm[Details about the structured clone algorithm and supported data types]

