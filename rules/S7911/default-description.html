<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when the <code>private</code> keyword is used before public method definitions in a Ruby class, or when private methods are scattered throughout the class instead of being grouped at the end.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Ruby, the <code>private</code> keyword affects all methods defined after it within the same class. This behavior is different from many other programming languages where visibility is declared per method.</p>
</div>
<div class="paragraph">
<p>When <code>private</code> is placed in the middle of a class definition, any methods defined after it become private, even if they were intended to be public. This can lead to several problems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Runtime errors</strong>: In Rails applications, controller actions that accidentally become private will not be accessible via HTTP routes, causing <code>AbstractController::ActionNotFound</code> errors.</p>
</li>
<li>
<p><strong>Broken public APIs</strong>: Methods that should be part of the class&#8217;s public interface become inaccessible to other parts of the application.</p>
</li>
<li>
<p><strong>Debugging difficulties</strong>: The error messages may not clearly indicate that the issue is related to method visibility.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Ruby community convention is to place all private methods at the bottom of the class definition under a single <code>private</code> declaration. This creates a clear separation between the public interface (what the class exposes to other code) and the implementation details (private helper methods).</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>When public methods are accidentally made private, it can cause runtime failures in production applications. In Rails controllers, this typically results in routing errors where users receive 404 or 500 errors when trying to access pages. The impact can be severe if critical functionality becomes inaccessible, and debugging can be time-consuming since the error may not clearly indicate the root cause is method visibility.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Move all private methods to the end of the class and group them under a single <code>private</code> declaration. This ensures that all public methods remain accessible and creates a clear separation between the public interface and implementation details.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class C

  private # Noncompliant: Private methods should be declared at the end of the class.

  def private_method
  end

  public

  def public_method
  end
end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class C

  def public_method
  end

  private # Compliant

  def private_method
  end
end</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Ruby Documentation - Method Visibility - <a href="https://ruby-doc.org/core/doc/syntax/methods_rdoc.html#label-Method+Visibility">Official Ruby documentation explaining how private, protected, and public method visibility works</a></p>
</li>
<li>
<p>Ruby Style Guide - Method Visibility - <a href="https://rubystyle.guide/#consistent-classes">Community style guide recommendations for organizing class methods and visibility</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>Ruby Style Guide - Class Organization - <a href="https://rubystyle.guide/#consistent-classes">Established conventions for organizing Ruby class definitions</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>