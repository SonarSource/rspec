<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mixing (non-const) <code>public</code> and <code>private</code> data members is a bad practice because it confuses the intention of the class:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the class is a collection of loosely related values, all the data members should be <code>public</code>.</p>
</li>
<li>
<p>On the other hand, if the class is trying to maintain an invariant, all the data members should be <code>private</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If we mix data members with different levels of accessibility, we lose clarity as to the purpose of the class.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class MyClass { // Noncompliant
public:
  int firstNumber1() const { return firstNumber; }
  void setFirstNumber(int firstNumber) { this-&gt;firstNumber = firstNumber; }
  int secondNumber = 2;
private:
  int firstNumber = 1;
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class MyClass { // Depending on the case, the solution might be different. Here, since this class does not enforce any invariant, we make all the data members public
public:
  int firstNumber;
  int secondNumber;
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>Since <code>const</code> data members cannot be modified, it&#8217;s not breaking encapsulation to make a const value public, even in a class that enforces an invariant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class MyClass { // Compliant by exception
public:
  const int constNumber = 0; // const data members are fine
private:
  int number = 1;
};</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Wikipedia - <a href="https://en.wikipedia.org/wiki/Class_invariant">Class invariant</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_external_coding_guidelines">External coding guidelines</h3>
<div class="ulist">
<ul>
<li>
<p>C++ Core Guidelines - <a href="https://github.com/isocpp/CppCoreGuidelines/blob/e49158a/CppCoreGuidelines.md#c134-ensure-all-non-const-data-members-have-the-same-access-level">C.134: Ensure all non-<code>const</code> data members have the same access level</a></p>
</li>
<li>
<p>C++ Core Guidelines - <a href="https://github.com/isocpp/CppCoreGuidelines/blob/e49158a/CppCoreGuidelines.md#c9-minimize-exposure-of-members">C.9: Minimize exposure of members</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>"Don&#8217;t mix public and private data members."</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>Primary: the name of the class.</p>
</div>
<div class="paragraph">
<p>Secondaries: one public and one private data member.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_9_sep_2019_202412_ann_campbell_wrote">on 9 Sep 2019, 20:24:12 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~loic.joly] and [~abbas.sabra] first, this rule title does not conform to our "X should [not] Y" standard.</p>
</div>
<div class="paragraph">
<p>Second, is this rule about having in the same class members that are both non-<code>const</code> and <code>public</code> along with members that are <code>private</code> with whatever <code>const</code>-ness? Because it is not clear to me from the title and description.</p>
</div>
<div class="paragraph">
<p>In fact, after multiple readings and some cogitation I think this is about having modifiable, <code>public</code> members in a class with &#8230;&#8203; <em>anything</em> else in it? Because if I can modify the public members directly then what&#8217;s the point of having methods? They certainly won&#8217;t be able to notice/act on changes to the public members.</p>
</div>
<div class="paragraph">
<p>And finally, I suggest the 2ndary locations highlight every public non-<code>const</code> member, not just one of them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_sep_2019_095218_loïc_joly_wrote">on 10 Sep 2019, 09:52:18 Loïc Joly wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I would say non-const public data members are fine is we mix them with const public data members and public member functions, but nothing else. Protected/private functions would not harm, but would probably not be very useful. So I&#8217;m not sure about detecting them. It&#8217;s hard to find a title that is not too long&#8230;&#8203; I even considered using the simpler (and less accurate) title "a class should not contain both public and private data members", and talk about the public const case  as an exception. What do you think?</p>
</div>
<div class="paragraph">
<p>Some people argue for no functions in "bag-of-data" classes. But it&#8217;s not commonly accepted, since there is some value in providing some functions anyways, understanding that they will not provide encapsulation, but may still be useful:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Constructors to enforce initialization of all members</p>
</li>
<li>
<p>Utility functions, for instance to output the class on a stream, to send it to a database&#8230;&#8203;
Some of those features might be provided by free functions, but sometimes a member function makes it easier to use&#8230;&#8203;</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_sep_2019_135116_ann_campbell_wrote">on 10 Sep 2019, 13:51:16 Ann Campbell wrote:</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>"a class should not contain both public and private data members", and talk about the public const case as an exception. What do you think?</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>I think this is a reasonable option altho it should be pluralized: Classes should not&#8230;&#8203; Another title option is: Non-const data members should either all be public or all be private</p>
</div>
</div>
</div>
</div>