<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when a shell function does not end with an explicit <code>return</code> statement.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Shell functions should end with explicit <code>return</code> statements to make their completion clear and provide proper exit status handling.</p>
</div>
<div class="paragraph">
<p>When a function doesn&#8217;t have an explicit <code>return</code> statement, it implicitly returns the exit status of the last command executed. This behavior can be unpredictable and makes the function&#8217;s intent unclear.</p>
</div>
<div class="paragraph">
<p>Explicit return statements serve several important purposes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Clarity of Intent</strong>: They make it obvious where and how a function terminates</p>
</li>
<li>
<p><strong>Error Handling</strong>: They allow functions to return specific exit codes (0 for success, non-zero for various error conditions)</p>
</li>
<li>
<p><strong>Consistency</strong>: They follow established shell scripting best practices and coding standards</p>
</li>
<li>
<p><strong>Debugging</strong>: They make it easier to trace function execution and identify issues</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Without explicit return statements, functions may accidentally return unexpected exit codes based on the last command&#8217;s result, potentially causing issues in calling code that checks the function&#8217;s return value.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Functions without explicit return statements can lead to unpredictable behavior when their return values are checked by calling code. This can cause:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Logic Errors</strong>: Calling code may make incorrect decisions based on unexpected return values</p>
</li>
<li>
<p><strong>Difficult Debugging</strong>: Issues may be harder to trace when function exit points are implicit</p>
</li>
<li>
<p><strong>Maintenance Problems</strong>: Future modifications to the function may inadvertently change its return behavior</p>
</li>
<li>
<p><strong>Inconsistent Code</strong>: Mixed use of explicit and implicit returns reduces code readability</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add an explicit <code>return</code> statement at the end of the function. Use <code>return 0</code> for successful completion or an appropriate non-zero value for error conditions.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">my_function() {
  local param="$1"
  echo "processing $param"
}  # Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">my_function() {
  local param="$1"
  echo "processing $param"
  return 0
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Bash Manual - Shell Functions - <a href="https://www.gnu.org/software/bash/manual/html_node/Shell-Functions.html">Official Bash manual section on shell functions and return statements</a></p>
</li>
<li>
<p>LinuxCommand.org - Bash Script Coding Style Guide - <a href="https://linuxcommand.org/lc3_adv_standards.php">Comprehensive shell scripting coding standards including function best practices</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>POSIX.1-2017 - Shell Command Language - <a href="https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_09_05">POSIX standard for shell function definitions and return statements</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>