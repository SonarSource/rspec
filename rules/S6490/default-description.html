<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>std::format</code> function and related formatting functions allow you to control how to display a value as text, including its width and precision.</p>
</div>
<div class="paragraph">
<p>For example, you can convert the number <code>3.14159</code> to a string with a minimum width of <code>10</code> and a precision of <code>2</code> using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">std::format("{:_&gt;10.2f}", 3.14159)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The format string uses:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>_</code> as the padding character</p>
</li>
<li>
<p><code>&gt;</code> to align the value to the right</p>
</li>
<li>
<p><code>10</code> to specify the width</p>
</li>
<li>
<p><code>.2</code> to specify the precision</p>
</li>
<li>
<p><code>f</code> to use the fixed decimal notation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The resulting string is <code>"______3.14"</code>.</p>
</div>
<div class="paragraph">
<p>Furthermore, there are two ways to specify the width and the precision:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Statically, by embedding the desired values in the format specification, as in the previous example.</p>
</li>
<li>
<p>Dynamically, by referring to complementary function arguments using <code>{}</code> or <code>{arg-id}</code>. The previous example becomes:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">std::format("{0:_&gt;{1}.{2}f}", 3.14159, 10, 2)</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>On the one hand, using static values is safe and predictable but not very flexible.
On the other hand, using dynamic values can result in runtime exceptions and unexpected program termination.</p>
</div>
<div class="paragraph">
<p>Specifically, a <code>std::format_error</code> exception is thrown when a dynamic value for the width or the precision specifiers is either negative or not a built-in integer.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The rule raises an issue when the width or precision specifier is not an integer.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">void example(std::string_view s, double d, int maxLen) {
  // Noncompliant: the width specifier is a floating point value.
  std::format("{0:*^{1}}", s, 5.0);
  // Compliant: the integer 5 is used instead.
  std::format("{0:*^{1}}", s, 5);

  // Noncompliant: the precision specifier is a string literal.
  std::format("{0:*^10.{1}}", d, "3");
  // Compliant: the value 3 is inlined.
  std::format("{0:*^10.3}", d);

  // Noncompliant: the width and precision specifiers are not integers.
  std::format("{0:*^{1}.{2}}", d, "12", 4.0);
  // Compliant: appropriate integer values are used.
  std::format("{0:*^{1}.{2}}", d, 12, 4);

  // Noncompliant: "d" is interpreted as the width specifier.
  std::format("{:*^{}.{}} {}", s, d, maxLen, maxLen + 2);
  // Compliant: use explicit argument index.
  std::format("{0:*^{2}.{3}} {1}", s, d, maxLen, maxLen + 2);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>C&#43;&#43; reference - <a href="https://en.cppreference.com/w/cpp/utility/format/format"><code>std::format</code></a></p>
</li>
<li>
<p>C&#43;&#43; reference - <a href="https://en.cppreference.com/w/cpp/utility/format/formatter#Standard_format_specification">standard format specification</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>