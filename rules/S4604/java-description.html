<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>"@EnableAutoConfiguration" is a convenient feature to configure the Spring Application Context by attempting to guess the beans that you are likely to need. The drawback is that it may load and configure beans the application will never use and therefore consume more CPU and RAM than really required. <code>@EnableAutoConfiguration</code> should be configured to exclude all the beans not required by the application. Alternatively, use the <code>@Import</code> annotation instead of <code>@EnableAutoConfiguration</code>, to explicitly import the useful AutoConfiguration classes.</p>
</div>
<div class="paragraph">
<p>This rule applies for <code>@SpringBootApplication</code> as well.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@SpringBootApplication
public class MyApplication {
...
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Configuration
@EnableAutoConfiguration
public class MyApplication {
...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@SpringBootApplication(exclude = {
  MultipartAutoConfiguration.class,
  JmxAutoConfiguration.class,
})
public class MyApplication {
...
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Configuration
@EnableAutoConfiguration(exclude = {
  MultipartAutoConfiguration.class,
  JmxAutoConfiguration.class,
})
public class MyApplication {
...
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Configuration
@Import({
        DispatcherServletAutoConfiguration.class,
        EmbeddedServletContainerAutoConfiguration.class,
        ErrorMvcAutoConfiguration.class,
        HttpEncodingAutoConfiguration.class,
        HttpMessageConvertersAutoConfiguration.class,
        JacksonAutoConfiguration.class,
        ServerPropertiesAutoConfiguration.class,
        PropertyPlaceholderAutoConfiguration.class,
        ThymeleafAutoConfiguration.class,
        WebMvcAutoConfiguration.class
})
public class MyApplication {
...
}</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Exclude from the auto-configuration mechanism the beans you don&#8217;t need.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_20_apr_2018_135835_alexandre_gigleux_wrote">on 20 Apr 2018, 13:58:35 Alexandre Gigleux wrote:</h3>
<div class="paragraph">
<p>Reference: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/EnableAutoConfiguration.html</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_13_jun_2018_175511_andrei_epure_wrote">on 13 Jun 2018, 17:55:11 Andrei Epure wrote:</h3>
<div class="paragraph">
<p>Could this produce many False Positives? How can we tell if there is something to exclude or not?</p>
</div>
<div class="paragraph">
<p>At least in <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-auto-configuration.html#using-boot-disabling-specific-auto-configuration">the official docs</a>, there&#8217;s no recommendation to exclude. It&#8217;s done on a per-need basis, and that need is quite context-specific&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_13_jun_2018_180225_alexandre_gigleux_wrote">on 13 Jun 2018, 18:02:25 Alexandre Gigleux wrote:</h3>
<div class="paragraph">
<p>This rule was inspired by https://www.alexecollins.com/spring-boot-performance/</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_14_mar_2021_103046_stéphane_nicoll_wrote">on 14 Mar 2021, 10:30:46 Stéphane Nicoll wrote:</h3>
<div class="paragraph">
<p>Hello,</p>
</div>
<div class="paragraph">
<p>Spring Boot developer here. The way the rule is described is quite misleading IMO, I&#8217;d be curious to understand what led you (besides that blog post) to do this.</p>
</div>
<div class="paragraph">
<p>This rule sounds like it is a mistake to have a Spring Boot application with <code>@SpringBootApplication. </code>It is the general recommended approach for most apps.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>it may load and configure beans the application will never use and therefore consume more CPU and RAM than really required.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>There&#8217;s quite a gap between "it may" and not recommending users to use that feature at all. A major code smell sounds like something users should pay attention. IMO, the rule the way it is described will point users in the wrong direction.</p>
</div>
<div class="paragraph">
<p>As for the recommendation of using <code>@Import</code>, that&#8217;s actually inaccurate. Auto-configurations are processed at a specific point of the lifecycle of the application context and using <code>@Import</code> imports them in the user config. It can be ok for corner cases (like enabling a specific feature when it was disabled based on a condition) but that&#8217;s about it. <code>@ImportAutoConfiguration</code> exists but is mostly meant for testing purposes.</p>
</div>
</div>
</div>
</div>