<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when <code>fetch()</code> or <code>new Request()</code> is called with a body option while using GET or HEAD methods.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The HTTP specification defines that GET and HEAD requests should not contain a request body. When you provide a body with these methods, the Fetch API throws a <code>TypeError</code> at runtime.</p>
</div>
<div class="paragraph">
<p>GET requests are designed to retrieve data from a server without modifying anything. Including a body contradicts this purpose and violates HTTP standards. Similarly, HEAD requests are meant to retrieve only headers, making a body meaningless.</p>
</div>
<div class="paragraph">
<p>When no method is specified in fetch options, GET is used by default. This means that providing a body without explicitly setting a method like POST will also cause the same error.</p>
</div>
<div class="paragraph">
<p>This issue typically occurs when developers copy request code between different HTTP methods without adjusting the options appropriately.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>This code will throw a <code>TypeError</code> at runtime, causing the application to crash or behave unexpectedly. Users may experience broken functionality, and the error might not be caught during development if the problematic code path isn&#8217;t tested thoroughly.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_fix">How to fix?</h3>
<div class="paragraph">
<p>Remove the body option when using GET requests (default method).</p>
</div>
<div class="sect3">
<h4 id="_non_compliant_code_example">Non-compliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const response = await fetch('/', {body: 'foo=bar'}); // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_code_example">Compliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const response = await fetch('/');</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/sindresorhus/eslint-plugin-unicorn#readme">eslint-plugin-unicorn</a> - Rule <a href="https://github.com/sindresorhus/eslint-plugin-unicorn/blob/HEAD/docs/rules/no-invalid-fetch-options.md">no-invalid-fetch-options</a></p>
</li>
<li>
<p>MDN - fetch() - <a href="https://developer.mozilla.org/en-US/docs/Web/API/fetch">Complete documentation for the Fetch API</a></p>
</li>
<li>
<p>MDN - Request constructor - <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/Request">Documentation for the Request constructor</a></p>
</li>
<li>
<p>HTTP request methods - <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods">Overview of HTTP request methods and their purposes</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>RFC 7231 - HTTP/1.1 Semantics - <a href="https://tools.ietf.org/html/rfc7231#section-4.3.1">HTTP specification defining GET request semantics</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>