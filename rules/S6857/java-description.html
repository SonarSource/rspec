<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule reports syntax errors in Spring Expression Language (<code>SpEL</code>) expressions and property placeholders.
It verifies that every <code>SpEL</code> expression and property placeholder is properly closed and that the content of each expression or placeholder is syntactically correct.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Only the Spring framework, not the Java compiler, parses <code>SpEL</code> expression inside Spring annotations.
This means that the Java compiler does not detect invalid <code>SpEL</code> expressions during compile time.
They will cause exceptions during runtime instead, or even fail silently when Spring interprets the expression as a simple string literal.</p>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>This rule reports syntactical errors in <code>SpEL</code> expressions but does not consider semantic errors, such as unknown identifiers or incompatible operand data types.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Correct the syntax error in the SpEL expression.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Value("#{systemProperties['user.region'}") // Noncompliant: unclosed "["
private String region;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Value("#{'${listOfValues}' split(',')}") // Noncompliant: missing operator
private List&lt;String&gt; valuesList;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Value("#{T(java.lang.Math).random() * 64h}") // Noncompliant: invalid number
private Double randPercent;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Query("SELECT u FROM User u WHERE u.status = :#{#status+}") // Noncompliant: missing operand for "+"
List&lt;User&gt; findUsersByStatus(@Param("status") String status);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Value("${myapp.!prop}") // Noncompliant: property key contains an exclamation mark "!"
private String myProperty;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Value("${my.property:#{1**1}}") // Noncompliant: invalid SpEL expression "1**1"
private Integer myValue;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Value("#{systemProperties['user.region']}") // Compliant
private String region;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Value("#{'${listOfValues}'.split(',')}") // Compliant
private List&lt;String&gt; valuesList;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Value("#{T(java.lang.Math).random() * 100.0}") // Compliant
private Double randPercent;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Query("SELECT u FROM User u WHERE u.status = :#{#status+42}") // Compliant
List&lt;User&gt; findUsersByStatus(@Param("status") String status);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Value("${myapp.prop}") // Compliant
private String myProperty;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Value("${my.property:#{1*1}}") // Compliant
private Integer myValue;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Spring Framework Documentation - <a href="https://docs.spring.io/spring-framework/reference/core/expressions.html">Spring Expression Language (SpEL)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>