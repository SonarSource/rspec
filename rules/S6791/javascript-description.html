<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>React works in two phases: render and commit.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The render phase determines what changes need to be made to e.g. the DOM. During this phase, React calls render and then compares the result to the previous render.</p>
</li>
<li>
<p>The commit phase is when React applies any changes. (In the case of React DOM, this is when React inserts, updates, and removes DOM nodes.) React also calls lifecycles like <code>componentDidMount</code> and <code>componentDidUpdate</code> during this phase.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Render phase lifecycles include among others, the following lifecycle methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>componentWillMount</code> (or its alias <code>UNSAFE_componentWillMount</code>)</p>
</li>
<li>
<p><code>componentWillReceiveProps</code> (or its alias <code>UNSAFE_componentWillReceiveProps</code>)</p>
</li>
<li>
<p><code>componentWillUpdate</code> (or its alias <code>UNSAFE_componentWillUpdate</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These are considered unsafe and also happen to be the lifecycles that cause the most confusion within the React community and tend to encourage unsafe coding practices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">class Foo extends React.Component {
  UNSAFE_componentWillMount() {}         // Noncompliant
  UNSAFE_componentWillReceiveProps() {}  // Noncompliant
  UNSAFE_componentWillUpdate() {}        // Noncompliant
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instead of <code>componentWillUpdate</code>, use <code>getSnapshotBeforeUpdate</code> together with <code>componentDidUpdate</code>. The <code>getSnapshotBeforeUpdate</code> lifecycle is called right before mutations are made. The return value for this lifecycle will be passed as the third parameter to <code>componentDidUpdate</code>.</p>
</div>
<div class="paragraph">
<p>Instead of <code>componentWillReceiveProps</code>, Use <code>getDerivedStateFromProps</code> together with <code>componentDidUpdate</code>. The <code>getDerivedStateFromProps</code> lifecycle is invoked after a component is instantiated as well as before it is re-rendered. It can return an object to update state, or null to indicate that the new props do not require any state updates.</p>
</div>
<div class="paragraph">
<p>As for <code>componentWillMount</code>, React will call it immediately after the constructor. It only exists for historical reasons and should not be used. Instead, use one of the alternatives:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To initialize state, declare <code>state</code> as a class field or set <code>this.state</code> inside the <code>constructor</code>.</p>
</li>
<li>
<p>If you need to run a side effect or set up a subscription, move that logic to <code>componentDidMount</code> instead.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">class myComponent extends React.Component {
  constructor(props) {
      super(props);
  }

  componentWillMount() { // Noncompliant: "componentWillMount" is deprecated
      if (localStorage.getItem("token")) {
          this.setState({logged_in: true});
      }
  }
  // ...
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">class myComponent extends React.Component {
  constructor(props) {
      super(props);

      if (localStorage.getItem("token")) {
          this.setState({logged_in: true});
      }
  }
  // ...
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/jsx-eslint/eslint-plugin-react">eslint-plugin-react</a> - Rule <a href="https://github.com/jsx-eslint/eslint-plugin-react/blob/HEAD/docs/rules/no-unsafe.md">no-unsafe</a></p>
</li>
<li>
<p>React Documentation - <a href="https://react.dev/reference/react/Component#unsafe_componentwillmount"><code>UNSAFE_componentWillMount</code></a></p>
</li>
<li>
<p>React Documentation - <a href="https://react.dev/reference/react/Component#unsafe_componentwillreceiveprops"><code>UNSAFE_componentWillReceiveProps</code></a></p>
</li>
<li>
<p>React Documentation - <a href="https://react.dev/reference/react/Component#unsafe_componentwillupdate"><code>UNSAFE_componentWillUpdate</code></a></p>
</li>
<li>
<p>React Documentation - <a href="https://legacy.reactjs.org/blog/2018/03/27/update-on-async-rendering.html#migrating-from-legacy-lifecycles">Migrating from Legacy Lifecycles</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>