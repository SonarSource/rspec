<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Kotlin collections API has methods that allow developers to overcome type-safety restriction of the parameter, such as <code>Iterable.contains</code>. When the actual type of the object provided to these methods is not consistent with the target collection&#8217;s actual type, those methods will always return <code>false</code> or <code>null</code>. This is most likely unintended and hides a design problem.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when the type of the argument of the following APIs is unrelated to the type used for the collection declaration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>MutableCollection.remove</code></p>
</li>
<li>
<p><code>MutableCollection.removeAll</code></p>
</li>
<li>
<p><code>MutableCollection.retainAll</code></p>
</li>
<li>
<p><code>Array.contains</code></p>
</li>
<li>
<p><code>Array.indexOf</code></p>
</li>
<li>
<p><code>Array.lastIndexOf</code></p>
</li>
<li>
<p><code>Collection.containsAll</code></p>
</li>
<li>
<p><code>Iterable.contains</code></p>
</li>
<li>
<p><code>Iterable.indexOf</code></p>
</li>
<li>
<p><code>Iterable.lastIndexOf</code></p>
</li>
<li>
<p><code>List.indexOf</code></p>
</li>
<li>
<p><code>List.lastIndexOf</code></p>
</li>
<li>
<p><code>Map.contains</code></p>
</li>
<li>
<p><code>Map.containsKey</code></p>
</li>
<li>
<p><code>Map.containsValue</code></p>
</li>
<li>
<p><code>Map.get</code></p>
</li>
<li>
<p><code>MutableMap.remove</code></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun main(args: Array&lt;String&gt;) {
    val map: MutableMap&lt;Int, Any&gt; = mutableMapOf()
    map.remove&lt;Any, Any&gt;("42") // Noncompliant; will return 'null' for sure because 'map' is handling only Integer keys

    // ...
    val list: MutableList&lt;String&gt; = mutableListOf()
    val integer = Integer.valueOf(1)
    if (list.contains&lt;Any&gt;(integer)) { // Noncompliant; always false.
        list.remove&lt;Any&gt;(integer) // Noncompliant; list.add(integer) doesn't compile, so this will always return 'false'
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun main(args: Array&lt;String&gt;) {
    val map: MutableMap&lt;Int, Any&gt; = mutableMapOf()
    map.remove(42)

    // ...
    val list: MutableList&lt;String&gt; = mutableListOf()
    val str = ""
    if (list.contains(str)) {
        list.remove(str)
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>