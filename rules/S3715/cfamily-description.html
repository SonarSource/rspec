<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proprietary compiler extensions can be handy, but they commit you to always using that compiler. This rule raises an issue when GNU extensions are used, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ternary operator with omitted second operand</p>
</li>
<li>
<p>Case ranges in switch statements</p>
</li>
<li>
<p>Expression statements, i.e. code blocks producing value</p>
</li>
<li>
<p>Index range in array initializers</p>
</li>
<li>
<p>A array initializer without <code>=</code></p>
</li>
<li>
<p>A structure member initializer with a colon</p>
</li>
<li>
<p>Decimal floating points numbers <code>_Decimal32</code>, <code>_Decimal64</code>, and <code>_Decimal128</code></p>
</li>
<li>
<p>Structures and union without named data members</p>
</li>
<li>
<p>Empty initializers <code>= {}</code> in pre-C23 code, as the feature was standardized in C23</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">struct S {
  int f;
};

struct S s[] = {
  [0] { // Noncompliant
    f : 0 // Noncompliant
  }
  [1 ... 3] = { // CHECK :8 :11 S3715:use of GNU array range extension
    .f = 2
  }
};

int fun(int p) {
  switch (p) {
    case 0 ... 1: // Noncompliant
      do_the_thing();
      break;
    case 2:
      //...
  }

  p = ({ // Noncompliant
    int a = 10, b = 20;
    (a * b) + 10;
  });

  return p ?: 0; // Noncompliant
}

_Decimal32 d32; // Noncompliant

struct Empty {}; // Noncompliant in C</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">struct S {
  int f;
};

struct S s[] = {
  [0] = {
    .f = 0
  },
  [1] = {
    .f = 2
  }
  [2] = {
    .f = 2
  },
  [3] = {
    .f = 2
  }

};

int fun(int p) {
  switch (p) {
    case 0:
    case 1:
      do_the_thing();
      break;
    case 2:
      //...
  }

  int a = 10, b = 20;
  p = (a * b) + 10;

  return p ? p: 0;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S3730" class="rspec-auto-link">S3730</a> reports uses of the GNU-specific <code>#include_next</code> preprocessor directive</p>
</li>
<li>
<p><a data-rspec-id="S8216" class="rspec-auto-link">S8216</a> - Code should not rely on features beyond the configured C&#43;&#43; standard</p>
</li>
<li>
<p><a data-rspec-id="S8230" class="rspec-auto-link">S8230</a> - MSVC-specific extensions should not be used</p>
</li>
<li>
<p><a data-rspec-id="S8231" class="rspec-auto-link">S8231</a> - Non-standard attributes should not be used</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Replace the use of this GNU extension with standard syntax.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>the extension</p>
</div>
</div>
</div>
</div>