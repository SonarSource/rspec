<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The repetition of a unary operator is usually a typo. The second operator invalidates the first one in most cases:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">  var a int = 1
  var flag bool = true

  var a1 int = ^^^a // Noncompliant: equivalent to "^a"
  var flag2 bool  = !!!flag  // Noncompliant: equivalent to "!flag"</code></pre>
</div>
</div>
<div class="paragraph">
<p>On the other hand, while repeating the increment and decrement operators is technically correct, it obfuscates the meaning:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">var i int = 1
var j int = ++ ++i  // Noncompliant
var k int = -- --i  // Noncompliant</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using <code>+=</code> or <code>-=</code> improves readability:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">var i int = 1
i += 2
var j int = i
i -=2
var k int = i</code></pre>
</div>
</div>
<div class="paragraph">
<p>This rule raises an issue for repetitions of <code>!</code>, <code>^</code>, <code>-</code>, <code>&#43;</code>, increment <code>++</code> and decrement <code>--</code> operators.</p>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Use the "{!|~}" operator just once or not at all.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_related_to_s3491">is related to: <a data-rspec-id="S3491" class="rspec-auto-link">S3491</a></h3>

</div>
<div class="sect2">
<h3 id="_on_24_mar_2015_185143_evgeny_mandrikov_wrote">on 24 Mar 2015, 18:51:43 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] regarding title - I think that would be better to narrow it down to "unary prefix operators".</p>
</div>
<div class="paragraph">
<p>Regarding example - it won&#8217;t compile, because</p>
</div>
<div class="listingblock">
<div class="content">
<pre>---i;

{plus}{plus}+i;</pre>
</div>
</div>
<div class="paragraph">
<p>is the same as</p>
</div>
<div class="listingblock">
<div class="content">
<pre>--(-i);

{plus}{plus}(+i);</pre>
</div>
</div>
<div class="paragraph">
<p>and both <code>-i</code> and <code>&#43;i</code> are not assignable r-values, thus can&#8217;t be used for unary <code>--</code> and <code>&#43;&#43;</code>. And seems that description also should be adjusted taking this into account.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_25_mar_2015_201925_evgeny_mandrikov_wrote">on 25 Mar 2015, 20:19:25 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I don&#8217;t think that we should exclude prefix increment and decrement, because so far I don&#8217;t see good reasons to write <code>&#43;&#43;(&#43;&#43;i)</code> instead of <code>i += 2</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_26_mar_2015_162745_ann_campbell_wrote">on 26 Mar 2015, 16:27:45 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>your turn</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_26_mar_2015_183435_evgeny_mandrikov_wrote">on 26 Mar 2015, 18:34:35 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] LGTM, thanks!</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_26_mar_2015_183634_evgeny_mandrikov_wrote">on 26 Mar 2015, 18:36:34 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] just one question - why targeting only C, C&#43;&#43;, Objective-C ?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_26_mar_2015_183801_evgeny_mandrikov_wrote">on 26 Mar 2015, 18:38:01 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] and ouch - just noticed that there is parameter to ignore two bangs, which is first of all seems to be relevant only for C-Family and second - I believe that we discussed to go without it and see feedback.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_27_mar_2015_115106_ann_campbell_wrote">on 27 Mar 2015, 11:51:06 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>I&#8217;ve moved the parameter to the C-Family subtask. I suppose the comment thread (now deleted) on the bootstrap document was ambiguous. I thought you were okay to give a try with. We can delete it altogether if you like.</p>
</div>
<div class="paragraph">
<p>Re langauges, good question. Corrected</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_27_mar_2015_121338_evgeny_mandrikov_wrote">on 27 Mar 2015, 12:13:38 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] my point was - let&#8217;s remove parameter at all. After first implementation always easier to add than to remove.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_27_mar_2015_151207_ann_campbell_wrote">on 27 Mar 2015, 15:12:07 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>done</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_22_jul_2015_122714_tamas_vajk_wrote">on 22 Jul 2015, 12:27:14 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I&#8217;ve added a third message.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_22_jul_2015_125655_tamas_vajk_wrote">on 22 Jul 2015, 12:56:55 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I&#8217;ve updated the rule title according to our discussion with [~dinesh.bolkensteyn] and [~freddy.mallet]. I&#8217;ve left the C family exception intact, but we shouldn&#8217;t implement that for other languages as it raises many question.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Does this rule recognizes typos? <code>&#43;&#43;&#43;&#43;i</code> is hardly a typo.</p>
</li>
<li>
<p>Why don&#8217;t we handle <code>&#43;\-&#43;\-6</code> as well? Why are we restricting the rule to consecutively repeated unary prefix operators? <code>+-+-</code> is also repeated.</p>
</li>
<li>
<p>Why don&#8217;t we handle all useless prefix operators? Such as <code>+6</code>.</p>
</li>
<li>
<p>Should we handle <code>!(!expression)</code> as well? No we shouldn&#8217;t, because that is not a typo.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_on_27_jul_2015_104921_dinesh_bolkensteyn_wrote">on 27 Jul 2015, 10:49:21 Dinesh Bolkensteyn wrote:</h3>
<div class="paragraph">
<p>Discussed with [~evgeny.mandrikov] [~ann.campbell.2] [~freddy.mallet] and myself</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_27_jul_2015_122158_ann_campbell_wrote">on 27 Jul 2015, 12:21:58 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>I&#8217;ve made a few edits [~dinesh.bolkensteyn]</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_27_jul_2015_142553_ann_campbell_wrote">on 27 Jul 2015, 14:25:53 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~dinesh.bolkensteyn] with this upgraded to Critical/bug, is Maintainability still the appropriate SQALE char?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_27_jul_2015_143252_dinesh_bolkensteyn_wrote">on 27 Jul 2015, 14:32:52 Dinesh Bolkensteyn wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] good point - I&#8217;ve update the RSPEC.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_16_feb_2018_173719_alban_auzeill_wrote">on 16 Feb 2018, 17:37:19 Alban Auzeill wrote:</h3>
<div class="paragraph">
<p>Irrelevant for Swift, error: unary operators may not be juxtaposed; parenthesize inner expression</p>
</div>
</div>
</div>
</div>