<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when at least one operand of an identity operator is a new object which has been created just for this check.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Identity operators <code>is</code> and <code>is not</code> check if the same object is on both sides, i.e. <code>a is b</code> returns <code>True</code> if <code>id(a) == id(b)</code>.</p>
</div>
<div class="paragraph">
<p>When a new object is created, it will have its own identity. Thus, if an object is created and used only in an identity check, it is not possible for the other operand to be the same object. The comparison is always <code>False</code> or always <code>True</code> depending on the operator used, <code>is</code> or <code>is not</code>.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when at least one operand of an identity operator is a new object which has been created just for this check, i.e.:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When it is a dict, list or set literal.</p>
</li>
<li>
<p>When it is a call to <code>dict</code>, <code>set</code>, <code>list</code> or <code>complex</code> built-in functions.</p>
</li>
<li>
<p>When such a new object is assigned to only one variable and this variable is used in an identity check.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Whenever using a newly created object in a comparison, the identity operator should be replaced with the equality operator (<code>==</code> or <code>!=</code>), which will use <code>__eq__</code> or <code>__ne__</code> methods under the hood.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def func(param):
    param is {1: 2}  # Noncompliant: always False
    param is not {1, 2, 3}  # Noncompliant: always True
    param is [1, 2, 3]  # Noncompliant: always False

    param is dict(a=1)  # Noncompliant: always False

    mylist = []  # mylist is assigned a new object
    param is mylist  # Noncompliant: always False</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def func(param):
    param == {1: 2}
    param != {1, 2, 3}
    param == [1, 2, 3]

    param == dict(a=1)

    mylist = []
    param == mylist</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_articles_blog_posts">Articles &amp; blog posts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://adamj.eu/tech/2020/01/21/why-does-python-3-8-syntaxwarning-for-is-literal/">Why does Python 3.8 log a SyntaxWarning for 'is' with literals?</a> - Adam Johnson</p>
</li>
<li>
<p><a href="https://treyhunner.com/2019/03/unique-and-sentinel-values-in-python/#Equality_vs_identity">Equality vs identity</a> - Trey Hunner</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>Replace this "is" operator with "==".</p>
</li>
<li>
<p>Replace this "is not" operator with "!=".</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>Primary: the "is" or "is not" operator.</p>
</div>
<div class="paragraph">
<p>Secondar(y|ies):</p>
</div>
<div class="paragraph">
<p>If the new object is passed via a variable</p>
</div>
<div class="ulist">
<ul>
<li>
<p>location1: the assigned value</p>
</li>
<li>
<p>message1: "This expression creates a new object every time."</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_related_to_s5914">is related to: <a data-rspec-id="S5914" class="rspec-auto-link">S5914</a></h3>

</div>
</div>
</div>