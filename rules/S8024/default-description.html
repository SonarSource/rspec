<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when a class implements the Singleton pattern with a <code>getInstance()</code> method but has a public constructor that allows multiple instances to be created.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Singleton design pattern ensures that only one instance of a class exists throughout the application&#8217;s lifecycle. This pattern is useful when you need to coordinate actions across the system or manage shared resources like configuration settings or database connections.</p>
</div>
<div class="paragraph">
<p>When a Singleton class has a public constructor, it defeats the pattern&#8217;s core purpose. Multiple instances can be created directly using the <code>new</code> keyword, bypassing the controlled instantiation mechanism. This leads to several problems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Inconsistent state</strong>: Different instances may hold different data, causing unpredictable behavior</p>
</li>
<li>
<p><strong>Resource waste</strong>: Multiple instances consume unnecessary memory and processing power</p>
</li>
<li>
<p><strong>Broken assumptions</strong>: Code expecting a single instance may malfunction when multiple instances exist</p>
</li>
<li>
<p><strong>Difficult debugging</strong>: Issues become harder to trace when multiple instances interact unexpectedly</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A proper Singleton implementation uses a private constructor to prevent external instantiation and provides controlled access through a static method.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Multiple instances of a Singleton class can cause data inconsistency, resource waste, and unpredictable application behavior. This can lead to difficult-to-debug issues and compromise the reliability of systems that depend on the Singleton&#8217;s unique instance guarantee.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Make the constructor private and implement proper instance control in the getInstance() method. This prevents external instantiation while ensuring only one instance exists.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">public class MySingleton {
    public MySingleton() { // Noncompliant
        // public constructor allows multiple instances
    }

    public static MySingleton getInstance() {
        return new MySingleton();
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">public class MySingleton {
    private static MySingleton instance;

    private MySingleton() {
        // private constructor prevents external instantiation
    }

    public static MySingleton getInstance() {
        if (instance == null) {
            instance = new MySingleton();
        }
        return instance;
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Apex Design Patterns - Singleton Pattern - <a href="https://www.apexhours.com/apex-design-patterns">Comprehensive guide to implementing design patterns in Apex, including the Singleton pattern</a></p>
</li>
<li>
<p>Singleton Design Pattern in Apex - <a href="https://www.apexhours.com/singleton-design-pattern-in-apex/">Detailed explanation of the Singleton pattern implementation in Salesforce Apex</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S3050" class="rspec-auto-link">S3050</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>