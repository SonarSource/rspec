<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when code uses <code>select.first</code> or <code>array[array.index { condition }]</code> patterns to find the first element matching a condition.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you need to find the first element in an array that matches a condition, using patterns like <code>select.first</code> or <code>array[array.index { condition }]</code> is inefficient and harder to read.</p>
</div>
<div class="paragraph">
<p>The <code>select.first</code> pattern has two problems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It processes the entire array even after finding the first match</p>
</li>
<li>
<p>It creates an unnecessary intermediate array that gets discarded</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>array[array.index { condition }]</code> pattern is also problematic:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It searches through the array twice - once to find the index, then again to access the element</p>
</li>
<li>
<p>It&#8217;s verbose and can raise an error if no matching element is found</p>
</li>
<li>
<p>The intent is not immediately clear to other developers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ruby provides the <code>find</code> method (and its alias <code>detect</code>) specifically for this purpose. The <code>find</code> method stops searching as soon as it finds the first matching element, making it both faster and more memory-efficient. It also expresses the intent more clearly, making your code easier to understand and maintain.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Using inefficient lookup patterns can impact application performance, especially when working with large arrays or when these operations are performed frequently. The unnecessary array traversals and intermediate collections consume extra CPU cycles and memory. In performance-critical code paths, this can lead to noticeable slowdowns and increased resource usage.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace <code>select.first</code> with <code>find</code> to get the first matching element efficiently without processing the entire array.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># Inefficient: processes entire array even after finding a match
found_item = items.select { |item| item.price &gt; 100 }.first // Noncompliant

# Also creates unnecessary intermediate array
active_user = users.select(&amp;:active?).first // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># Use find to get the first matching element efficiently
found_item = items.find { |item| item.price &gt; 100 }

# Or using shorthand syntax
active_user = users.find(&amp;:active?)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Ruby Array#find documentation - <a href="https://ruby-doc.org/core/Array.html#method-i-find">Official documentation for the find method</a></p>
</li>
<li>
<p>Ruby Array#select documentation - <a href="https://ruby-doc.org/core/Array.html#method-i-select">Official documentation for the select method</a></p>
</li>
<li>
<p>Ruby Array#any? documentation - <a href="https://ruby-doc.org/core/Array.html#method-i-any-3F">Official documentation for the any? method</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S6602" class="rspec-auto-link">RSPEC-6602</a> - <a href="https://rules.sonarsource.com/csharp/RSPEC-6602/">C# equivalent rule for using efficient LINQ methods</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>