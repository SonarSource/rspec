This rule raises an issue when code uses `select.first` or `array[array.index { condition }]` patterns to find the first element matching a condition.

== Why is this an issue?

When you need to find the first element in an array that matches a condition, using patterns like `select.first` or `array[array.index { condition }]` is inefficient and harder to read.

The `select.first` pattern has two problems:

* It processes the entire array even after finding the first match
* It creates an unnecessary intermediate array that gets discarded

The `array[array.index { condition }]` pattern is also problematic:

* It searches through the array twice - once to find the index, then again to access the element
* It's verbose and can raise an error if no matching element is found
* The intent is not immediately clear to other developers

Ruby provides the `find` method (and its alias `detect`) specifically for this purpose. The `find` method stops searching as soon as it finds the first matching element, making it both faster and more memory-efficient. It also expresses the intent more clearly, making your code easier to understand and maintain.

=== What is the potential impact?

Using inefficient lookup patterns can impact application performance, especially when working with large arrays or when these operations are performed frequently. The unnecessary array traversals and intermediate collections consume extra CPU cycles and memory. In performance-critical code paths, this can lead to noticeable slowdowns and increased resource usage.

== How to fix it

Replace `select.first` with `find` to get the first matching element efficiently without processing the entire array.

=== Code examples

==== Noncompliant code example

[source,ruby,diff-id=1,diff-type=noncompliant]
----
# Inefficient: processes entire array even after finding a match
found_item = items.select { |item| item.price > 100 }.first // Noncompliant

# Also creates unnecessary intermediate array
active_user = users.select(&:active?).first // Noncompliant
----

==== Compliant solution

[source,ruby,diff-id=1,diff-type=compliant]
----
# Use find to get the first matching element efficiently
found_item = items.find { |item| item.price > 100 }

# Or using shorthand syntax
active_user = users.find(&:active?)
----

== Resources

=== Documentation

 * Ruby Array#find documentation - https://ruby-doc.org/core/Array.html#method-i-find[Official documentation for the find method]

 * Ruby Array#select documentation - https://ruby-doc.org/core/Array.html#method-i-select[Official documentation for the select method]

 * Ruby Array#any? documentation - https://ruby-doc.org/core/Array.html#method-i-any-3F[Official documentation for the any? method]

=== Related rules

 * RSPEC-6602 - https://rules.sonarsource.com/csharp/RSPEC-6602/[C# equivalent rule for using efficient LINQ methods]
