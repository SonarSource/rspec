<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://dart.dev/language/pattern-types#constant">Constant patterns</a> should not be used with type literals.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using constant patterns with type literals is most likely a mistake.</p>
</div>
<div class="paragraph">
<p>For example, the following code</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">bool isANumber(Object? o) {
  if (o case num) { // Checks if `o` is `num`, not if it is a `num`
    return true;
  }
  return false;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>will always return <code>false</code> for any input <strong>value</strong> of type <code>num</code> (as in <code>isANumber(42)</code>), and will returns <code>true</code> only when the input is the <strong>type</strong> <code>num</code> (as in <code>isANumber(int)</code>).</p>
</div>
<div class="paragraph">
<p>This is because a constant pattern compares the value of the provided constant against the value being matched, and not against its type.</p>
</div>
<div class="paragraph">
<p>The original intent of checking whether an <code>Object? o</code> is a <code>num</code> or not, should be expressed via a <a href="https://dart.dev/language/pattern-types#variable">typed variable pattern</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">bool isANumber(Object? o) {
  if (o case num n) { // Checks if `o` is a `num` and assigns the cast value to n
    return true;
  }
  return false;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the intent of the code is to only check whether the input is a <code>num</code> or not, then the <code>n</code> variable is not necessary, and a value discard can be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">bool isANumber(Object? o) {
  if (o case num _) { // Checks if `o` is a `num`, and discards the cast value
    return true;
  }
  return false;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Convert the <a href="https://dart.dev/language/pattern-types#constant">constant pattern</a> to a <a href="https://dart.dev/language/pattern-types#variable">typed variable pattern</a> by adding a <code>_</code> (value discard) to the type.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">bool isANumber(Object? o) {
  if (o case num) {
    return true;
  }
  return false;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">bool isANumber(Object? o) {
  if (o case num _) {
    return true;
  }
  return false;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Dart Docs - <a href="https://dart.dev/tools/linter-rules/type_literal_in_constant_pattern">Dart Linter rule - type_literal_in_constant_pattern</a></p>
</li>
<li>
<p>Dart Docs - <a href="https://dart.dev/language/pattern-types">Language - Pattern types</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Use 'TypeName _' instead of a type literal.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>The type literal: e.g. <code>num</code> in <code>if (o1 case num) { }</code>.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
</div>
</div>