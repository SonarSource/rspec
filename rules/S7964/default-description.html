<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when Apex code accesses sharing entries (objects ending with <code>__Share</code>) for custom objects through SOQL queries or DML operations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Accessing sharing entries for custom objects in Apex code creates a permanent restriction on your Salesforce organization&#8217;s configuration flexibility.</p>
</div>
</div>
When your code queries or manipulates sharing entries (like InvoiceShare for a custom <code>Invoicec</code> object), Salesforce locks the organization-wide default (OWD) sharing settings for that object. This means administrators can no longer change the OWD setting from "Private" to "Public" or "Public Read Only" to "Public Read/Write".

<div class="paragraph">
<p>This limitation exists because Salesforce needs to maintain data consistency. If sharing entries exist in the system and code depends on them, changing to a more permissive OWD setting could create conflicts between explicit sharing rules and the new default access levels.</p>
</div>
<div class="paragraph">
<p>The restriction is permanent and cannot be reversed, even if you later remove the code that accesses sharing entries. This can significantly impact your organization&#8217;s ability to adapt sharing models as business requirements evolve.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Once sharing entries are accessed in code, administrators lose the ability to make organization-wide default settings more permissive. This can limit business flexibility and may require complex workarounds or data migration if sharing requirements change in the future.</p>
</div>
</div>


<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instead of accessing sharing entries directly, use ownership-based queries or permission-based approaches to control record access.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">// Accessing sharing entries locks OWD settings
List&lt;Invoice__Share&gt; shareRecords = [SELECT Id, UserOrGroupId
                                    FROM Invoice__Share
                                    WHERE ParentId = :invoiceId]; // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">// Use ownership-based access control instead
List&lt;Invoice__c&gt; accessibleInvoices = [SELECT Id, Name, Amount__c
                                      FROM Invoice__c
                                      WHERE Id = :invoiceId
                                      AND OwnerId = :UserInfo.getUserId()];</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Salesforce Sharing and Security Guide - <a href="https://developer.salesforce.com/docs/atlas.en-us.securityImplGuide.meta/securityImplGuide/">Official Salesforce documentation on sharing and security implementation</a></p>
</li>
<li>
<p>Organization-Wide Sharing Defaults - <a href="https://help.salesforce.com/s/articleView?id=sf.security_owd.htm">Salesforce Help documentation on organization-wide default settings</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>Salesforce Security Best Practices - <a href="https://developer.salesforce.com/docs/atlas.en-us.securityImplGuide.meta/securityImplGuide/security_best_practices.htm">Salesforce platform security implementation guidelines</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>