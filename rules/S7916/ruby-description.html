<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when the logical operators <code>and</code> and <code>or</code> are used instead of <code>&amp;&amp;</code> and <code>||</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ruby has two sets of logical operators: <code>&amp;&amp;</code>/<code>||</code> and <code>and</code>/<code>or</code>. While they perform similar operations, they have very different precedence levels that can lead to unexpected behavior.</p>
</div>
<div class="paragraph">
<p>The <code>and</code> and <code>or</code> operators have extremely low precedence - lower than assignment operators like <code>=</code>. This means they are evaluated last in most expressions, which often produces surprising results.</p>
</div>
<div class="paragraph">
<p>Consider this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">result = condition1 and condition2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Due to precedence, this is actually parsed as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">(result = condition1) and condition2</code></pre>
</div>
</div>
<div class="paragraph">
<p>This assigns <code>condition1</code> to <code>result</code>, then evaluates <code>condition2</code> separately. The <code>and</code> operation doesn&#8217;t affect the assignment at all.</p>
</div>
<div class="paragraph">
<p>In contrast, <code>&amp;&amp;</code> and <code>||</code> have higher precedence than assignment operators, so they work as most developers expect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">result = condition1 &amp;&amp; condition2</code></pre>
</div>
</div>
<div class="paragraph">
<p>This correctly assigns the result of the logical operation to the variable.</p>
</div>
<div class="paragraph">
<p>The precedence issue becomes even more problematic in complex expressions with multiple operators, where the evaluation order can be completely different from what appears obvious when reading the code.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Using <code>and</code> and <code>or</code> can cause logic errors where variables receive unexpected values due to operator precedence. This can lead to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Incorrect conditional logic that appears to work in simple cases but fails in complex expressions</p>
</li>
<li>
<p>Variables being assigned partial results instead of the full logical operation</p>
</li>
<li>
<p>Difficult-to-debug issues where the code looks correct but behaves unexpectedly</p>
</li>
<li>
<p>Reduced code readability as other developers may misunderstand the actual execution order</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace <code>and</code> with <code>&amp;&amp;</code> and <code>or</code> with <code>||</code> to ensure proper operator precedence and predictable behavior.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># Assignment with unexpected precedence
result = condition1 and condition2 # Noncompliant

# Complex expression with confusing precedence
valid = user.present? and user.active? or false # Noncompliant

# Method call with logical operator
return success and process_data or handle_error # Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># Assignment with correct precedence
result = condition1 &amp;&amp; condition2

# Complex expression with clear precedence
valid = user.present? &amp;&amp; user.active? || false

# Method call with logical operator
return success &amp;&amp; process_data || handle_error</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Ruby Operator Precedence - <a href="https://docs.ruby-lang.org/en/master/syntax/precedence_rdoc.html">Official Ruby documentation explaining operator precedence rules</a></p>
</li>
<li>
<p>Shopify Ruby Style Guide - Syntax - <a href="https://ruby-style-guide.shopify.dev/#syntax">Shopify&#8217;s Ruby style guide recommending &amp;&amp; and || over and and or</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>