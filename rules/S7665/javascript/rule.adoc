This rule raises an issue when files specified in the `bin` field of `package.json` are excluded from npm publication, either by not being included in the `files` field or by being listed in `.npmignore`.

== Why is this an issue?

The `bin` field in `package.json` allows you to publish CLI commands that users can install and run. When npm publishes your package, it creates executable scripts based on the files listed in the `bin` field.

If these binary files are ignored during publication (excluded by the `files` field or included in `.npmignore`), they won't be available when users install your package. This causes the package installation to fail, as npm cannot create the expected executable commands.

This configuration error is easy to make but can be frustrating for users who try to install your package. The rule helps catch this mistake during development, ensuring that all declared binary files will be properly included in the published package.

=== What is the potential impact?

When binary files are ignored by npm, package installation will fail for end users. This can lead to broken installations, user frustration, and reduced adoption of your package. Users may encounter errors when trying to use the CLI commands that your package promises to provide.

=== How to fix?


Ensure binary files are included in the `files` field of package.json. Add the binary file paths to the `files` array so they are included during publication.

==== Non-compliant code example

[source,json,diff-id=1,diff-type=noncompliant]
----
{
  "name": "my-cli-tool",
  "bin": "bin/my-command.js",
  "files": [
    "lib/"
  ]
}
----

==== Compliant code example

[source,json,diff-id=1,diff-type=compliant]
----
{
  "name": "my-cli-tool",
  "bin": "bin/my-command.js",
  "files": [
    "lib/",
    "bin/"
  ]
}
----

=== Documentation

 * npm package.json bin field - https://docs.npmjs.com/cli/v10/configuring-npm/package-json#bin[Official npm documentation for the bin field in package.json]
 * npm package.json files field - https://docs.npmjs.com/cli/v10/configuring-npm/package-json#files[Official npm documentation for the files field in package.json]
 * npm .npmignore - https://docs.npmjs.com/cli/v10/using-npm/developers#keeping-files-out-of-your-package[Official npm documentation about excluding files from publication]

=== Related Rules

 * n/no-unpublished-import - https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-unpublished-import.md[Disallow import declarations for files that npm ignores]
 * n/no-unpublished-require - https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-unpublished-require.md[Disallow require() expressions for files that npm ignores]

