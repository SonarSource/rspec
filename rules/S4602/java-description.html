<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>@ComponentScan</code> is used to determine which Spring Beans are available in the application context. The packages to scan can be configured thanks to the <code>basePackageClasses</code> or <code>basePackages</code> (or its alias <code>value</code>) parameters. If neither parameter is configured, <code>@ComponentScan</code> will consider only the package of the class annotated with it. When <code>@ComponentScan</code> is used on a class belonging to the default package, the entire classpath will be scanned.</p>
</div>
<div class="paragraph">
<p>This will slow-down the start-up of the application and it is likely the application will fail to start with an <code>BeanDefinitionStoreException</code> because you ended up scanning the Spring Framework package itself.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@ComponentScan</code>, <code>@SpringBootApplication</code> and <code>@ServletComponentScan</code> are used on a class belonging to the default package</p>
</li>
<li>
<p><code>@ComponentScan</code> is explicitly configured with the default package</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">import org.springframework.boot.SpringApplication;

@SpringBootApplication // Noncompliant; RootBootApp is declared in the default package
public class RootBootApp {
...
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@ComponentScan("")
public class Application {
...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package hello;

import org.springframework.boot.SpringApplication;

@SpringBootApplication // Compliant; RootBootApp belongs to the "hello" package
public class RootBootApp {
...
}</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Remove the annotation "@SpringBootApplication" | "@ComponentScan" or move the annotated class out of the default package.</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p>Remove the annotation "@SpringBootApplication" | "@ComponentScan" or move the "XXX" class out of the default package.</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p>Define packages to scan. Don&#8217;t rely on the default package.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_20_apr_2018_204326_ann_campbell_wrote">on 20 Apr 2018, 20:43:26 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~alexandre.gigleux] I&#8217;ve made a couple small edits, but there are phrases that still need attention.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>@ComponentScan (and so @SpringBootApplication that is annotated with @ComponentScan)</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Can the parenthetical phrase be eliminated? Or clarified somehow?</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>This will not help to speed up the start-up of the application</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Can we just say it will slow it down? Or might there actually be an expectation that startup would be faster? If so, it would be useful to elaborate on that.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_21_apr_2018_210123_alexandre_gigleux_wrote">on 21 Apr 2018, 21:01:23 Alexandre Gigleux wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2]: Fixed</p>
</div>
</div>
</div>
</div>