This rule raises an issue when SOQL queries select more fields than are actually used in the code, including the use of wildcards (SELECT *) or explicit selection of unnecessary fields.

== Why is this an issue?

SOQL queries that select unnecessary fields create several problems that impact both performance and maintainability.

When queries retrieve more data than needed, they consume additional network bandwidth transferring unused information from the database to the application. This extra data transfer increases query execution time and can lead to timeout issues, especially when working with large datasets or complex objects with many fields.

Memory usage also increases unnecessarily when unused fields are loaded into memory. In Salesforce's multi-tenant environment with strict governor limits, this inefficient memory usage can contribute to heap size limit violations.

From a maintainability perspective, over-selecting fields makes the code's actual dependencies unclear. When a query selects many fields but only uses a few, it becomes difficult for developers to understand which fields are truly required for the functionality. This hidden complexity makes refactoring risky and can lead to unintended side effects when object schemas change.

Using SELECT * is particularly problematic because it creates implicit dependencies on the entire object schema. When new fields are added to the object, the query automatically includes them, potentially affecting performance. More critically, if fields are removed or access permissions change, the code may break in unexpected ways.

In Salesforce environments with large data volumes, these inefficiencies compound quickly. Queries that work fine in development with small datasets can become performance bottlenecks in production when processing thousands of records.

=== What is the potential impact?

Performance degradation due to unnecessary data transfer and increased memory usage. In large data volume scenarios, this can lead to query timeouts and governor limit violations. The code becomes harder to maintain as field dependencies are not explicit, making refactoring risky and potentially causing unexpected failures when object schemas change.

== How to fix it

Replace wildcard selection with explicit field lists containing only the fields that are actually used in the code.

=== Code examples

==== Noncompliant code example

[source,apex,diff-id=1,diff-type=noncompliant]
----
List<Account> accounts = [SELECT * FROM Account WHERE Id = :accountId]; // Noncompliant
String accountName = accounts[0].Name;
----

==== Compliant solution

[source,apex,diff-id=1,diff-type=compliant]
----
List<Account> accounts = [SELECT Id, Name FROM Account WHERE Id = :accountId];
String accountName = accounts[0].Name;
----

== Resources

=== Documentation

 * SOQL and SOSL Reference - https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/[Official Salesforce documentation for SOQL queries and best practices]

 * Apex Developer Guide - SOQL Queries - https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/langCon_apex_SOQL.htm[Comprehensive guide to using SOQL queries in Apex code]

 * Large Data Volumes Best Practices - https://developer.salesforce.com/docs/atlas.en-us.salesforce_large_data_volumes_bp.meta/salesforce_large_data_volumes_bp/[Best practices for handling large data volumes in Salesforce]

=== Standards

 * CWE-400: Uncontrolled Resource Consumption - https://cwe.mitre.org/data/definitions/400.html[Relates to inefficient resource usage that can lead to performance degradation]
