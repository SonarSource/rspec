<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In an <code>async</code> method, any blocking operations should be avoided.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using a synchronous method instead of its <a href="https://learn.microsoft.com/en-us/dotnet/csharp/asynchronous-programming/">asynchronous</a> counterpart in an <code>async</code> method blocks the execution and is considered bad practice for several reasons:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Resource Utilization</dt>
<dd>
<p>Each thread consumes system resources, such as memory. When a thread is blocked, it&#8217;s not doing any useful work, but it&#8217;s still consuming these resources. This can lead to inefficient use of system resources.</p>
</dd>
<dt class="hdlist1">Scalability</dt>
<dd>
<p>Blocking threads can limit the scalability of your application. In a high-load scenario where many operations are happening concurrently, each blocked thread represents a missed opportunity to do useful work. This can prevent your application from effectively handling increased load.</p>
</dd>
<dt class="hdlist1">Performance</dt>
<dd>
<p>Blocking threads can degrade the performance of your application. If all threads in the thread pool become blocked, new tasks can&#8217;t start executing until an existing task completes and frees up a thread. This can lead to delays and poor responsiveness.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Instead of blocking, it&#8217;s recommended to use the <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/await"><code>async</code> operator</a> with async methods. This allows the system to release the current thread back to the thread pool until the awaited task is complete, improving scalability and responsiveness.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">public async Task Examples(Stream stream, DbSet&lt;Person&gt; dbSet)
{
    stream.Read(array, 0, 1024);            // Noncompliant
    File.ReadAllLines("path");              // Noncompliant
    dbSet.ToList();                         // Noncompliant in Entity Framework Core queries
    dbSet.FirstOrDefault(x =&gt; x.Age &gt;= 18); // Noncompliant in Entity Framework Core queries
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">public async Task Examples(Stream stream, DbSet&lt;Person&gt; dbSet)
{
    await stream.ReadAsync(array, 0, 1024);
    await File.ReadAllLinesAsync("path");
    await dbSet.ToListAsync();
    await dbSet.FirstOrDefaultAsync(x =&gt; x.Age &gt;= 18);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/async">async (C# Reference)</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/await">await operator - asynchronously await for a task to complete</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_articles_blog_posts">Articles &amp; blog posts</h3>
<div class="ulist">
<ul>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/asynchronous-programming/#dont-block-await-instead">Asynchronous programming with async and await - Don&#8217;t block, await instead</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/archive/msdn-magazine/2013/march/async-await-best-practices-in-asynchronous-programming">Async/Await - Best Practices in Asynchronous Programming</a></p>
</li>
<li>
<p>Microsoft Developer Blog -  <a href="https://devblogs.microsoft.com/pfxteam/asyncawait-faq/">Async/Await FAQ</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Await {identifier}Async instead.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>Invoked method identifier.</p>
</div>
</div>
</div>
</div>