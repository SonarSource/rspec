<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when a Batch Apex class implements Database.Stateful but doesn&#8217;t actually use instance variables to maintain state across batch execution methods.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Database.Stateful interface in Salesforce Batch Apex allows instance variables to retain their values across different batch execution methods (start, execute, finish). However, implementing this interface comes with memory and performance overhead.</p>
</div>
<div class="paragraph">
<p>When you implement Database.Stateful, Salesforce must serialize and maintain the state of your batch class instance throughout the entire batch job execution. This consumes additional memory and processing resources.</p>
</div>
<div class="paragraph">
<p>If your batch class doesn&#8217;t actually need to maintain state between executions - for example, if you&#8217;re not tracking counters, accumulating data, or maintaining collections across batches - then implementing Database.Stateful provides no benefit while still incurring the overhead costs.</p>
</div>
<div class="paragraph">
<p>This unnecessary overhead can impact the performance of your batch jobs and consume valuable system resources, especially when processing large datasets or running multiple concurrent batch jobs.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Implementing Database.Stateful unnecessarily can lead to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Increased memory consumption during batch job execution</p>
</li>
<li>
<p>Reduced batch job performance due to serialization overhead</p>
</li>
<li>
<p>Potential governor limit issues in high-volume scenarios</p>
</li>
<li>
<p>Inefficient resource utilization in your Salesforce org</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Remove the Database.Stateful interface if you&#8217;re not actually using instance variables to maintain state across batch executions.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">public class MyBatch implements Database.Batchable&lt;SObject&gt;, Database.Stateful {
    public Integer counter = 0; // Not actually used for state

    public Database.QueryLocator start(Database.BatchableContext bc) {
        return Database.getQueryLocator('SELECT Id FROM Account');
    }

    public void execute(Database.BatchableContext bc, List&lt;Account&gt; records) {
        // No state usage between batches
        for(Account acc : records) {
            acc.Name = 'Updated';
        }
        update records;
    }

    public void finish(Database.BatchableContext bc) {}
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">public class MyBatch implements Database.Batchable&lt;SObject&gt; {
    // Removed unused counter and Database.Stateful interface

    public Database.QueryLocator start(Database.BatchableContext bc) {
        return Database.getQueryLocator('SELECT Id FROM Account');
    }

    public void execute(Database.BatchableContext bc, List&lt;Account&gt; records) {
        for(Account acc : records) {
            acc.Name = 'Updated';
        }
        update records;
    }

    public void finish(Database.BatchableContext bc) {}
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Batch Apex Developer Guide - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_batch_interface.htm">Official Salesforce documentation on Batch Apex implementation</a></p>
</li>
<li>
<p>Database.Stateful Interface - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_batch_interface.htm#apex_batch_interface_stateful">Documentation on using Database.Stateful to maintain state in batch jobs</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>