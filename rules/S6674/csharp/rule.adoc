A https://messagetemplates.org/[message template] must conform to the specification. The rule raises an issue if the template string violates the template string grammar.

== Why is this an issue?

A message template needs to comply to a set of rules. https://learn.microsoft.com/en-us/dotnet/core/extensions/logging-providers[Loggin provider] parse the template and enrich log entries with the information found in the template. An unparsable message template leads to corrupted log entries and might result in a loss of information in the logs.

== How to fix it

=== Code examples

==== Noncompliant code example

[source,text,diff-id=1,diff-type=noncompliant]
----
logger.LogError("Login failed for {User", user);       // Noncompliant: missing closing bracket
logger.LogError("Login failed for {{User}", user);     // Noncompliant: opening bracket is escaped
logger.LogError("Login failed for {&User}", user);     // Noncompliant: Only '@' and '$' are allowed as prefix
logger.LogError("Login failed for {User_Name}", user); // Noncompliant: Only chars and numbers are allowed for placeholders
logger.LogDebug("Retry attempt {Cnt,r}", cnt);         // Noncompliant: The alignment specifier must be numeric
logger.LogDebug("Retry attempt {Cnt:}", cnt);          // Noncompliant: Empty format specifier is not allowed
----

==== Compliant solution

[source,text,diff-id=1,diff-type=compliant]
----
logger.LogError("Login failed for {User}", user);
logger.LogError("Login failed for {{{User}}}", user);
logger.LogError("Login failed for {User}", user);
logger.LogError("Login failed for {UserName}", user);
logger.LogDebug("Retry attempt {Cnt,-5}", cnt);
logger.LogDebug("Retry attempt {Cnt:000}", cnt);
----

== Resources

=== Documentation

* Message Templates - https://messagetemplates.org/[Message template specification]
* Microsoft Learn - https://learn.microsoft.com/en-us/dotnet/core/extensions/logging?tabs=command-line#log-message-template-formatting[Log message template formatting]
* NLog - https://github.com/NLog/NLog/wiki/How-to-use-structured-logging[How to use structured logging]
* Serilog - https://github.com/serilog/serilog/wiki/Structured-Data[Structured Data]
* Serilog - https://github.com/Suchiman/SerilogAnalyzer/blob/master/README.md#serilog002-message-template-syntax-verifier[`Serilog002`: Message template syntax verifier]