<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Non-standard attributes should not be used</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Attributes provide a standardized syntax for conveying implementation-defined language extensions and hints to the compiler. While the {C&#43;&#43;} standard defines several attributes (such as <code>[[deprecated]]</code>, <code>[[maybe_unused]]</code>, and <code>[[nodiscard]]</code>), compilers also support vendor-specific attributes for compiler-specific features and optimizations.</p>
</div>
<div class="paragraph">
<p>Using non-standard attributes introduces portability risks. When code with compiler-specific attributes is compiled with a different toolchain, unrecognized attributes are silently ignored, which can lead to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Loss of intended behavior (e.g., optimization hints, alignment requirements, or safety checks)</p>
</li>
<li>
<p>Runtime failures when the ignored attribute was critical for correctness</p>
</li>
<li>
<p>Maintenance burden when vendor-specific attributes are scattered across the codebase</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This rule allows only standard attributes that are specified using the standard <code>[[...]]</code> syntax. It reports:
* All attributes that are not defined in the {C&#43;&#43;} standard itself, whether expressed using standard attribute syntax with vendor namespaces (e.g., <code>[[msvc::no_unique_address]]</code>), GNU-style <code>__attribute__</code> syntax (e.g., <code>__attribute__((packed))</code>), or MSVC&#8217;s <code>__declspec</code> syntax (e.g., <code>__declspec(align(16))</code>)
* Standard attributes that are specified using non-standard syntax (e.g., <code>__attribute__((noreturn))</code> instead of <code>[[noreturn]]</code>)</p>
</div>
<div class="paragraph">
<p>The goal is to ensure that such attributes are reviewed to be well-behaved under all used toolchains, or replaced with standard-conforming alternatives when possible.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace non-standard attributes with standard attributes when equivalent functionality exists, or ensure that vendor-specific attributes are only used in code paths that are known to be compiled with the appropriate toolchain. Consider using preprocessor directives or build-system configuration to conditionally apply compiler-specific attributes.</p>
</div>
<div class="sect2">
<h3 id="_non_standard_attribute_using_standard_syntax">Non-standard attribute using standard syntax</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">struct Empty {};

struct Container {
  [[msvc::no_unique_address]] Empty e; // Noncompliant: non-standard attribute
  int value;
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">struct Empty {};

struct Container {
  [[no_unique_address]] Empty e; // Use standard attribute if C++20 is available
  int value;
};</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_standard_attribute_using_non_standard_syntax">Standard attribute using non-standard syntax</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">__attribute__((noreturn))
void terminate(); // Noncompliant: standard attribute using GNU-style syntax</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">[[noreturn]]
void terminate(); // Use standard syntax</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S8216" class="rspec-auto-link">S8216</a> - Code should not rely on features beyond the configured {C&#43;&#43;} standard</p>
</li>
<li>
<p><a data-rspec-id="S8230" class="rspec-auto-link">S8230</a> - MSVC-specific extensions should not be used</p>
</li>
</ul>
</div>
</div>
</div>
</div>