<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when types use complex embedding patterns or create deep interface hierarchies that could be simplified through composition.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Go encourages composition over inheritance, and complex type hierarchies can make code harder to understand, test, and maintain.</p>
</div>
<div class="paragraph">
<p>When you create types with multiple embedded types or deep interface chains, you&#8217;re mixing concerns and creating tight coupling. This makes it difficult to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Test individual components in isolation</p>
</li>
<li>
<p>Understand the flow of data and control</p>
</li>
<li>
<p>Modify or extend functionality without affecting other parts</p>
</li>
<li>
<p>Reason about the behavior of your code</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Complex hierarchies often indicate that a single type is trying to do too much. In Go, it&#8217;s better to create focused types that do one thing well and compose them together when needed.</p>
</div>
<div class="paragraph">
<p>Composition makes your code more modular. Each component has a clear responsibility, and you can easily swap out implementations or test components independently. This aligns with Go&#8217;s philosophy of simplicity and explicit behavior.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Complex inheritance hierarchies reduce code maintainability and testability. They create tight coupling between components, making it harder to modify or extend functionality. This can lead to bugs when changes in one part unexpectedly affect other parts of the system.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace complex embedded type hierarchies with simple composition. Create focused types that wrap the functionality you need rather than embedding multiple types.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">type ComplexReader struct {
    *os.File           // Noncompliant
    *bufio.Reader      // Noncompliant
    *compress.Reader   // Noncompliant
    customLogic bool
}

func (c *ComplexReader) Read(p []byte) (int, error) {
    // Complex implementation mixing multiple concerns
    return 0, nil
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go">type SimpleReader struct {
    source io.Reader  // Compose with interface
    buffer []byte
}

func (s *SimpleReader) Read(p []byte) (int, error) {
    // Simple, focused implementation
    return s.source.Read(p)
}

// Create the reader with composition
func NewReader(file *os.File) *SimpleReader {
    buffered := bufio.NewReader(file)
    compressed := compress.NewReader(buffered)
    return &amp;SimpleReader{source: compressed}
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Go Blog: GIF Decoder Exercise - <a href="https://go.dev/blog/gif-decoder-exercise-in-go-interfaces">Demonstrates how to use composition with interfaces to build modular, testable code</a></p>
</li>
<li>
<p>Effective Go: Embedding - <a href="https://go.dev/doc/effective_go#embedding">Official guidance on when and how to use embedding in Go</a></p>
</li>
<li>
<p>Go Blog: Go&#8217;s Declaration Syntax - <a href="https://go.dev/blog/declaration-syntax">Explains Go&#8217;s design philosophy around simplicity and composition</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S110" class="rspec-auto-link">S110</a> - <a href="https://rules.sonarsource.com/java/RSPEC-110/">Inheritance tree of classes should not be too deep (Java)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>