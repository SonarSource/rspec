<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when <code>.items()</code> is used to iterate over a dictionary and then either the key or the value is discarded.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using <code>.items()</code> to iterate over a dictionary and then discarding either the key or the value in each iteration is less efficient than directly iterating over only the keys or values needed.</p>
</div>
<div class="paragraph">
<p>Python dictionaries provide efficient ways to iterate over their contents:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Iterating directly over the dictionary yields the keys:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">for k in my_dict:
  ...</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Using <code>my_dict.keys()</code> explicitly yields the keys.</p>
</li>
<li>
<p>Using <code>my_dict.values()</code> yields the values.</p>
</li>
<li>
<p>Using <code>my_dict.items()</code> yields key-value pairs (as tuples).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>.items()</code> method is useful when you need both the key and the value within the loop. However, if your loop only uses the key, discarding the value, often with <code>_</code>, or only uses the value, discarding the key, calling <code>.items()</code> performs unnecessary work retrieving the part you don&#8217;t use.</p>
</div>
<div class="paragraph">
<p>While the performance difference might be minor for small dictionaries, using the more specific method is clearer, more idiomatic, and avoids retrieving and unpacking data that is immediately ignored, like`.keys()` for keys, or <code>.values()</code> for values.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Adjust the loop to use the most appropriate dictionary view method based on whether you need keys, values, or both:
* If only values are needed, iterate over <code>my_dict.values()</code>.
* If only keys are needed, iterate directly over the dictionary (<code>for key in my_dict:</code>) or use <code>my_dict.keys()</code>.
* If both key and value are needed, continue using <code>my_dict.items()</code>.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">fruit = {'a': 'Apple', 'b': 'Banana'}
for _, value in fruit.items(): # Discards key
    print(value)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">fruit = {'a': 'Apple', 'b': 'Banana'}
for key, _ in fruit.items(): # Discards value
    print(key)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">fruit = {'a': 'Apple', 'b': 'Banana'}
for value in fruit.values(): # Iterates only on values
    print(value)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">fruit = {'a': 'Apple', 'b': 'Banana'}
for key in fruit: # Iterates directly over dictionary (yields keys)
    print(key)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Python Documentation - <a href="https://docs.python.org/3/library/stdtypes.html#dictionary-view-objects">Dictionary View Objects (<code>.keys()</code>, <code>.values()</code>, <code>.items()</code>)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>