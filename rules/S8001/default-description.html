<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when a SOQL LIKE clause uses a pattern that starts with a wildcard character (%).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Leading wildcards in SOQL LIKE clauses prevent the Salesforce database from using indexes effectively, forcing full table scans instead of efficient index lookups.</p>
</div>
<div class="paragraph">
<p>When you use a pattern like <code>'%smith'</code> or <code>'%company'</code>, the database cannot use any existing indexes on that field because it doesn&#8217;t know what the starting characters will be. This means the database must examine every single record in the table to find matches, which is called a full table scan.</p>
</div>
<div class="paragraph">
<p>Full table scans become increasingly problematic as your data grows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>With thousands of records, queries may take several seconds</p>
</li>
<li>
<p>With hundreds of thousands of records, queries can timeout</p>
</li>
<li>
<p>The performance impact affects not just your query, but the entire org&#8217;s database performance</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In contrast, when you use trailing wildcards like <code>'smith%'</code>, the database can use indexes to quickly locate all records that start with "smith" and then filter from there. This is exponentially faster than scanning every record.</p>
</div>
<div class="paragraph">
<p>The Salesforce query optimizer is designed to use the most efficient execution plan, but leading wildcards make it impossible to leverage indexes, regardless of how well your data model is designed.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Poor query performance that worsens as data volume grows. In large orgs, queries with leading wildcards can cause timeouts, slow down the entire system, and create a poor user experience. This can affect reports, list views, and any custom functionality that relies on these queries.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace leading wildcards with trailing wildcards when you know the beginning of the search term. This allows the database to use indexes for much better performance.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">List&lt;Contact&gt; contacts = [SELECT Id, LastName FROM Contact WHERE LastName LIKE '%smith%']; // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">List&lt;Contact&gt; contacts = [SELECT Id, LastName FROM Contact WHERE LastName LIKE 'smith%'];</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>SOQL and SOSL Guidelines - <a href="https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/sforce_api_calls_soql_sosl_intro.htm">Official Salesforce documentation on SOQL and SOSL best practices</a></p>
</li>
<li>
<p>Query Optimizer - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/langCon_apex_SOQL_query_plan_optimizer.htm">Documentation on how Salesforce&#8217;s query optimizer works and performance considerations</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-1049: Excessive Data Query Operations in a Large Data Table - <a href="https://cwe.mitre.org/data/definitions/1049.html">Describes the weakness of performing excessive data queries that can lead to performance degradation</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S1739" class="rspec-auto-link">RSPEC-1739</a> - <a href="https://rules.sonarsource.com/abap/RSPEC-1739/">Similar rule for ABAP addressing leading wildcards in database queries</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>