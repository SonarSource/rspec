<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some types are not very well suited for use in a bit-field, because their behavior is implementation-defined. When defining a bit-field, you should stick to the following safe and portable types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In C: <code>signed short</code>, <code>unsigned short</code>, <code>signed char</code>, <code>unsigned char</code>, <code>signed int</code>, <code>unsigned int</code> or <code>_Bool</code></p>
</li>
<li>
<p>In C&#43;&#43; before C&#43;&#43;14: all enumerated types, as well as <code>signed short</code>, <code>unsigned short</code>, <code>signed char</code>, <code>unsigned char</code>, <code>signed int</code>, <code>unsigned int</code>, <code>signed long</code>, <code>unsigned long</code>, <code>signed long long</code>, <code>unsigned long long</code><code> or bool</code></p>
</li>
<li>
<p>In C&#43;&#43; starting at C&#43;&#43;14:  all enumerated and integral types</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">// Assuming we are in C
int b:3; // Noncompliant - may have the range of values 0..7 or -4..3</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">unsigned int b:3;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>MISRA C:2004, 6.4 - Bit fields shall only be defined to be of type <em>unsigned int</em> or <em>signed int</em>.</p>
</li>
<li>
<p>MISRA C&#43;&#43;:2008, 9-6-2 - Bit-fields shall be either <em>bool</em> type or an explicitly <em>unsigned</em> or <em>signed</em> integral type.</p>
</li>
<li>
<p>MISRA C:2012, 6.1 - Bit-fields shall only be declared with an appropriate type</p>
</li>
<li>
<p><a href="https://wiki.sei.cmu.edu/confluence/x/VNYxBQ">CERT, INT12-C.</a> - Do not make assumptions about the type of a plain int bit-field when used in an expression</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Change type of bit field.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_duplicated_by_s1008">is duplicated by: <a data-rspec-id="S1008" class="rspec-auto-link">S1008</a></h3>

</div>
<div class="sect2">
<h3 id="_on_28_sep_2014_210035_evgeny_mandrikov_wrote">on 28 Sep 2014, 21:00:35 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>What about MISRA C&#43;&#43;:2008 9-6-2?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_3_oct_2014_191105_ann_campbell_wrote">on 3 Oct 2014, 19:11:05 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~evgeny.mandrikov]</p>
</div>
<div class="paragraph">
<p>First, thanks for finding the C&#43;&#43; analog. I&#8217;m guessing it was the difference between "Bit fields" (C) and "Bit-fields" (C&#43;&#43;) which kept me from finding it when I looked.</p>
</div>
<div class="paragraph">
<p>Second, MISRA C&#43;&#43;:2008, 9-6-2 broadens the scope to include <code>bool</code> as acceptable. Since C has no <code>bool</code> type, how would you like to proceed? Define an exception?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_3_oct_2014_191453_evgeny_mandrikov_wrote">on 3 Oct 2014, 19:14:53 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] C11 has _Bool type.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_8_dec_2014_224511_evgeny_mandrikov_wrote">on 8 Dec 2014, 22:45:11 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>Note to myself - see CERT INT12-C.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_9_dec_2014_214703_evgeny_mandrikov_wrote">on 9 Dec 2014, 21:47:03 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>Note to myself:</p>
</div>
<div class="paragraph">
<p>in C&#43;&#43;11 6.9p3:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>It is implementation-defined whether a plain (neither explicitly signed nor unsigned) char, short, int, long, or long long bit-field is signed or unsigned.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>whereas in working draft N4140 of C&#43;&#43;14 there is no such statement and in section C.1.8:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Change: Bit-fields of type plain int are signed.</p>
</div>
<div class="paragraph">
<p>Rationale: Leaving the choice of signedness to implementations could lead to inconsistent definitions of template specializations. For consistency, the implementation freedom was eliminated for non-dependent types, too.</p>
</div>
<div class="paragraph">
<p>Effect on original feature: The choise is implementation-defined in C, but not so in C&#43;&#43;.</p>
</div>
<div class="paragraph">
<p>Difficulty of converting: Syntactic transformation.</p>
</div>
<div class="paragraph">
<p>How widely used: Seldom.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_on_16_dec_2014_094921_evgeny_mandrikov_wrote">on 16 Dec 2014, 09:49:21 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>Note that description was tuned for C (CPP-638), but must be tuned for C&#43;&#43; at a time of implementation.</p>
</div>
</div>
</div>
</div>