<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Having an infinite loop or recursion will lead to a program failure or a program never finishing the execution.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">public int Sum()
{
    var i = 0;
    var result = 0;
    while (true) // Noncompliant: the program will never stop
    {
        result += i;
        i++;
    }
    return result;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This can happen in multiple scenarios.</p>
</div>
<div class="sect2">
<h3 id="_loop_statements">Loop statements</h3>
<div class="paragraph">
<p><code>while</code> and <code>for</code> loops with no <code>break</code> or <code>return</code> statements that have exit conditions which are always <code>false</code> will be indefinitely executed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_goto_statements">"goto" statements</h3>
<div class="paragraph">
<p><code>goto</code> statement with nothing that stops it from being executed over and over again will prevent the program from the completion.</p>
</div>
</div>
<div class="sect2">
<h3 id="_recursion">Recursion</h3>
<div class="paragraph">
<p>When a <a href="https://en.wikipedia.org/wiki/Recursion_(computer_science)">recursive</a> method call chain lacks an exit condition,
the <a href="https://en.wikipedia.org/wiki/Call_stack">call stack</a> will reach its limit and the program will crash due to a <a href="https://learn.microsoft.com/en-us/dotnet/api/system.stackoverflowexception">StackOverflowException</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">int Pow(int num, int exponent)
{
  return num * Pow(num, exponent - 1); // Noncompliant: no condition under which Pow isn't re-called
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, <code>Pow</code> will keep calling <code>Pow</code> with <code>exponent - 1</code> forever, until the program crashes with a StackOverflowException.</p>
</div>
<div class="paragraph">
<p>Recursion provides some benefits.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Simplified code</strong>: recursion can often lead to more concise and elegant code by breaking down complex problems into smaller, more manageable parts.</p>
</li>
<li>
<p><strong>Improved code readability</strong>: compared to iterative solutions, recursive solutions can be easier to understand and reason about.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, it has disadvantages as well.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Stack overflow</strong>: Recursive functions can lead to <a href="https://learn.microsoft.com/en-us/dotnet/api/system.stackoverflowexception">stack overflow</a> if the recursion is too deep, potentially causing the program to crash.</p>
</li>
<li>
<p><strong>Performance overhead</strong>: Recursive function calls can lead to poor performance due to the need to push and pop <a href="https://en.citizendium.org/wiki/Stack_frame#:~:text=In%20computer%20science%2C%20a%20stack,only%20exist%20at%20run%2Dtime">stack frames</a>, making them potentially slower than iterative solutions.</p>
</li>
<li>
<p><strong>Difficulty in debugging</strong>: Debugging recursive code can be challenging, as multiple recursive calls can make it harder to track the flow of execution and identify logical errors.</p>
</li>
<li>
<p><strong>Space complexity</strong>: Recursive algorithms may require more memory compared to iterative approaches, as each recursive call adds a new frame to the call stack.</p>
</li>
<li>
<p><strong>Lack of control</strong>: Recursion can sometimes lead to infinite loops or unexpected behavior if not properly implemented or terminated, making it crucial to have proper base cases and exit conditions.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The program&#8217;s logic should incorporate a mechanism to break out of the control flow loop.
Here are some examples.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="ulist">
<ul>
<li>
<p>Use a loop condition which eventually evaluates to <code>false</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">public int Sum()
{
    var i = 0;
    var result = 0;
    while (true) // Noncompliant: the program will never stop
    {
        result += i;
        i++;
    }
    return result;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">public int Sum()
{
    var i = 0;
    var result = 0;
    while (result &lt; 1000)
    {
        result += i;
        i++;
    }
    return result;
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>As <a data-rspec-id="S907" class="rspec-auto-link">S907</a> generally suggests, avoid using <code>goto</code> statements. Instead, you can use a loop statement or explicit recursion.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">public int Sum()
{
    var result = 0;
    var i = 0;
iteration:
    // Noncompliant: program never ends
    result += i;
    i++;
    goto iteration;
    return result;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">public int Sum()
{
    var i = 0;
    var result = 0;
    while (result &lt; 1000)
    {
        result += i;
        i++;
    }
    return result;
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For a recursion make sure there is a base case when the recursive method is not re-called.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example_3">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">int Pow(int num, int exponent)
{
  return num * Pow(num, exponent - 1); // Noncompliant: no condition under which Pow isn't re-called
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_3">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">int Pow(int num, int exponent)
{
  if (exponent &gt; 1) // recursion is now conditional and stoppable
  {
    num = num * Pow(num, exponent - 1);
  }
  return num;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/statements/iteration-statements#the-for-statement">The "for" statement</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/statements/iteration-statements#the-while-statement">The "while" statement</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/statements/jump-statements#the-goto-statement">The "goto" statement</a></p>
</li>
<li>
<p>Wikipedia <a href="https://en.wikipedia.org/wiki/Recursion_(computer_science)">Recursion - wiki</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/api/system.stackoverflowexception?view=net-7.0">StackOverflowException class</a></p>
</li>
<li>
<p><a data-rspec-id="S907" class="rspec-auto-link">S907</a> - "goto" statement should not be used</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_articles_blog_posts">Articles &amp; blog posts</h3>
<div class="ulist">
<ul>
<li>
<p>Edsger Dijkstra - <a href="https://www.cs.utexas.edu/users/EWD/transcriptions/EWD02xx/EWD215.html">A Case against the GO TO Statement</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Add a way to break out of this \[[method|property|property accessor]'s recursion|method|property accessor].</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_30_may_2023_161440_greg_paidis_wrote">on 30 May 2023, 16:14:40 Greg Paidis wrote:</h3>
<div class="paragraph">
<p>During a LaYC sprint, I removed abap, cobol, flex, javascript, php, rpg, vb6 and vbnet dummy implementations, since they are not implemented in the corresponding analyzers and there are no tickets open in order to do so.</p>
</div>
</div>
</div>
</div>