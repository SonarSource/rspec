<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when <code>require</code> is used with relative paths to load local files instead of using <code>require_relative</code> or explicit path construction.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When requiring local files in Ruby, using <code>require</code> with relative paths creates fragile code that depends on the current working directory and Ruby&#8217;s load path configuration.</p>
</div>
<div class="paragraph">
<p>The <code>require</code> method resolves paths by searching through Ruby&#8217;s load path (<code>$LOAD_PATH</code>) and the current working directory. However, since Ruby 1.9, the current directory (".") was removed from the default load path for security reasons. This means that <code>require 'local_file'</code> or <code>require './local_file'</code> will fail with a <code>LoadError</code> when the script is executed from a different directory or when the current directory is not explicitly added to the load path.</p>
</div>
<div class="paragraph">
<p>This creates several problems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Execution context dependency</strong>: The same script may work when run from one directory but fail when run from another</p>
</li>
<li>
<p><strong>Deployment fragility</strong>: Code that works in development may break in production due to different execution contexts</p>
</li>
<li>
<p><strong>Testing complications</strong>: Tests may pass or fail depending on the directory from which the test runner is executed</p>
</li>
<li>
<p><strong>Maintenance burden</strong>: Developers may resort to modifying the global <code>$LOAD_PATH</code> or implementing workarounds, which pollutes the global state</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The issue is particularly common in Ruby applications where files need to load other files from the same project, such as utility modules, configuration files, or related classes.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Applications may fail to start or function correctly when deployed or executed from different directories, leading to <code>LoadError</code> exceptions in production environments. This can cause service outages and make the codebase difficult to maintain and test reliably.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use <code>require_relative</code> to load files relative to the current file&#8217;s location. This method resolves paths relative to the file containing the require statement, making the code portable across different execution contexts.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">require 'helper_module'
require './config/settings'   # Noncompliant
require '../utils/formatter'  # Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">require 'helper_module'
require_relative './config/settings'
require_relative '../utils/formatter'</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Ruby require_relative documentation - <a href="https://ruby-doc.org/core/Kernel.html#method-i-require_relative">Official Ruby documentation for the require_relative method</a></p>
</li>
<li>
<p>Ruby require documentation - <a href="https://ruby-doc.org/core/Kernel.html#method-i-require">Official Ruby documentation explaining how require resolves file paths</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>