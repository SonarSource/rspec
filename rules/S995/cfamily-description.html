<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Const correctness is an important tool for type safety. It allows for catching coding errors at compile time and it documents the code for maintainers.</p>
</div>
<div class="paragraph">
<p>Correctly const-qualifying pointers can be tricky because the indirection they add can also be const.</p>
</div>
<div class="paragraph">
<p>For a pointer <code>X * ptr</code>, const can be written in three different places:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>const X * ptr</code> and <code>X const * ptr</code> are identical and mean that the X object <code>ptr</code> points to cannot be changed.</p>
</li>
<li>
<p><code>X * const ptr</code> means that the pointer cannot be changed to point to a different X object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In a function signature, the first <code>const X * ptr</code> (or its equivalent <code>X const * ptr</code>) is the one that will bring type-safety. It protects against changing the value pointed at.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">void externalFunction(int * a, const int * b);

void myfunc() {
  int a = 1;
  int b = 2;
  externalFunction(&amp;a, &amp;b);
  // a can now have any value
  // We know that b is still '2'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This rule detects when a pointer or reference parameter could be made const</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">void myfunc (      int * param1,  // object is modified
             const int * param2,
                   int * param3, // Noncompliant
             int * const param4) // Noncompliant: const doesn't qualify what is pointed at.
{
  *param1 = *param2 + *param3 + *param4;
}

void increment (int &amp; value,
                int &amp; increment) // Noncompliant
{
  value += increment;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When adding all possible <code>const</code> qualifications, we get:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">void myfunc (      int * param1,  // object is modified
             const int * param2,
             const int * param3,
             const int * param4)
{
  *param1 = *param2 + *param3 + *param4;
}

void increment (int &amp; value,
                const int &amp; increment)
{
  value += increment;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_articles_blog_posts">Articles &amp; blog posts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://isocpp.org/wiki/faq/const-correctness">ISO C&#43;&#43; FAQ about const correctness</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_external_coding_guidelines">External coding guidelines</h3>
<div class="ulist">
<ul>
<li>
<p>MISRA C:2004, 16.7 - A pointer parameter in a function prototype should be declared as pointer to const if the pointer is not used to modify the addressed object.</p>
</li>
<li>
<p>MISRA C&#43;&#43;:2008, 7-1-2 - A pointer or reference parameter in a function shall be declared as pointer to const or reference to const if the corresponding object is not modified.</p>
</li>
<li>
<p>MISRA C:2012, 8.13 - A pointer should point to a const-qualified type whenever possible</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Mark "XXX" as const at every possible pointer level.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_duplicated_by_s931">is duplicated by: <a data-rspec-id="S931" class="rspec-auto-link">S931</a></h3>

</div>
<div class="sect2">
<h3 id="_is_duplicated_by_s1252">is duplicated by: <a data-rspec-id="S1252" class="rspec-auto-link">S1252</a></h3>

</div>
<div class="sect2">
<h3 id="_is_related_to_s1900">is related to: <a data-rspec-id="S1900" class="rspec-auto-link">S1900</a></h3>

</div>
<div class="sect2">
<h3 id="_on_6_sep_2019_105530_loïc_joly_wrote">on 6 Sep 2019, 10:55:30 Loïc Joly wrote:</h3>
<div class="paragraph">
<p>The current implementation of this rule has one limitation: MISRA has the exception that in a set of overridden function, on of the function modifying a parameter is enough to require all functions to modify it. But implementing this exception requires project level analysis, that we don&#8217;t currently support.</p>
</div>
</div>
</div>
</div>