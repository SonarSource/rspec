<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>std::format</code> and the related formatting functions provide two different options to pad numerical values up to a specific width:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Custom character padding: this option can align text to the left, center, or right using any character. <br>
For example, <code>std::format("{:*&gt;5}", num)</code> aligns <code>num</code> to the right (<code>&gt;</code>) by inserting <code>*</code> characters until it reaches a width of 5.</p>
</li>
<li>
<p>Numeric padding with <code>0</code>: this option is available for most arithmetic types and is enabled by adding <code>0</code> before the width specifier.<br>
For example, <code>std::format("{:05}", num)</code> adds enough <code>0</code> before <code>num</code> to align it to the right and reach a width of 5.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>0</code> can also be used as a custom character padding, but this syntax is confusing and may produce unexpected results when aligning negative values to the right:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">// Noncompliant: character padding results in "00-10"
std::format("{:0&gt;5}", -10) // "0" is a custom character padding here.

// Compliant: numeric padding results in "-0010"
std::format("{:05}", -10) // The "&gt;" was removed; "0" now means numeric padding.</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when a format specification uses <code>0</code> as a custom padding character to right-align a value instead of using the numeric padding.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="paragraph">
<p>This example shows how custom character padding and numeric padding differ when formatting a floating-point variable <code>num</code>. It uses a sign specifier (<code>&#43;</code>) and the alternative form (<code>#</code>).</p>
</div>
<div class="paragraph">
<p>As a side note, numeric padding also works with other specifiers to change the type representation, set the precision, apply locale-specific formatting, etc.</p>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">auto stringify(float num) {
  return std::format("{:0&gt;+#5}", num); // Noncompliant: custom character padding with "0"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="paragraph">
<p>A compliant solution is to remove the alignment specifier (<code>&gt;</code>) and move the <code>0</code> right before the width specifier (<code>5</code>) to change its semantics:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">auto stringify(float num) {
  return std::format("{:+#05}", num); // Numeric padding.
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here are examples of outputs for the two code snippets:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Value of <code>num</code></th>
<th class="tableblock halign-left valign-top">Noncompliant output</th>
<th class="tableblock halign-left valign-top">Compliant output</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"0+10."</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"+010."</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"0-10."</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"-010."</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NAN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"0+nan"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>" +nan"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-INFINITY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"0-inf"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>" -inf"</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>C&#43;&#43; reference - <a href="https://en.cppreference.com/w/cpp/utility/format/format"><code>std::format</code></a></p>
</li>
<li>
<p>C&#43;&#43; reference - <a href="https://en.cppreference.com/w/cpp/utility/format/formatter#Standard_format_specification">standard format specification</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="paragraph">
<p><a data-rspec-id="S6483" class="rspec-auto-link">S6483</a> detects incompatible use of numeric and character padding specifiers.</p>
</div>
</div>
</div>
</div>