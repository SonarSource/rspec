<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When using a floating-point loop counter, accumulation of rounding errors may result in a mismatch between the expected and actual number of iterations. This can happen when a loop step that is not a power of the floating-point radix is rounded to a value that can be represented.</p>
</div>
<div class="paragraph">
<p>Even if a loop with a floating-point loop counter appears to behave correctly on one implementation, it may give a different number of iterations on another implementation.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">uint32_t counter = 0u;
for ( float32_t f = 0.0f; f &lt; 1.0f; f += 0.001f ) // Noncompliant, floating type used as loop counter
{
  ++counter;
}

float32_t f = 0.0f;
while ( f &lt; 1.0f ) // Noncompliant, floating type used as loop counter
{
  f += 0.001f;
}

float32_t f;
for ( uint32_t counter = 0u; counter &lt; 1000u; ++counter ) // Compliant
{
  f = ( float32_t ) counter * 0.001f;
}

float32_t f = read_float32 ( );
uint32_t u32a;
do
{
  u32a = read_u32 ( );
} while ( ( ( float32_t ) u32a - f ) &gt; 10.0f ); // Compliant, f does not change in the loop so cannot be a loop counter</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>MISRA C:2004, 13.4 - The controlling expression of a for statement shall not contain any objects of floating type.</p>
</li>
<li>
<p>MISRA C&#43;&#43;:2008, 6-5-1- A for loop shall contain a single loop-counter which shall not have floating type.</p>
</li>
<li>
<p>MISRA C:2012, 14.1 - A loop counter shall not have essentially floating type</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_duplicated_by_s885">is duplicated by: <a data-rspec-id="S885" class="rspec-auto-link">S885</a></h3>

</div>
<div class="sect2">
<h3 id="_duplicates_s2193">duplicates: <a data-rspec-id="S2193" class="rspec-auto-link">S2193</a></h3>

</div>
<div class="sect2">
<h3 id="_on_20_oct_2014_125004_samuel_mercier_wrote">on 20 Oct 2014, 12:50:04 Samuel Mercier wrote:</h3>
<div class="paragraph">
<p>MISRA C 2004 : The controlling expression of a for statement shall not contain any objects of floating type.</p>
</div>
<div class="paragraph">
<p>&#8594; controlling expression : possibly multiple variables involved</p>
</div>
<div class="paragraph">
<p>MISRA C&#43;&#43; 2008 : A for loop shall contain a single loop-counter which shall not have floating type.</p>
</div>
<div class="paragraph">
<p>&#8594; single variable. Description and example are misleading.</p>
</div>
<div class="paragraph">
<p>MISRA C 2012 : A loop counter shall not have essentially floating type</p>
</div>
<div class="paragraph">
<p>&#8594; probably a single variable</p>
</div>
<div class="paragraph">
<p>Strictly speaking the definition of 2004 does not match those of 2008 and 2012.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_20_oct_2014_132546_ann_campbell_wrote">on 20 Oct 2014, 13:25:46 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>See also</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.securecoding.cert.org/confluence/x/AoG_/">FLP30-C.</a> -  Do not use floating-point variables as loop counters</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>cc [~freddy.mallet]</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_23_oct_2014_144115_ann_campbell_wrote">on 23 Oct 2014, 14:41:15 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~samuel.mercier] for a message, I would prefer something like: "xxx" is a "type" and should not be used as a loop counter.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_13_jan_2015_165103_massimo_paladin_wrote">on 13 Jan 2015, 16:51:03 Massimo PALADIN wrote:</h3>
<div class="paragraph">
<p>Duplicates <a data-rspec-id="S2193" class="rspec-auto-link">RSPEC-2193</a>.</p>
</div>
</div>
</div>
</div>