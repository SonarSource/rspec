<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Web-only libraries should only be used in Flutter web plugins.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following libraries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://dart.dev/libraries/dart-html"><code>dart:html</code></a></p>
</li>
<li>
<p><a href="https://api.flutter.dev/flutter/dart-js/dart-js-library.html"><code>dart:js</code></a></p>
</li>
<li>
<p><a href="https://api.flutter.dev/flutter/dart-js_util/dart-js_util-library.html"><code>dart:js_util</code></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>are not supported outside of a <a href="https://dart.dev/web">web context</a>.</p>
</div>
<div class="paragraph">
<p>Using them in a non-Flutter library or in a Flutter library that is not a web plugin may lead to runtime errors.</p>
</div>
<div class="paragraph">
<p>The rule reports an issue on any <code>import</code> statement that references one of the above libraries:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">import 'dart:html';    // Non compliant
import 'dart:js';      // Non compliant
import 'dart:js_util'; // Non compliant</code></pre>
</div>
</div>
<div class="paragraph">
<p>A non-Flutter library is identified as a library with a <code>pubspec.yaml</code> file that does not have a dependency on the <code>flutter</code> package:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">dependencies:
  other_package: ^1.0.0
  # Missing flutter dependency</code></pre>
</div>
</div>
<div class="paragraph">
<p>A Flutter library that is a web plugin is identified as a library with a <code>pubspec.yaml</code> file that has a dependency on the <code>flutter</code> package and declares the web context, potentially among other platforms:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">name: my_project
dependencies:
  flutter:
    sdk: flutter

flutter:
  plugin:
    platforms:
      web:
        flutter_web: any
        flutter_web_ui: any
      android:
        package: com.example.hello
        pluginClass: HelloPlugin</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Remove the dependency to the web-only library.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">import 'dart:html';    // Non compliant
import 'dart:js';      // Non compliant
import 'dart:js_util'; // Non compliant
import 'package:other_package/other_library.dart';</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dart" data-lang="dart">import 'package:other_package/other_library.dart';</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Dart Docs - <a href="https://dart.dev/tools/linter-rules/avoid_web_libraries_in_flutter">Dart Linter rule - avoid_web_libraries_in_flutter</a></p>
</li>
<li>
<p>Dart API Reference - <a href="https://dart.dev/libraries/dart-html">Core libraries - <code>dart:html</code></a></p>
</li>
<li>
<p>Flutter API Reference - <a href="https://api.flutter.dev/flutter/dart-js/dart-js-library.html">Flutter packages - <code>dart:js</code></a></p>
</li>
<li>
<p>Flutter API Reference <a href="https://api.flutter.dev/flutter/dart-js_util/dart-js_util-library.html">Flutter packages - <code>dart:js_util</code></a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Don&#8217;t use web-only libraries outside Flutter web plugins.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>The entire <code>import</code> statement, including the semi-colon: e.g. <code>import 'dart:html';</code>.</p>
</div>
</div>
</div>
</div>