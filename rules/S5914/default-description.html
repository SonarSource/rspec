<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when an assertion result is constant.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Assertions are meant to detect when code behaves as expected. An assertion which fails or succeeds all the time does not achieve this. Either it is redundant and should be removed to improve readabity or it is a mistake and the assertion should be corrected.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when an assertion method is given parameters which will make it succeed or fail all the time. It covers three cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an <code>assert</code> statement or a unittest&#8217;s <code>assertTrue</code> or <code>assertFalse</code> method is called with a value which will be always True or always False.</p>
</li>
<li>
<p>a unittest&#8217;s <code>assertIsNotNone</code> or <code>assertIsNone</code> method is called with a value which will always be None or never be None.</p>
</li>
<li>
<p>a unittest&#8217;s <code>assertIsNot</code> or <code>assertIs</code> method is called with a literal expression creating a new object every time (ex: <code>[1, 2, 3]</code>).</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import unittest

class MyTestCase(unittest.TestCase):
    def expect_not_none(self):
        self.assertIsNotNone(round(1.5))  # Noncompliant: This assertion always succeeds because "round" returns a number, not None.

    def helper_compare(param):
        self.assertIs(param, [1, 2, 3])  # Noncompliant: This assertion always fails because [1, 2, 3] creates a new object.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import unittest

class MyTestCase(unittest.TestCase):
    def expect_not_none(self):
        self.assertNotEqual(round(1.5), 0)

    def helper_compare(param):
        self.assertEqual(param, [1, 2, 3])</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.python.org/3/library/unittest.html">Python documentation - the <code>unittest</code> module</a></p>
</li>
<li>
<p><a href="https://docs.python.org/3/reference/simple_stmts.html#the-assert-statement">Python documentation - the <code>assert</code> statement</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>for assertTrue/assertFalse</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace this expression; its boolean value is constant.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>for assertIsNone, assertIsNotNone</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove this identity assertion; it will always fail.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>for assertIs, assertIsNot</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Primary: Replace this "assertIs" call with an "assertEqual" call.</p>
</li>
<li>
<p>Secondary: This expression creates a new object every time.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>for assertTrue/assertFalse: the argument</p>
</div>
<div class="paragraph">
<p>for assertIsNone, assertIsNotNone: the whole assertion</p>
</div>
<div class="paragraph">
<p>for assertIs, assertIsNot:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>primary: the assertion method</p>
</li>
<li>
<p>secondary: the expression creating a new object every time</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s5727">relates to: <a data-rspec-id="S5727" class="rspec-auto-link">S5727</a></h3>

</div>
<div class="sect2">
<h3 id="_relates_to_s5796">relates to: <a data-rspec-id="S5796" class="rspec-auto-link">S5796</a></h3>

</div>
<div class="sect2">
<h3 id="_relates_to_s5797">relates to: <a data-rspec-id="S5797" class="rspec-auto-link">S5797</a></h3>

</div>
</div>
</div>