
Accessing attributes on `None` is almost always a logical error and will raise
an `AttributeError`.
To fix this issue, make sure not to access an attribute or method on a value
that can be `None`.

== Why is this an issue?

`None` is a built-in object that represents the absence of a value.
It is often used as a placeholder value for variables that only sometimes hold a
value, or as a return value for method calls that have no result.

Attributes and methods of symbols that sometimes can be `None` should only be
accessed when it is certain that they hold a value and are not set to `None`.
Otherwise, an `AttributeError` is raised and the program is interrupted.

Hence, this issue indicates a fatal logical error as it results from incorrect
assumptions about the state of variables or the results of computations.

`None` does support a fixed set of special attributes like `__class__` or
`__bool__`, and this issue is not raised when accessing these attributes.

=== What is the potential impact?

include::../../shared_content/layc/exception-impact.adoc[]

If the `None` value consequently the `AttributeError` can be induced by user
input, this issue may even be exploited by attackers to disrupt your application
or gain information from stack traces.

== How to fix it

If your code contains `if-else` statements or similar constructs where some
branches potentially assign the `None` value to a variable, you need to ensure
that this variable is handled safely afterwards.
I.e. its attributes should not be accessed at all, or only after explicitly
confirming that it is not `None`.

For any function calls that can return `None` under certain conditions,
carefully confirm that your code avoids these conditions.
Again, it is likely safer to also explicitly check for a `None` return value.

=== Code examples

==== Noncompliant code example

[source,python,diff-id=1,diff-type=noncompliant]
----
def myfunc(param):
    if param is None:
        print(param.test())  # Noncompliant

    if param == None:
        print(param.test())  # Noncompliant

    if param is not None:
        pass
    else:
        print(param.test())  # Noncompliant

    if param != None:
        pass
    else:
        print(param.test())  # Noncompliant
----

==== Compliant code example

[source,python,diff-id=1,diff-type=compliant]
----
def myfunc(param):
    TODO
----

=== How does this work?

include::../see.adoc[]

ifdef::env-github,rspecator-view[]

'''
== Implementation Specification
(visible only on this page)

include::../message.adoc[]

include::../highlighting.adoc[]

'''
== Comments And Links
(visible only on this page)

include::../comments-and-links.adoc[]

endif::env-github,rspecator-view[]
