This rule raises an issue when a `require()` statement imports a module that is not declared in the project's `package.json` dependencies or devDependencies.

== Why is this an issue?

Using `require()` to import modules that aren't explicitly listed in your `package.json` creates several risks:

**Deployment failures**: Code that works locally may break when deployed or when dependencies are reinstalled, because the required module won't be available.

**Transitive dependency risks**: If your code relies on a module that's only available as a dependency of another dependency (transitive dependency), your application becomes fragile. The parent dependency could remove or change its own dependencies at any time, breaking your code.

**Development vs production inconsistencies**: A module might be available during development but missing in production environments, leading to runtime errors that are difficult to debug.

**Team collaboration issues**: Other developers working on the project may not have the required modules installed, causing the application to fail for them.

To maintain reliable and predictable builds, all modules used by your application should be explicitly declared as dependencies in `package.json`.

=== What is the potential impact?

Applications may fail to start or crash at runtime when deployed to environments where the undeclared dependencies are not available. This can lead to production outages and inconsistent behavior across different environments.

=== How to fix?


Add the missing module to your package.json dependencies. Use `npm install <module-name>` to install and add it as a dependency, or `npm install --save-dev <module-name>` if it's only needed during development.

==== Non-compliant code example

[source,javascript,diff-id=1,diff-type=noncompliant]
----
// package.json only has: { "dependencies": { "express": "^4.0.0" } }
const lodash = require('lodash'); // Noncompliant - lodash not in dependencies
const express = require('express');
----

==== Compliant code example

[source,javascript,diff-id=1,diff-type=compliant]
----
// After running: npm install lodash
// package.json now has: { "dependencies": { "express": "^4.0.0", "lodash": "^4.0.0" } }
const lodash = require('lodash');
const express = require('express');
----

=== Documentation

 * npm documentation - package.json - https://docs.npmjs.com/cli/v10/configuring-npm/package-json[Official npm documentation on package.json structure and dependency management]
 * Node.js documentation - require() - https://nodejs.org/api/modules.html#requireid[Official Node.js documentation on the require() function]

=== Related Rules

 * n/no-extraneous-import - https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-extraneous-import.md[Similar rule for ES6 import statements]
 * n/no-missing-require - https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-missing-require.md[Disallow require() of modules that don't exist]

