This rule raises an issue when a `require()` statement imports a module that is not listed in the project's `package.json` dependencies or devDependencies.

== Why is this an issue?

Using `require()` to import modules that aren't explicitly declared as dependencies in `package.json` creates several risks:

**Deployment failures**: Code that works locally may break when deployed to production or when dependencies are reinstalled, because the required module won't be available.

**Transitive dependency risks**: If your code relies on a module that's only available as a transitive dependency (a dependency of another dependency), that module could disappear if the parent dependency changes or removes it.

**Development vs production inconsistencies**: A module might be available during development but missing in production environments, leading to runtime errors that are difficult to debug.

**Team collaboration issues**: Other developers working on the project may not have the required modules installed, causing the application to fail for them.

Explicitly declaring all required modules as dependencies in `package.json` ensures consistent behavior across all environments and makes the project's requirements clear.

=== What is the potential impact?

Applications may fail at runtime with "module not found" errors when deployed to production or when dependencies are reinstalled. This can cause service outages and make the codebase unreliable for team members.

=== How to fix?


Add the missing module to your package.json dependencies. Install it using npm and save it as a dependency.

==== Non-compliant code example

[source,javascript,diff-id=1,diff-type=noncompliant]
----
// package.json only has: { "dependencies": { "express": "^4.18.0" } }
const lodash = require('lodash'); // Noncompliant - lodash not in dependencies
const express = require('express');
----

==== Compliant code example

[source,javascript,diff-id=1,diff-type=compliant]
----
// After running: npm install lodash --save
// package.json now has: { "dependencies": { "express": "^4.18.0", "lodash": "^4.17.21" } }
const lodash = require('lodash'); // Compliant - lodash is now in dependencies
const express = require('express');
----

=== Documentation

 * npm documentation - package.json dependencies - https://docs.npmjs.com/cli/v11/configuring-npm/package-json#dependencies[Official npm documentation explaining how to declare dependencies in package.json]
 * Node.js require() documentation - https://nodejs.org/api/modules.html#requireid[Official Node.js documentation for the require() function and module loading]

=== Related Rules

 * n/no-missing-require - https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-missing-require.md[Disallow require() of modules that don't exist]
 * n/no-unpublished-require - https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-unpublished-require.md[Disallow require() of modules in devDependencies from production code]

