This rule raises an issue when a `require()` statement imports a module that is not listed in the project's `package.json` dependencies or devDependencies.

== Why is this an issue?

When code uses `require()` to import modules that are not explicitly declared as dependencies in `package.json`, it creates several risks:

**Deployment Failures**: The application may work locally but fail when deployed to production or when dependencies are reinstalled from scratch. This happens because the missing dependency won't be installed automatically.

**Transitive Dependency Issues**: Sometimes code works because it relies on a transitive dependency (a dependency of another dependency). However, if the parent dependency changes or removes that transitive dependency, your code will break unexpectedly.

**Environment Inconsistencies**: The missing dependency might be a development dependency that's available locally but not in production, causing runtime errors in production environments.

**Team Collaboration Problems**: Other developers or CI/CD systems may not have the missing dependency installed, leading to build failures and inconsistent behavior across different environments.

Explicitly declaring all dependencies in `package.json` ensures that the project's requirements are clearly documented and that all necessary modules will be installed consistently across different environments.

=== What is the potential impact?

Missing dependencies can cause runtime errors, deployment failures, and inconsistent behavior across different environments. This can lead to application crashes, failed builds, and reduced reliability of the software.

=== How to fix in Node.js?

Add the missing module to your package.json dependencies. Use `npm install <module-name>` to install and add it to dependencies, or `npm install --save-dev <module-name>` for development dependencies.

==== Non-compliant code example

[source,javascript,diff-id=1,diff-type=noncompliant]
----
// package.json does not include 'lodash' as a dependency
const _ = require('lodash'); // Noncompliant

// Using a transitive dependency directly
const chalk = require('chalk'); // Noncompliant - chalk might be a dependency of another package
----

==== Compliant code example

[source,javascript,diff-id=1,diff-type=compliant]
----
// After running: npm install lodash
// package.json now includes 'lodash' in dependencies
const _ = require('lodash');

// After running: npm install chalk
// package.json now includes 'chalk' in dependencies
const chalk = require('chalk');
----

If you need to allow specific modules that are intentionally not in package.json (such as built-in Node.js modules or global packages), configure the rule's allowModules option.

==== Non-compliant code example

[source,javascript,diff-id=2,diff-type=noncompliant]
----
// ESLint configuration without allowModules
{
  "rules": {
    "n/no-extraneous-require": "error"
  }
}

// This would trigger an error for global modules
const globalModule = require('some-global-module'); // Noncompliant
----

==== Compliant code example

[source,javascript,diff-id=2,diff-type=compliant]
----
// ESLint configuration with allowModules
{
  "rules": {
    "n/no-extraneous-require": ["error", {
      "allowModules": ["some-global-module"]
    }]
  }
}

// Now this is allowed
const globalModule = require('some-global-module');
----

=== Documentation

 * ESLint Plugin N - no-extraneous-require - https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-extraneous-require.md[Official documentation for the no-extraneous-require rule]
 * npm package.json documentation - https://docs.npmjs.com/cli/v9/configuring-npm/package-json[Official npm documentation for package.json file structure and dependencies]
 * Node.js require() documentation - https://nodejs.org/api/modules.html#requireid[Official Node.js documentation for the require() function]

=== Standards

 * Node.js Best Practices - Dependency Management - https://github.com/goldbergyoni/nodebestpractices#2-error-handling-practices[Best practices for managing dependencies in Node.js applications]

=== Related Rules

 * n/no-missing-require - https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-missing-require.md[Disallow require() expressions which import non-existent modules]
 * n/no-extraneous-import - https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-extraneous-import.md[Disallow import declarations which import extraneous modules (ES6 import version)]

