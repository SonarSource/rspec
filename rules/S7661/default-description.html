<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when a <code>require()</code> statement imports a module that is not listed in the project&#8217;s <code>package.json</code> dependencies or devDependencies.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using <code>require()</code> to import modules that aren&#8217;t explicitly declared as dependencies in <code>package.json</code> creates several risks:</p>
</div>
<div class="paragraph">
<p><strong>Deployment failures</strong>: Code that works locally may break when deployed to production or when dependencies are reinstalled, because the required module won&#8217;t be available.</p>
</div>
<div class="paragraph">
<p><strong>Transitive dependency risks</strong>: If your code relies on a module that&#8217;s only available as a transitive dependency (a dependency of another dependency), that module could disappear if the parent dependency changes or removes it.</p>
</div>
<div class="paragraph">
<p><strong>Development vs production inconsistencies</strong>: A module might be available during development but missing in production environments, leading to runtime errors that are difficult to debug.</p>
</div>
<div class="paragraph">
<p><strong>Team collaboration issues</strong>: Other developers working on the project may not have the required modules installed, causing the application to fail for them.</p>
</div>
<div class="paragraph">
<p>Explicitly declaring all required modules as dependencies in <code>package.json</code> ensures consistent behavior across all environments and makes the project&#8217;s requirements clear.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Applications may fail at runtime with "module not found" errors when deployed to production or when dependencies are reinstalled. This can cause service outages and make the codebase unreliable for team members.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_fix">How to fix?</h3>
<div class="paragraph">
<p>Add the missing module to your package.json dependencies. Install it using npm and save it as a dependency.</p>
</div>
<div class="sect3">
<h4 id="_non_compliant_code_example">Non-compliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// package.json only has: { "dependencies": { "express": "^4.18.0" } }
const lodash = require('lodash'); // Noncompliant - lodash not in dependencies
const express = require('express');</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_code_example">Compliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// After running: npm install lodash --save
// package.json now has: { "dependencies": { "express": "^4.18.0", "lodash": "^4.17.21" } }
const lodash = require('lodash'); // Compliant - lodash is now in dependencies
const express = require('express');</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>npm documentation - package.json dependencies - <a href="https://docs.npmjs.com/cli/v11/configuring-npm/package-json#dependencies">Official npm documentation explaining how to declare dependencies in package.json</a></p>
</li>
<li>
<p>Node.js require() documentation - <a href="https://nodejs.org/api/modules.html#requireid">Official Node.js documentation for the require() function and module loading</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related Rules</h3>
<div class="ulist">
<ul>
<li>
<p>n/no-missing-require - <a href="https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-missing-require.md">Disallow require() of modules that don&#8217;t exist</a></p>
</li>
<li>
<p>n/no-unpublished-require - <a href="https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-unpublished-require.md">Disallow require() of modules in devDependencies from production code</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>