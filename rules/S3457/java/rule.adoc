== Why is this an issue?

A `printf-`-style format string is a string that contains placeholders, usually represented by special characters such as "%s" or "{}", depending on the technology in use. These placeholders are replaced by values when the string is printed or logged.

Because `printf`-style format strings are interpreted at runtime, rather than validated by the compiler, they can contain errors that result in the wrong strings being created.

This rule statically validates the correlation of `printf`-style format strings to their arguments when calling the ``++format(...)++`` methods of `java.util.Formatter`, `java.lang.String`, `java.io.PrintStream`, `java.text.MessageFormat`, and `java.io.PrintWriter` classes, the ``++printf(...)++`` methods of `java.io.PrintStream` or `java.io.PrintWriter` classes, the `formatted()` method of `java.lang.String` (since Java 15), as well as invocations of logging methods of `org.slf4j.Logger`, `java.util.logging.Logger`, `org.apache.logging.log4j.Logger`.

== How to fix it

A `printf-`-style format string is a string that contains placeholders, which are replaced by values when the string is printed or logged. Mismatch in the format specifiers and the arguments provided can lead to incorrect strings being created.

To avoid issues, a developer should ensure that the provided arguments match format specifiers.

=== Code examples

==== Noncompliant code example

[source,java,diff-id=1,diff-type=noncompliant]
----
String.format("Too many arguments %d and %d", 1, 2, 3); // Noncompliant; the third argument '3' is unused
String.format("First {0} and then {1}", "foo", "bar");  //Noncompliant. It appears there is confusion with the use of "java.text.MessageFormat"; parameters "foo" and "bar" will be ignored here

org.slf4j.Logger slf4jLog;
slf4jLog.debug("The number: ", 1); // Noncompliant - String contains no format specifiers.
----

==== Compliant solution

[source,java,diff-id=1,diff-type=compliant]
----
String.format("Too many arguments %d and %d", 1, 2);
String.format("First %s and then %s", "foo", "bar");

org.slf4j.Logger slf4jLog;
slf4jLog.debug("The number: {}", 1);
----

== Resources

* https://wiki.sei.cmu.edu/confluence/x/J9YxBQ[CERT, FIO47-C.] - Use valid format strings

ifdef::env-github,rspecator-view[]

'''
== Implementation Specification
(visible only on this page)

'''
== Comments And Links
(visible only on this page)

include::../comments-and-links.adoc[]

endif::env-github,rspecator-view[]
