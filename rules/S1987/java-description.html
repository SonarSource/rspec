<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A sequence point is the still point of calm between evaluations; all the side effects of the previous operation have been calculated, and the next operation has not yet started.</p>
</div>
<div class="paragraph">
<p>There is no sequence point between the arguments to a function call, so function calls with multiple arguments that produce side effects result in undefined behavior. I.E. it&#8217;s up to the compiler to pick an order in which to execute the statements, potentially resulting in unexpected runtime results.</p>
</div>
<div class="paragraph">
<p>Specifically, the use of increment and decrement operators in function calls can result in undefined behavior because there is no sequence point in the operation. Even if there were, such code would still be difficult to understand.</p>
</div>
<div class="paragraph">
<p>Similarly, passing function calls as arguments to function calls can also result in undefined behavior.</p>
</div>
<div class="paragraph">
<p>This is also true for expression where one variable is present more than once and is modified by a postfix, or prefix operator <code>&#43;&#43;,--</code>.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">int counter;

void f(int i) {

  a[i++] = i;  // Noncompliant; the value that will be assigned is unspecified

  int c = i + a[++i]; // Noncompliant; 'i' is evaluated more than once.

  g(i++, i); // Noncompliant. What value(s) will be passed to g?

  g(counterSet(), counter++); // Noncompliant; same var modified twice but order undefined

  g(counterSet(); counterInc()); // Noncompliant; both fcns modify same var. Evaluation order undefined
}

void g(int i, int j) {
  //...
}

void counterSet() {
  counter = 0;
}

void counterInc() {
  counter ++;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">void f(int i) {
  int tmp = i+1;
  int c = i + a[tmp];

  a[tmp] = i;
  g(tmp, i);

  counterSet();
  int count1 = counter;
  counterInc();
  int count2 = counter;
  g(count1, count2);
}

void g(int i, int j) {
  //...
}

void counterSet() {
  counter = 0;
}

void counterInc() {
  counter ++;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.sei.cmu.edu/confluence/x/StYxBQ">CERT, EXP30-C.</a> - Do not depend on the order of evaluation for side effects</p>
</li>
<li>
<p><a href="https://wiki.sei.cmu.edu/confluence/x/IXw-BQ">CERT, EXP50-CPP.</a> - Do not depend on the order of evaluation for side effects</p>
</li>
<li>
<p><a href="https://wiki.sei.cmu.edu/confluence/x/NDdGBQ">CERT, EXP05-J.</a> - Do not follow a write by a subsequent write or read of the same object within an expression</p>
</li>
<li>
<p><a href="https://wiki.sei.cmu.edu/confluence/x/T9YxBQ">CERT, EXP10-C.</a> - Do not depend on the order of evaluation of subexpressions or the order in which side effects take place</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Make the expected evaluation order of these arguments explicit.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_duplicated_by_s865">is duplicated by: <a data-rspec-id="S865" class="rspec-auto-link">S865</a></h3>

</div>
<div class="sect2">
<h3 id="_on_17_sep_2014_094625_freddy_mallet_wrote">on 17 Sep 2014, 09:46:25 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>@Ann, if my understanding is correct, the goal of this rule is not to prevent using increment(&#43;&#43;) and decrement(--) operators in arguments to function calls but:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>to track function calls with several occurrences of the same variable and in one case application of the increment/decrement operator to this variable.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_on_19_sep_2014_092952_ann_campbell_wrote">on 19 Sep 2014, 09:29:52 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~freddy.mallet] I had originally tried to narrow the portion of the CERT rule I was covering, but expanded to cover more of the scope because original attempt was unclear. FYI, the rest of the scope of the CERT rule is covered by <a data-rspec-id="S881" class="rspec-auto-link">RSPEC-881</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_25_nov_2014_210529_freddy_mallet_wrote">on 25 Nov 2014, 21:05:29 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>Ok [~ann.campbell.2], that&#8217;s now fine for me.</p>
</div>
</div>
</div>
</div>