<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Because composite format strings are interpreted at runtime, rather than validated by the compiler, they can contain errors that lead to unexpected behaviors or runtime errors. This rule statically validates the good behavior of composite formats when calling the methods of</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>String.Format</code></p>
</li>
<li>
<p><code>StringBuilder.AppendFormat</code></p>
</li>
<li>
<p><code>Console.Write</code></p>
</li>
<li>
<p><code>Console.WriteLine</code></p>
</li>
<li>
<p><code>TextWriter.Write</code></p>
</li>
<li>
<p><code>TextWriter.WriteLine</code></p>
</li>
<li>
<p><code>Debug.WriteLine(String, Object[])</code></p>
</li>
<li>
<p><code>Trace.TraceError(String, Object[])</code></p>
</li>
<li>
<p><code>Trace.TraceInformation(String, Object[])</code></p>
</li>
<li>
<p><code>Trace.TraceWarning(String, Object[])</code></p>
</li>
<li>
<p><code>TraceSource.TraceInformation(String, Object[])</code>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">s = string.Format("{0}", arg0, arg1); // Noncompliant, arg1 is declared but not used.
s = string.Format("{0} {2}", arg0, arg1, arg2); // Noncompliant, the format item with index 1 is missing so arg1 will not be used.
s = string.Format("value is " + value);  // Noncompliant; use an argument instead of concatenaion
s = string.Format("no argument here");</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">s = string.Format("{0}", arg0);
s = string.Format("{0} {1}", arg0, arg2);
s = string.Format("value is {0}", value);
s = no argument here";</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="ulist">
<ul>
<li>
<p>No issue is raised if the format string is not a <code>const</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">var pattern = "{0} {1} {2}";
var res = string.Format(pattern, 1, 2); // Compliant, not const string are not recognized</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>No issue is raised if the argument is not an inline creation array.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">var array = new int[] {};
var res = string.Format("{0} {1}", array); // Compliant we don't know the size of the array</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>This rule doesn&#8217;t check whether the format specifier (defined after the <code>:</code>) is actually valid.</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_27_mar_2017_102307_ann_campbell_wrote">on 27 Mar 2017, 10:23:07 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~amaury.leve] I&#8217;ve expanded the examples.</p>
</div>
</div>
<div class="sect2">
<h3 id="_duplicates_s3457">duplicates: <a data-rspec-id="S3457" class="rspec-auto-link">S3457</a></h3>

</div>
<div class="sect2">
<h3 id="_relates_to_s2275">relates to: <a data-rspec-id="S2275" class="rspec-auto-link">S2275</a></h3>

</div>
</div>
</div>