<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>C&#43;&#43;20 introduced a restricted form of designated initializers for aggregates (i.e., arrays or classes that respect specific criteria). Designated initializers enable the initialization of aggregates by naming their fields explicitly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">struct Point {
  float x = 0.0;
  float y = 0.0;
  float z = 0.0;
};

Point p = {
  .x = 1.0,
  .y = 2.0,
  // z will be 0.0
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>This initialization style is similar to designated initializers in C and many C&#43;&#43; compiler extensions predating C&#43;&#43;20.</p>
</div>
<div class="paragraph">
<p>However, it is more restricted because some forms are not supported by the C&#43;&#43;20 standard, namely:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>listing the fields out of order</p>
</li>
<li>
<p>array initialization (including sparse array initialization)</p>
</li>
<li>
<p>initialization of nested fields</p>
</li>
<li>
<p>mixed initialization</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This rule reports non-C&#43;&#43;-compliant forms of designated initializers.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">struct A { int x, y; };
struct B { struct A a; };

struct A a = {.y = 1, .x = 2}; // Noncompliant: valid C, invalid C++ (out of order)
int arr[3] = {[1] = 5};        // Noncompliant: valid C, invalid C++ (array)
struct B b = {.a.x = 0};       // Noncompliant: valid C, invalid C++ (nested)
struct A c = {.x = 1, 2};      // Noncompliant: valid C, invalid C++ (mixed)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">struct A { int x, y; };
struct B { struct A a; };

struct A a = {.x = 2, .y = 1};
int arr[3] = {0, 5};
struct B b = {.a = {.x = 0}};
struct A c = {.x = 1, .y = 2};</code></pre>
</div>
</div>
</div>
</div>
</div>