<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Kotlin, <code>if</code> and <code>when</code> statements are expressions that return a value.
This allows for a more concise and functional programming style with less cognitive complexity,
because it results in fewer return points and fewer variable assignments in a function.</p>
</div>
<div class="paragraph">
<p>If both branches of an <code>if</code> statement end with a <code>return</code> statement,
the <code>if</code> statement should be used instead as an expression for a <code>return</code> statement.</p>
</div>
<div class="paragraph">
<p>If all branches of an exhaustive <code>when</code> statement end with a <code>return</code> statement,
the <code>when</code> statement should be used instead as an expression for a <code>return</code> statement.
A <code>when</code> statement is exhaustive when it covers all elements of an enum or features an <code>else</code> clause.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="sect3">
<h4 id="_readability_and_understanding">Readability and Understanding</h4>
<div class="paragraph">
<p>This change makes it easier to understand a function because it will reduce its complexity.
This is because the function now contains fewer return points that the developer needs to keep track of.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the <code>if</code> statement as an expression for a <code>return</code> statement.
Lift the <code>return</code> keyword from the end of the <code>if</code> band <code>else</code> branch before the <code>if</code> keyword.</p>
</div>
<div class="paragraph">
<p>Use the <code>when</code> statement as an expression for a <code>return</code> statement.
Lift the <code>return</code> keyword from the end of all its case clauses before the <code>when</code> keyword.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun returnIfElse(value: Int): String {
    // ...
    if (value &gt;= 0) { // Noncompliant, every branch contains a return statement
        return "positive"
    } else {
        return "negative"
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun returnIfElse(value: Int): String {
    // ...
    return if (value &gt;= 0) { // Compliant
        "positive"
    } else {
        "negative"
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun returnWhenElse(a: Float): Int {
    // ...
    when { // Noncompliant, every branch of exhaustive `when` contains a return statement
        a &lt; 0 -&gt; return -1
        a &gt; 0 -&gt; return 1
        else -&gt; return 0
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun returnWhenElse(a: Float): Int {
    // ...
    return when { // Compliant
        a &lt; 0 -&gt; -1
        a &gt; 0 -&gt; 1
        else -&gt; 0
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example_3">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">enum class OneTwoThree {
    ONE,
    TWO,
    THREE
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun returnWhenEnum(oneTwoThree: OneTwoThree): String {
    // ...
    when(oneTwoThree) { // Noncompliant, every branch of exhaustive `when` contains a return statement
        OneTwoThree.ONE -&gt; return "one"
        OneTwoThree.TWO -&gt; return "two"
        OneTwoThree.THREE -&gt; return "three"
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_3">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun returnWhenEnum(oneTwoThree: OneTwoThree): String {
    // ...
    return when(oneTwoThree) { // Compliant
        OneTwoThree.ONE -&gt; "one"
        OneTwoThree.TWO -&gt; "two"
        OneTwoThree.THREE -&gt; "three"
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example_4">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun returnIfElseWithSideEffects(a: Float, b: Float): Int {
    // ...
    if (a &lt; 0) { // Noncompliant, every branch contains a return statement
        foo()
        return -1
    } else if (a &gt; b) {
        bar()
        return 1
    } else {
        return 0
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_4">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun returnIfElseWithSideEffects(a: Float, b: Float): Int {
    // ...
    return if (a &lt; 0) { // Compliant
        foo()
        -1
    } else if (a &gt; b) {
        bar()
        1
    } else {
        0
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://kotlinlang.org/docs/control-flow.html#if-expression">Kotlin Docs, If expression</a></p>
</li>
<li>
<p><a href="https://kotlinlang.org/docs/control-flow.html#when-expression">Kotlin Docs, When expression</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_articles_blog_posts">Articles &amp; blog posts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.baeldung.com/kotlin/if-else-expression">Baeldung, If-Else Expression in Kotlin</a></p>
</li>
<li>
<p><a href="https://www.baeldung.com/kotlin/when">Baeldung, Guide to the “when{}” Block in Kotlin</a></p>
</li>
<li>
<p><a href="https://www.sonarsource.com/resources/cognitive-complexity">G. Ann Campbell, Cognitive Complexity</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>