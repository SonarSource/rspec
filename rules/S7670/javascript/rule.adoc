This rule raises an issue when code uses Node.js built-in APIs that are not supported in the configured Node.js version range.

== Why is this an issue?

Using unsupported Node.js built-in APIs can cause runtime errors when the code runs on older Node.js versions that don't have those APIs available.

Node.js continuously adds new built-in APIs and methods across versions. When you target a specific Node.js version range (typically defined in your `package.json` engines field), using APIs that were introduced in newer versions will cause your application to fail at runtime on older versions.

This rule helps catch these compatibility issues during development by checking static API usage against a database of Node.js API availability. It only detects static APIs like `Buffer.from()` or `fs.promises`, not instance methods or dynamic usage patterns.

The rule is particularly valuable in environments where you need to support multiple Node.js versions or when deploying to systems with older Node.js installations.

=== What is the potential impact?

Using unsupported APIs will cause runtime errors like `TypeError: undefined is not a function` or `ReferenceError: API is not defined` when the code runs on Node.js versions that don't support those APIs. This can lead to application crashes and deployment failures in production environments with older Node.js versions.

=== How to fix?


Remove or replace the unsupported API with an alternative that works in your target Node.js version range. Check the Node.js documentation to find when APIs were introduced.

==== Non-compliant code example

[source,javascript,diff-id=1,diff-type=noncompliant]
----
// Target: Node.js >=12.0.0
const { readFile } = require('fs/promises'); // Noncompliant: fs/promises added in Node.js 14.0.0

// Using newer Buffer method
const buf = Buffer.allocUnsafeSlow(1024); // Noncompliant: added in Node.js 14.0.0
----

==== Compliant code example

[source,javascript,diff-id=1,diff-type=compliant]
----
// Target: Node.js >=12.0.0
const { promisify } = require('util');
const fs = require('fs');
const readFile = promisify(fs.readFile);

// Using older Buffer method
const buf = Buffer.allocUnsafe(1024);
----

=== Documentation

 * Node.js API Documentation - https://nodejs.org/api/[Official Node.js API documentation showing version availability]
 * ESLint Plugin N Documentation - https://github.com/eslint-community/eslint-plugin-n#-configs[Configuration guide for eslint-plugin-n]

=== Related Rules

 * n/no-unsupported-features/es-syntax - https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-unsupported-features/es-syntax.md[Disallow unsupported ECMAScript syntax on the specified version]
 * n/no-unsupported-features/es-builtins - https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-unsupported-features/es-builtins.md[Disallow unsupported ECMAScript built-ins on the specified version]

