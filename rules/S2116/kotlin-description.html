<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While <code>hashCode</code> and <code>toString</code> are available on arrays, they are largely useless. <code>hashCode</code> returns
the array&#8217;s "identity hash code", and <code>toString</code> returns nearly the same value. Neither method&#8217;s output actually
reflects the array&#8217;s contents. Furthermore, <code>contentHashCode()</code> and <code>contentToString()</code> are also useless on
arrays of array.</p>
</div>
<div class="paragraph">
<p>Instead, you should use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>On array of objects or arrays: <code>contentDeepHashCode()</code> and <code>contentDeepToString()</code></p>
</li>
<li>
<p>On array of primitives: <code>contentHashCode()</code> and <code>contentToString()</code></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun main() {
    val primitiveArray = intArrayOf(1, 2, 3)
    val objectArray = arrayOf("A", "B", "C")
    val arrayOfArray = arrayOf(arrayOf("A", "B"), arrayOf("C", "D"))

    println(primitiveArray.toString())       // Noncompliant, output: [I@2acf57e3
    println(primitiveArray.hashCode())       // Noncompliant, output: 718231523
    println(objectArray.toString())          // Noncompliant, output: [Ljava.lang.String;@506e6d5e
    println(objectArray.hashCode())          // Noncompliant, output: 1349414238
    println(arrayOfArray.toString())         // Noncompliant, output: [[Ljava.lang.String;@96532d6
    println(arrayOfArray.contentToString())  // Noncompliant, output: [[Ljava.lang.String;@3796751b, [Ljava.lang.String;@67b64c45]
    println(arrayOfArray.hashCode())         // Noncompliant, output: 157627094
    println(arrayOfArray.contentHashCode())  // Noncompliant, output: 586055243
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun main() {
    val primitiveArray = intArrayOf(1, 2, 3)
    val objectArray = arrayOf("A", "B", "C")
    val arrayOfArray = arrayOf(arrayOf("A", "B"), arrayOf("C", "D"))

    println(primitiveArray.contentToString())   // Compliant, output: [1, 2, 3]
    println(primitiveArray.contentHashCode())   // Compliant, output: 30817
    println(objectArray.contentDeepToString())  // Compliant, output: [A, B, C]
    println(objectArray.contentDeepHashCode())  // Compliant, output: 94369
    println(arrayOfArray.contentDeepToString()) // Compliant, output: [[A, B], [C, D]]
    println(arrayOfArray.contentDeepHashCode()) // Compliant, output: 98369
}</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>On arrays of objects:
* Use "contentDeepHashCode()" instead.
* Use "contentDeepToString()" instead.</p>
</div>
<div class="paragraph">
<p>On arrays of primitives:
* Use "contentHashCode()" instead.
* Use "contentToString()" instead.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_15_jul_2016_142430_ann_campbell_wrote">on 15 Jul 2016, 14:24:30 Ann Campbell wrote:</h3>
<div class="paragraph">
<p><a href="https://github.com/google/error-prone/blob/master/docs/bugpattern/ArrayHashCode.md" class="bare">https://github.com/google/error-prone/blob/master/docs/bugpattern/ArrayHashCode.md</a></p>
</div>
</div>
</div>
</div>