This rule raises an issue when a script changes directory with `cd` and then attempts to change back with `cd ..` or similar commands.

== Why is this an issue?

Changing directories and then changing back with `cd ..` creates a fragile pattern that can leave your shell in an unexpected location if the script fails.

When you use `cd` to change directories, you modify the current shell's working directory. If your script encounters an error or exits unexpectedly between the `cd` command and the `cd ..` command, the shell remains in the changed directory. This can confuse users and potentially cause subsequent commands to run in the wrong location.

Subshells provide a safer alternative because they create an isolated environment. Any directory changes within a subshell only affect that subshell and don't impact the parent shell's working directory. When the subshell exits, the parent shell remains in its original directory.

The `pushd` and `popd` commands offer another robust solution. The `pushd` command saves the current directory on a stack before changing to the new directory, while `popd` reliably returns to the previously saved directory. This approach is more resilient to errors than manually tracking directory changes.

=== What is the potential impact?

If the script fails between the directory change and the attempt to change back, users may find themselves in an unexpected directory. This can lead to confusion and potentially cause subsequent commands to operate on the wrong files or directories.

=== How to fix?


Use a subshell to isolate directory changes. Commands within parentheses run in a subshell, so any directory changes only affect that subshell.

==== Non-compliant code example

[source,shell,diff-id=1,diff-type=noncompliant]
----
cd "${target_dir}"
ls -la
cd ..
----

==== Compliant code example

[source,shell,diff-id=1,diff-type=compliant]
----
(
  cd "${target_dir}"
  ls -la
)
----

=== Documentation

 * Bash Manual - Command Grouping - https://www.gnu.org/software/bash/manual/html_node/Command-Grouping.html[Official documentation on subshells and command grouping in Bash]
 * Bash Manual - Directory Stack - https://www.gnu.org/software/bash/manual/html_node/Directory-Stack.html[Official documentation on pushd and popd commands]

