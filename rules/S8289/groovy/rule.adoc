This rule raises an issue when text-based file operations are performed without explicitly specifying a charset encoding.

== Why is this an issue?

When reading from or writing to files containing text, the system uses a default charset encoding if none is specified. This default encoding varies between operating systems and system configurations:

* Windows typically uses CP1252 or UTF-16
* Linux and macOS typically use UTF-8
* Some systems may use ISO-8859-1 or other encodings

This creates several problems:

**Portability Issues**: Code that works correctly on one system may fail or produce incorrect results on another system with a different default encoding.

**Data Corruption**: Files containing non-ASCII characters (accented letters, symbols, emojis, or text in non-Latin scripts) may be read incorrectly or written in a way that corrupts the data.

**Silent Failures**: Encoding issues often don't cause immediate exceptions but instead produce garbled text that may only be noticed later in the application lifecycle.

**Maintenance Difficulties**: When charset is not explicit, it becomes harder for developers to understand the intended behavior and troubleshoot encoding-related issues.

Modern applications frequently handle international content, user-generated text, or data from various sources, making explicit charset specification essential for reliable text processing.

=== What is the potential impact?

Files may be corrupted or misread when moved between systems with different default encodings. Non-ASCII characters may appear as question marks, boxes, or other garbled text. In severe cases, this can lead to data loss or application failures when processing international content.

== How to fix it

Specify the charset explicitly when reading file content. UTF-8 is recommended for most applications as it supports all Unicode characters and is widely compatible.

=== Code examples

==== Noncompliant code example

[source,groovy,diff-id=1,diff-type=noncompliant]
----
def content = file.getText() // Noncompliant
----

==== Compliant solution

[source,groovy,diff-id=1,diff-type=compliant]
----
def content = file.getText('UTF-8')
----

== Resources

=== Documentation

 * Groovy File Documentation - https://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/File.html[Official Groovy documentation for File class methods including charset-aware operations]

 * Unicode and Character Encoding - https://docs.oracle.com/javase/tutorial/i18n/text/unicode.html[Oracle's guide to Unicode and character encoding in Java applications]

 * UTF-8 Everywhere - https://utf8everywhere.org/[Comprehensive guide explaining why UTF-8 should be the default encoding choice]

=== Standards

 * CWE-838: Inappropriate Encoding for Output Context - https://cwe.mitre.org/data/definitions/838.html[Covers issues related to improper encoding handling that can lead to data corruption]

=== Related rules

 * RSPEC-1943 - https://rules.sonarsource.com/java/RSPEC-1943/[Java rule for specifying charset in file operations]
