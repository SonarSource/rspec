<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an issue when a Batch Apex class makes HTTP callouts without implementing the Database.AllowsCallouts interface, or when it doesn&#8217;t properly manage callout counts to stay within governor limits.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Batch Apex classes that make HTTP callouts have two critical requirements that must be met to function correctly.</p>
</div>
<div class="paragraph">
<p>First, the class must implement the <code>Database.AllowsCallouts</code> interface in addition to <code>Database.Batchable</code>. Without this interface, any attempt to make an HTTP callout will fail at runtime with a clear error message. This is a Salesforce platform requirement that cannot be bypassed.</p>
</div>
<div class="paragraph">
<p>Second, even with the correct interface, the batch job must respect Salesforce&#8217;s governor limits for callouts. Each transaction in the execute method is limited to 100 HTTP callouts and has time restrictions on total callout duration. If these limits are exceeded, the batch job will fail with governor limit exceptions.</p>
</div>
<div class="paragraph">
<p>These failures can be particularly problematic because they may not surface during development with small test datasets, but will cause production issues when processing larger volumes of data. The batch job may process successfully for the first few hundred records, then fail when it hits the callout limits, leaving the data processing incomplete.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Without the <code>Database.AllowsCallouts</code> interface, all HTTP callouts will fail immediately at runtime, causing the entire batch job to fail.</p>
</div>
<div class="paragraph">
<p>Without proper governor limit management, the batch job may fail partway through processing when callout limits are exceeded, leaving data processing incomplete and potentially causing data inconsistency issues.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add the Database.AllowsCallouts interface to the class declaration and implement proper callout count tracking to stay within governor limits.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">global class BatchWithCallouts implements Database.Batchable&lt;sObject&gt; {
    global void execute(Database.BatchableContext BC, List&lt;Account&gt; scope) {
        for (Account acc : scope) { // Missing Database.AllowsCallouts interface
            Http http = new Http();
            HttpRequest request = new HttpRequest();
            request.setEndpoint('https://api.example.com/account/' + acc.Id);
            HttpResponse response = http.send(request); // Noncompliant
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">global class BatchWithCallouts implements Database.Batchable&lt;sObject&gt;, Database.AllowsCallouts {
    global void execute(Database.BatchableContext BC, List&lt;Account&gt; scope) {
        Integer calloutCount = 0;
        for (Account acc : scope) {
            if (calloutCount &gt;= 100) break; // Respect governor limit

            Http http = new Http();
            HttpRequest request = new HttpRequest();
            request.setEndpoint('https://api.example.com/account/' + acc.Id);
            HttpResponse response = http.send(request);
            calloutCount++;
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Batch Apex and Callouts - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_batch_interface.htm">Official Salesforce documentation on using callouts in Batch Apex</a></p>
</li>
<li>
<p>Apex Governor Limits - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_gov_limits.htm">Complete reference for Salesforce Apex governor limits including callout restrictions</a></p>
</li>
<li>
<p>Database.AllowsCallouts Interface - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexref.meta/apexref/apex_interface_database_allowscallouts.htm">Documentation for the Database.AllowsCallouts interface required for callouts in batch jobs</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>