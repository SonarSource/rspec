<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When an object is declared with <code>const</code> class type, only <code>const</code> member functions can be invoked on that object. The common expectation of <code>const</code> member functions is that the state of the object may not be modified when invoking the functions. However, returning a non-const pointer or reference to class-data from a <code>const</code> function allows a modification to the conceptual state of an object.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class C
{
public:
  C(int32_t &amp; value) : a(&amp;value), b(value) { }
  int32_t * getA () const // Noncompliant, "const" method returns a non-const pointer to data
  {
    return a;
  }
  int32_t &amp; getB () const // Noncompliant, "const" method returns a non-const reference to data
  {
    return b;
  }
private:
  int32_t * a;
  int32_t &amp; b;
};

void fn ( C const &amp; c )
{
  c.getA()[ 0 ] = 0; // Hazardous: modification to conceptual state of C from the returned value of a const method
  c.getB() = 0; // Hazardous: modification to conceptual state of C from the returned value of a const method
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class C
{
public:
  C(int32_t &amp; value) : a(&amp;value), b(value) { }
  int32_t const * getA () const // Compliant, "const" method returns a "const" pointer to data
  {
    return a;
  }
  int32_t const &amp; getB () const // Compliant, "const" method returns a "const" reference to data
  {
    return b;
  }
private:
  int32_t * a;
  int32_t &amp; b;
};

void fn ( C const &amp; c )
{
  c.getA()[ 0 ] = 0; // Compliant, rejected during compliation
  c.getB() = 0; // Compliant, rejected during compilation
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>MISRA C&#43;&#43;:2008, 9-3-1</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Either remove "const" from this method, or add "const" to its return type.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_15_oct_2014_205015_ann_campbell_wrote">on 15 Oct 2014, 20:50:15 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~samuel.mercier] please:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>fill in the appropriate reference field(s).</p>
</li>
<li>
<p>provide a See section.</p>
</li>
<li>
<p>quote code in the title and message (e.g. "const")</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_on_17_oct_2014_153115_ann_campbell_wrote">on 17 Oct 2014, 15:31:15 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~samuel.mercier] FYI, I&#8217;ve reworded the message. Should be semantically the same, but shorter/narrower to reduce risk of horizontal scroll in UI.</p>
</div>
</div>
</div>
</div>