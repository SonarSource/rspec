<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when code manually concatenates strings using the <code>+</code> operator inside iteration methods like <code>each</code>, <code>for</code>, or similar loops.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Manual string concatenation in loops creates performance and reliability problems.</p>
</div>
<div class="paragraph">
<p>In Ruby, strings are immutable objects. Each time you use the <code>+</code> operator to concatenate strings, Ruby creates a completely new string object in memory. When this happens inside a loop, the performance impact grows exponentially with the size of your data.</p>
</div>
<div class="paragraph">
<p>For example, concatenating 1,000 strings this way creates 1,000 intermediate string objects, each copying all the previous content. This results in O(n²) time complexity instead of the O(n) you would expect.</p>
</div>
<div class="paragraph">
<p>Beyond performance, manual concatenation is error-prone. If you forget to initialize your string variable, Ruby throws a <code>NilClass</code> error when it tries to call the <code>+</code> method on <code>nil</code>.</p>
</div>
<div class="paragraph">
<p>Ruby provides better alternatives through its functional programming features. Methods like <code>map</code> and <code>join</code> are specifically designed for transforming collections into strings efficiently.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Performance degrades significantly with larger datasets due to O(n²) time complexity. Memory usage increases unnecessarily from creating intermediate string objects. Runtime errors occur when string variables are not properly initialized, potentially causing application crashes.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace manual string concatenation with <code>map</code> and <code>join</code>. This approach transforms the collection into an array of strings first, then joins them efficiently in a single operation.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">assets = Asset.where(current_status: ["active"])
string = ""
assets.each do |asset|
  string = string + ":" + asset.movie_title # Noncompliant
end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">assets = Asset.where(current_status: ["active"])
string = assets.map(&amp;:movie_title).join(":")</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Ruby Array#map documentation - <a href="https://ruby-doc.org/core/Array.html#method-i-map">Official documentation for the map method used to transform array elements</a></p>
</li>
<li>
<p>Ruby Array#join documentation - <a href="https://ruby-doc.org/core/Array.html#method-i-join">Official documentation for the join method used to concatenate array elements into a string</a></p>
</li>
<li>
<p>Ruby Performance Guide - String Concatenation - <a href="https://github.com/JuanitoFatas/fast-ruby#string">Performance benchmarks comparing different string concatenation methods in Ruby</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S1643" class="rspec-auto-link">RSPEC-1643</a> - <a href="https://rules.sonarsource.com/csharp/RSPEC-1643/">Strings should not be concatenated using '+' in a loop (C#)</a></p>
</li>
<li>
<p><a data-rspec-id="S1643" class="rspec-auto-link">RSPEC-1643</a> - <a href="https://rules.sonarsource.com/java/RSPEC-1643/">Strings should not be concatenated using '+' in a loop (Java)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>