This rule raises an issue when executable files (listed in `package.json` bin field) are missing a hashbang, or when non-executable files have an unnecessary hashbang.

== Why is this an issue?

In Node.js projects, executable files need a hashbang line to tell the system which interpreter to use when the file is run directly. The hashbang `#!/usr/bin/env node` ensures the file runs with Node.js.

Without a proper hashbang, executable files won't work when installed globally via npm or when run directly from the command line. The system won't know how to execute the file.

Conversely, non-executable files don't need hashbangs and including them can be confusing or cause issues in some environments.

Additionally, files with hashbangs must use Unix line endings (LF) and cannot have a Unicode BOM, as these can prevent the hashbang from being recognized correctly by the system.

=== What is the potential impact?

Without proper hashbangs, CLI tools won't function correctly when installed or executed. Users will get "command not found" errors or the file will be treated as a text file rather than an executable script. This breaks the intended functionality of command-line tools distributed via npm.

=== How to fix?


Add the correct hashbang to executable files listed in package.json's bin field.

==== Non-compliant code example

[source,javascript,diff-id=1,diff-type=noncompliant]
----
// File: bin/my-cli.js (listed in package.json bin field)
console.log('Hello World'); // Noncompliant
----

==== Compliant code example

[source,javascript,diff-id=1,diff-type=compliant]
----
#!/usr/bin/env node
// File: bin/my-cli.js (listed in package.json bin field)
console.log('Hello World');
----

=== Documentation

 * Node.js - Shebang - https://nodejs.org/api/cli.html#shebang[Official Node.js documentation on shebang usage]
 * npm - package.json bin field - https://docs.npmjs.com/cli/v11/configuring-npm/package-json#bin[Documentation on the bin field in package.json]

=== Related Rules

 * n/no-unpublished-bin - https://github.com/eslint-community/eslint-plugin-n/blob/master/docs/rules/no-unpublished-bin.md[Ensures bin files are published to npm]

