<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when string parameters from URLs, forms, or other external sources are compared directly with boolean literals (<code>true</code> or <code>false</code>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>URL parameters, form inputs, and other external data sources provide values as strings, not booleans. When you write <code>params[:debug] == true</code>, you&#8217;re comparing the string <code>"true"</code> with the boolean <code>true</code>. In Ruby, this comparison always returns <code>false</code> because strings and booleans are different types.</p>
</div>
<div class="paragraph">
<p>This creates a logical error where your condition never evaluates as expected. For example, even when a URL contains <code>?debug=true</code>, the comparison <code>params[:debug] == true</code> will be <code>false</code>, causing your debug code to never execute.</p>
</div>
<div class="paragraph">
<p>This pattern is particularly problematic because:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The code appears correct at first glance</p>
</li>
<li>
<p>It fails silently without throwing errors</p>
</li>
<li>
<p>It can lead to features being unexpectedly disabled</p>
</li>
<li>
<p>It&#8217;s a common mistake when transitioning from other languages or when working with web parameters</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>This issue can cause application features to behave unexpectedly. Debug modes may never activate, feature flags may not work as intended, and conditional logic based on user input may fail silently. This can lead to difficult-to-diagnose bugs and reduced application functionality.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Compare the parameter with the string representation of the boolean value instead of the boolean literal.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">if params[:debug] == true  # Noncompliant
  enable_debug_mode
end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">if params[:debug] == "true"
  enable_debug_mode
end</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it_in_rails">How to fix it in Rails</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use Rails' built-in boolean conversion methods for more robust parameter handling.</p>
</div>
<div class="sect2">
<h3 id="_code_examples_2">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">if params[:enabled] == false  # Noncompliant
  disable_feature
end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">if ActiveModel::Type::Boolean.new.cast(params[:enabled]) == false
  disable_feature
end</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Ruby String vs Boolean Comparison - <a href="https://ruby-doc.org/core/String.html#method-i-3D-3D">Official Ruby documentation on string equality comparison</a></p>
</li>
<li>
<p>Rails Parameter Handling - <a href="https://guides.rubyonrails.org/action_controller_overview.html#parameters">Rails guide explaining how parameters work and their string nature</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-697: Incorrect Comparison - <a href="https://cwe.mitre.org/data/definitions/697.html">Weakness related to incorrect comparison operations that can lead to unexpected behavior</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>