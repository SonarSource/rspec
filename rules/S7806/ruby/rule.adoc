This rule raises an issue when string parameters from URLs, forms, or other external sources are compared directly with boolean literals (`true` or `false`).

== Why is this an issue?

URL parameters, form inputs, and other external data sources provide values as strings, not booleans. When you write `params[:debug] == true`, you're comparing the string `"true"` with the boolean `true`. In Ruby, this comparison always returns `false` because strings and booleans are different types.

This creates a logical error where your condition never evaluates as expected. For example, even when a URL contains `?debug=true`, the comparison `params[:debug] == true` will be `false`, causing your debug code to never execute.

This pattern is particularly problematic because:

* The code appears correct at first glance
* It fails silently without throwing errors
* It can lead to features being unexpectedly disabled
* It's a common mistake when transitioning from other languages or when working with web parameters

=== What is the potential impact?

This issue can cause application features to behave unexpectedly. Debug modes may never activate, feature flags may not work as intended, and conditional logic based on user input may fail silently. This can lead to difficult-to-diagnose bugs and reduced application functionality.

== How to fix it

Compare the parameter with the string representation of the boolean value instead of the boolean literal.

=== Code examples

==== Noncompliant code example

[source,ruby,diff-id=1,diff-type=noncompliant]
----
if params[:debug] == true  # Noncompliant
  enable_debug_mode
end
----

==== Compliant solution

[source,ruby,diff-id=1,diff-type=compliant]
----
if params[:debug] == "true"
  enable_debug_mode
end
----

== How to fix it in Rails

Use Rails' built-in boolean conversion methods for more robust parameter handling.

=== Code examples

==== Noncompliant code example

[source,ruby,diff-id=2,diff-type=noncompliant]
----
if params[:enabled] == false  # Noncompliant
  disable_feature
end
----

==== Compliant solution

[source,ruby,diff-id=2,diff-type=compliant]
----
if ActiveModel::Type::Boolean.new.cast(params[:enabled]) == false
  disable_feature
end
----

== Resources

=== Documentation

 * Ruby String vs Boolean Comparison - https://ruby-doc.org/core/String.html#method-i-3D-3D[Official Ruby documentation on string equality comparison]

 * Rails Parameter Handling - https://guides.rubyonrails.org/action_controller_overview.html#parameters[Rails guide explaining how parameters work and their string nature]

=== Standards

 * CWE-697: Incorrect Comparison - https://cwe.mitre.org/data/definitions/697.html[Weakness related to incorrect comparison operations that can lead to unexpected behavior]
