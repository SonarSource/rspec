This rule raises an issue when code relies on implicit type conversion between different data types, particularly when mixing numeric and string types or when constructing dynamic queries with user input.

== Why is this an issue?

Implicit type conversion in Apex can lead to several problems that affect code reliability and security.

When Apex automatically converts between data types, the behavior may not always match your expectations. For example, concatenating an integer directly with a string relies on Apex's implicit conversion, which can produce unexpected results in edge cases or when null values are involved.

More critically, implicit conversions in dynamic SOQL queries create serious security vulnerabilities. When user input is directly concatenated into query strings without proper type validation, attackers can exploit this to perform SOQL injection attacks. By injecting malicious input that changes the query structure, they can access unauthorized data or bypass security restrictions.

Explicit type conversion makes your code's intentions clear and provides better control over how data is handled. Methods like `String.valueOf()`, `Integer.valueOf()`, and proper casting ensure that conversions happen predictably and safely. This approach also makes your code more readable and maintainable, as other developers can immediately understand the intended data flow.

=== What is the potential impact?

Implicit type conversions can cause runtime errors when unexpected data types are encountered, leading to application failures. In dynamic SOQL queries, this creates serious security vulnerabilities that allow SOQL injection attacks, potentially exposing sensitive organizational data to unauthorized access.

== How to fix it

Use explicit conversion methods when mixing data types. Replace implicit conversions with appropriate methods like String.valueOf() for converting to strings.

=== Code examples

==== Noncompliant code example

[source,apex,diff-id=1,diff-type=noncompliant]
----
String result = someInteger + someString; // Noncompliant
----

==== Compliant solution

[source,apex,diff-id=1,diff-type=compliant]
----
String result = String.valueOf(someInteger) + someString;
----

== Resources

=== Documentation

 * Apex Data Types and Variables - https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/langCon_apex_primitives.htm[Official Salesforce documentation on Apex data types and type conversion]

 * String Class Methods - https://developer.salesforce.com/docs/atlas.en-us.apexref.meta/apexref/apex_methods_system_string.htm[Reference for String class methods including valueOf() for explicit conversion]

=== Standards

 * CWE-89: Improper Neutralization of Special Elements used in an SQL Command ('SQL Injection') - https://cwe.mitre.org/data/definitions/89.html[Common weakness related to SQL injection vulnerabilities]

=== Related rules

 * RSPEC-2077 - https://rules.sonarsource.com/java/RSPEC-2077/[Values should not be concatenated into SQL queries]
