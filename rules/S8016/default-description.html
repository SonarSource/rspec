<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when code relies on implicit type conversion between different data types, particularly when mixing numeric and string types or when constructing dynamic queries with user input.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Implicit type conversion in Apex can lead to several problems that affect code reliability and security.</p>
</div>
<div class="paragraph">
<p>When Apex automatically converts between data types, the behavior may not always match your expectations. For example, concatenating an integer directly with a string relies on Apex&#8217;s implicit conversion, which can produce unexpected results in edge cases or when null values are involved.</p>
</div>
<div class="paragraph">
<p>More critically, implicit conversions in dynamic SOQL queries create serious security vulnerabilities. When user input is directly concatenated into query strings without proper type validation, attackers can exploit this to perform SOQL injection attacks. By injecting malicious input that changes the query structure, they can access unauthorized data or bypass security restrictions.</p>
</div>
<div class="paragraph">
<p>Explicit type conversion makes your code&#8217;s intentions clear and provides better control over how data is handled. Methods like <code>String.valueOf()</code>, <code>Integer.valueOf()</code>, and proper casting ensure that conversions happen predictably and safely. This approach also makes your code more readable and maintainable, as other developers can immediately understand the intended data flow.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Implicit type conversions can cause runtime errors when unexpected data types are encountered, leading to application failures. In dynamic SOQL queries, this creates serious security vulnerabilities that allow SOQL injection attacks, potentially exposing sensitive organizational data to unauthorized access.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use explicit conversion methods when mixing data types. Replace implicit conversions with appropriate methods like String.valueOf() for converting to strings.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">String result = someInteger + someString; // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">String result = String.valueOf(someInteger) + someString;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Apex Data Types and Variables - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/langCon_apex_primitives.htm">Official Salesforce documentation on Apex data types and type conversion</a></p>
</li>
<li>
<p>String Class Methods - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexref.meta/apexref/apex_methods_system_string.htm">Reference for String class methods including valueOf() for explicit conversion</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-89: Improper Neutralization of Special Elements used in an SQL Command ('SQL Injection') - <a href="https://cwe.mitre.org/data/definitions/89.html">Common weakness related to SQL injection vulnerabilities</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S2077" class="rspec-auto-link">RSPEC-2077</a> - <a href="https://rules.sonarsource.com/java/RSPEC-2077/">Values should not be concatenated into SQL queries</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>