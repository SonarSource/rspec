<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/statements/selection-statements#the-switch-statement">switch</a> statements have large sets of multi-line <code>case</code> clauses, the code becomes hard to read and maintain.</p>
</div>
<div class="paragraph">
<p>For example, the <a href="https://www.sonarsource.com/docs/CognitiveComplexity.pdf">Cognitive Complexity</a> is going to be particularly high.</p>
</div>
<div class="paragraph">
<p>In such scenarios, it&#8217;s better to refactor the <code>switch</code> to only have single-line case clauses.</p>
</div>
<div class="paragraph">
<p>When all the <code>case</code> clauses of a <code>switch</code> statement are single-line, the readability of the code is not affected.
Moreover, <code>switch</code> statements with single-line <code>case</code> clauses can easily be converted into <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/switch-expression"><code>switch</code> expressions</a>, which are more concise for assignment and avoid the need for <code>break</code> statements.</p>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>This rule ignores:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>switch</code> statements over <code>Enum</code> arguments</p>
</li>
<li>
<p>fall-through cases</p>
</li>
<li>
<p><code>return</code>, <code>break</code> and <code>throw</code> statements in case clauses</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Extract the logic of multi-line <code>case</code> clauses into separate methods.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="paragraph">
<p>The examples below use the "Maximum number of case" property set to <code>4</code>.</p>
</div>
<div class="paragraph">
<p>Note that from C# 8, you can use <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/switch-expression"><code>switch</code> expression</a>.</p>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">public int MapChar(char ch, int value)
{
    switch(ch) // Noncompliant
    {
        case 'a':
            return 1;
        case 'b':
            return 2;
        case 'c':
            return 3;
        // ...
        case '-':
            if (value &gt; 10)
            {
                return 42;
            }
            else if (value &lt; 5 &amp;&amp; value &gt; 1)
            {
                return 21;
            }
            return 99;
        default:
            return 1000;
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">public int MapChar(char ch, int value)
{
    switch(ch) // Compliant: All 5 cases are single line statements
    {
        case 'a':
            return 1;
        case 'b':
            return 2;
        case 'c':
            return 3;
        // ...
        case '-':
            return HandleDash(value);
        default:
            return 1000;
    }
}

private int HandleDash(int value)
{
    if (value &gt; 10)
    {
        return 42;
    }
    else if (value &lt; 5 &amp;&amp; value &gt; 1)
    {
        return 21;
    }
    return 99;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For this example, a <code>switch</code> expression is more concise and clear:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">public int MapChar(char ch, int value) =&gt;
    ch switch // Compliant
    {
        'a' =&gt; 1,
        'b' =&gt; 2,
        'c' =&gt; 3,
        // ...
        '-' =&gt; HandleDash(value),
        _ =&gt; 1000,
    };

private int HandleDash(int value)
{
    if (value &gt; 10)
    {
        return 42;
    }
    else if (value &lt; 5 &amp;&amp; value &gt; 1)
    {
        return 21;
    }
    return 99;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Sonar - <a href="https://www.sonarsource.com/docs/CognitiveComplexity.pdf">Cognitive Complexity</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/statements/selection-statements#the-switch-statement">The <code>switch</code> statement</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/switch-expression">C#: Switch Expression</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Consider reworking this "switch" to reduce the number of "case"s from {} to at most {}.</p>
</div>
</div>
<div class="sect2">
<h3 id="_parameters">Parameters</h3>
<div class="sidebarblock">
<div class="content">
<div class="title">maximum</div>
<div class="listingblock">
<div class="content">
<pre>30</pre>
</div>
</div>
<div class="paragraph">
<p>Maximum number of "case"</p>
</div>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_17_feb_2014_154340_freddy_mallet_wrote">on 17 Feb 2014, 15:43:40 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>Is implemented by http://jira.codehaus.org/browse/SONARPLUGINS-3448 for PHP</p>
</div>
</div>
</div>
</div>