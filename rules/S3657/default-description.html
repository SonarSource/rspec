<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>C&#43;&#43; does not support polymorphic copy or move assignment operators. For example, the signature of a copy assignment operator on a "Base" class would be <code>Base&amp; operator=(const Base&amp; other)</code>.</p>
</div>
<div class="paragraph">
<p>And on a "Derived" class that extends "Base", it would be <code>Derived&amp; operator=(const Derived&amp; other)</code>.</p>
</div>
<div class="paragraph">
<p>Because these are two entirely different method signatures, the second method does not override the first, and adding <code>virtual</code> to the "Base" signature does not change which method is called.</p>
</div>
<div class="paragraph">
<p>It is possible to add an <code>operator=</code> override in a derived class, but doing so is an indication that you may need to reexamine your application architecture.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class Base {
public:
  virtual Base&amp; operator=(const Base&amp; other); // Noncompliant
};

class Derived : public Base {
public:
  Derived&amp; operator=(const Derived&amp; other);
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class Base {
protected:
  Base&amp; operator=(const Base&amp; other); // not virtual
};

class Derived : public Base {
public:
  Derived&amp; operator=(const Derived&amp; other);
};</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>C++ Core Guidelines - <a href="https://github.com/isocpp/CppCoreGuidelines/blob/e49158a/CppCoreGuidelines.md#c60-make-copy-assignment-non-virtual-take-the-parameter-by-const-and-return-by-non-const">C.60: Make copy assignment non-<code>virtual</code>, take the parameter by <code>const&</code>, and return by non-<code>const&</code></a></p>
</li>
<li>
<p>C++ Core Guidelines - <a href="https://github.com/isocpp/CppCoreGuidelines/blob/e49158a/CppCoreGuidelines.md#c63-make-move-assignment-non-virtual-take-the-parameter-by&#8212;&#8203;and-return-by-non-const">C.63: Make move assignment non-<code>virtual</code>, take the parameter by <code>&&</code>, and return by non-<code>const&</code></a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Remove this "virtual" specifier; polymorphism should not be used with assignment operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p><code>virtual</code> keyword</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s1023">relates to: <a data-rspec-id="S1023" class="rspec-auto-link">S1023</a></h3>

</div>
<div class="sect2">
<h3 id="_on_27_jun_2016_214617_ann_campbell_wrote">on 27 Jun 2016, 21:46:17 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~alban.auzeill] I&#8217;ve made some edits, but I&#8217;m not done. I&#8217;m stuck on</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>After a copy using the "Base" interface, the integrity of a "Derived" object is compromised. Variables declared on "Base" contain new values, but those declared on "Derived" still have old values.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>the meaning of which is not clear to me. It almost sounds like you expect the operation to have updated the "d" object, but surely I&#8217;m mis-reading that&#8230;&#8203;?</p>
</div>
<div class="paragraph">
<p>I&#8217;ll have a little time tomorrow, and more on Wednesday to discuss this.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_28_jun_2016_093036_alban_auzeill_wrote">on 28 Jun 2016, 09:30:36 Alban Auzeill wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2]  Before the sentence "After a copy&#8230;&#8203;", there&#8217;s a code example and before there&#8217;s: if "b" is a "Derived" object</p>
</div>
<div class="paragraph">
<p>In my example, "d" is not updated, it can be called "source". Only "b" is updated, it can be called "dest".</p>
</div>
<div class="paragraph">
<p>But, I notice that the reader can misunderstood my sentence starting by "After a copy&#8230;&#8203;" because he doesn&#8217;t remember or understand that "b" is a "Derived" passed to the function through the "Base" interface, we should find a way to make it obvious.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_29_jun_2016_171138_alban_auzeill_wrote">on 29 Jun 2016, 17:11:38 Alban Auzeill wrote:</h3>
<div class="paragraph">
<p>I have renamed the variable in the code example so it&#8217;s more obvious:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>After a copy using the "Base" interface, when the parameter "dst" is a "Derived" object, its integrity is compromised. Variables of "dst" declared on "Base" class contain new values, but those declared on "Derived" class still have old values.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_on_29_jun_2016_180137_ann_campbell_wrote">on 29 Jun 2016, 18:01:37 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~alban.auzeill] I&#8217;ve simplified this to (I hope) focus on the core of the issue. Let me know if you feel I&#8217;ve removed too much.</p>
</div>
</div>
</div>
</div>