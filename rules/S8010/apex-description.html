<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when an object is dereferenced (methods called or properties accessed) without first checking if it is null.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Apex, attempting to call methods or access properties on null objects results in a <code>System.NullPointerException</code>. This exception causes the current transaction to fail and can lead to poor user experience.</p>
</div>
<div class="paragraph">
<p>Null pointer exceptions are among the most common runtime errors in Apex. They occur when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Variables are declared but not initialized</p>
</li>
<li>
<p>SOQL queries return no results when assigned to single objects</p>
</li>
<li>
<p>Method parameters are not validated</p>
</li>
<li>
<p>Object properties are accessed without ensuring the object exists</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These exceptions are particularly problematic in Salesforce because they can cause entire transactions to roll back, potentially losing user data and creating confusing error messages for end users.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>When null pointer exceptions occur, they cause immediate transaction failure. This can result in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Data loss when users submit forms or perform operations</p>
</li>
<li>
<p>Poor user experience with cryptic error messages</p>
</li>
<li>
<p>Incomplete business processes that require manual intervention</p>
</li>
<li>
<p>Difficulty in debugging when exceptions occur in complex transaction contexts</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add a null check before dereferencing the object. Use the logical AND operator to ensure the object is not null before calling methods or accessing properties.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">String s;
Boolean b = s.contains('Apex'); // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">String s;
Boolean b = s != null &amp;&amp; s.contains('Apex');</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Apex Exception Handling - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_exception_definition.htm">Official Salesforce documentation on exception handling in Apex</a></p>
</li>
<li>
<p>Apex Best Practices - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_bestpractices.htm">Salesforce best practices for writing robust Apex code</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-476: NULL Pointer Dereference - <a href="https://cwe.mitre.org/data/definitions/476.html">Common weakness enumeration for null pointer dereference vulnerabilities</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S1697" class="rspec-auto-link">RSPEC-1697</a> - <a href="https://rules.sonarsource.com/java/RSPEC-1697/">Short-circuit logic should be used to prevent null pointer dereferences (Java)</a></p>
</li>
<li>
<p><a data-rspec-id="S6582" class="rspec-auto-link">RSPEC-6582</a> - <a href="https://rules.sonarsource.com/dart/RSPEC-6582/">Null check operators should not be used on non-nullable values (Dart)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>