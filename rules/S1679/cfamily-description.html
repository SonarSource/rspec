<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When <code>throw</code> is followed by an expression, this expression will be used to create and initialize the exception object. In other words, the exception object is <em>copy-initialized</em> from the expression.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">catch (const std::exception&amp; ex) {
  // ...
  throw ex; // "throw" copy-initializes the exception object from "ex"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Rethrowing an unmodified copy of the caught exception is a bad practice because:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The exception already exists, so it is better to reuse it instead of creating a new one and wasting resources.</p>
</li>
<li>
<p>The copy will be an instance of the exception base class rather than the potentially more specific exception class initially caught. So it may lead to a loss of precision.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The rule raises an issue when the argument of the <code>throw</code> expression is an unmodified copy of the caught exception.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">try {
  throw std::invalid_argument("x");
} catch (const std::exception&amp; ex) {
  // ...
  throw ex; // Noncompliant: the received "std::invalid_argument" exception is copied into a less specialized class "std::exception"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">try {
  throw std::invalid_argument("x");
} catch (const std::exception&amp; ex) {
  // ...
  throw; // Compliant: rethrows the initial "std::invalid_argument" exception
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>C&#43;&#43; reference - <a href="https://en.cppreference.com/w/cpp/language/throw"><code>throw</code> expression</a></p>
</li>
<li>
<p>C&#43;&#43; reference - <a href="https://en.cppreference.com/w/cpp/language/copy_initialization">Copy initialization</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Remove "XXX" from this "throw" statement to rethrow the original exception.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>variable after the "throw" keyword</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_4_aug_2015_195727_ann_campbell_wrote">on 4 Aug 2015, 19:57:27 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~tamas.vajk] I&#8217;ve mapped this to FxCop RethrowToPreserveStackDetails even though the reasoning seems to be different, the title and code samples are remarkably similar.</p>
</div>
<div class="paragraph">
<p>\[~evgeny.mandrikov] I have found only nebulous hints that the stacktrace is reset in C&#43;&#43; in this Noncompliant scenario (which is the logic behind the C# FxCop rule). Can you confirm/deny? If true, it would be a valuable addition to the description IMO.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_21_feb_2017_154102_ann_campbell_wrote">on 21 Feb 2017, 15:41:02 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Nice find [~alexandre.gigleux]. Mapped.</p>
</div>
</div>
</div>
</div>