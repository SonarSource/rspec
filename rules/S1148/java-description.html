<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>Throwable.printStackTrace(...)</code> prints a <code>Throwable</code> and its stack trace to some stream. By default that stream <code>System.Err</code>, which could inadvertently expose sensitive information.</p>
</div>
<div class="paragraph">
<p>Loggers should be used instead to print <code>Throwable</code>s, as they have many advantages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Users are able to easily retrieve the logs.</p>
</li>
<li>
<p>The format of log messages is uniform and allow users to browse the logs easily.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This rule raises an issue when <code>printStackTrace</code> is used without arguments, i.e. when the stack trace is printed to the default stream.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">try {
  /* ... */
} catch(Exception e) {
  e.printStackTrace();        // Noncompliant
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">try {
  /* ... */
} catch(Exception e) {
  LOGGER.log("context", e);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>OWASP - <a href="https://owasp.org/www-project-top-ten/2017/A3_2017-Sensitive_Data_Exposure">Top 10 2017 Category A3 - Sensitive Data Exposure</a></p>
</li>
<li>
<p>CWE - <a href="https://cwe.mitre.org/data/definitions/489">CWE-489 - Active Debug Code</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Use a logger to log this exception.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p><code>printStackTrace()</code></p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_related_to_s1166">is related to: <a data-rspec-id="S1166" class="rspec-auto-link">S1166</a></h3>

</div>
<div class="sect2">
<h3 id="_on_26_jul_2013_130744_freddy_mallet_wrote">on 26 Jul 2013, 13:07:44 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>Is implemented by http://jira.codehaus.org/browse/SONARJAVA-235</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_11_feb_2015_123100_sébastien_gioria_wrote">on 11 Feb 2015, 12:31:00 Sébastien Gioria wrote:</h3>
<div class="paragraph">
<p>This rule is a OWASP A6 tag candidate</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_12_feb_2015_135524_ann_campbell_wrote">on 12 Feb 2015, 13:55:24 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Thanks [~sebastien.gioria], but I&#8217;m going to pass on this.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_nov_2015_110550_thomas_hofer_wrote">on 10 Nov 2015, 11:05:50 Thomas Hofer wrote:</h3>
<div class="paragraph">
<p>Hi! Pretty new around here, so I don&#8217;t know if it&#8217;s the best option to discuss some specifics of this rule. I&#8217;ll welcome any criticism or redirection to another channel of communication!</p>
</div>
<div class="paragraph">
<p>I&#8217;m 100% onboard with flagging calls to <code>Throwable#printStackTrace()</code>, without arguments. However, there are (IMHO) valid use cases for printing the stacktrace to a <code>PrintWriter</code>, such as displaying relevant error messages in a UI (while still logging it to file / console). Obviously, this only makes sense in local apps and not in webapps at all.</p>
</div>
<div class="paragraph">
<p>One example of such usage is available on http://code.makery.ch/blog/javafx-dialogs-official/#exception-dialog. I feel it would be overkill to use a specific Logger for that case.</p>
</div>
<div class="paragraph">
<p>This rule is flagged as CRITICAL in the default profile, which I find perfectly valid for the genuinely bad calls to <code>Throwable#printStackTrace()</code>. However, I would like to be able to set a lower severity level for calls with a specific writer, which reflect a decision from the developper and are not included in the default templates for catch blocks :)</p>
</div>
<div class="paragraph">
<p>Would you consider splitting this rule in two (with / without args) to allow for different severity levels? Or do you consider this a cornercase, in which case I should add my own rules to override this one?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_nov_2015_135645_ann_campbell_wrote">on 10 Nov 2015, 13:56:45 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~thomas.geek.hofer@gmail.com], please take this up on the <a href="https://groups.google.com/forum/#!forum/sonarqube">SonarQube Google Group</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_nov_2015_140601_thomas_hofer_wrote">on 10 Nov 2015, 14:06:01 Thomas Hofer wrote:</h3>
<div class="paragraph">
<p>Thanks, will do!</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_20_nov_2015_140223_thomas_hofer_wrote">on 20 Nov 2015, 14:02:23 Thomas Hofer wrote:</h3>
<div class="paragraph">
<p>Done, <a href="https://groups.google.com/forum/#!topic/sonarqube/mCgzOFeUjZ4">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_19_mar_2018_110945_sébastien_gioria_appsecfr_wrote">on 19 Mar 2018, 11:09:45 Sébastien GIORIA - AppSecFR wrote:</h3>
<div class="paragraph">
<p>could be tageed : CWE-497 and OWASP A3:2017</p>
</div>
</div>
</div>
</div>