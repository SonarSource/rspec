<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are various <code>String</code> operations that take one or more character indexes as arguments and return a portion of the original string.
Indexing in this context is zero-based, meaning that the first character&#8217;s index is <code>0</code>.
As a result, given a string <code>myString</code>, its last character is at index <code>myString.length() - 1</code>.</p>
</div>
<div class="paragraph">
<p>The <code>String</code> operation methods throw a <code>StringIndexOutOfBoundsException</code> when one of their index argument is smaller than 0 (E.G.: -1).
<code>String::substring</code> also throws this exception when the <code>beginIndex</code> or <code>endIndex</code> argument is larger than <code>myString.length()</code>, and
<code>String::charAt</code> when the <code>index</code> argument is larger than <code>myString.length() - 1</code>
For instance, it is not possible to use <code>String::charAt</code> to retrieve a value before the start or after the end of a string.
Furthermore, it is not possible to use <code>String::substring</code> with <code>beginIndex &gt; endIndex</code> to reverse the order of characters in a string.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when a negative literal or an index that is too large is passed as an argument to the <code>String::substring</code>, <code>String::charAt</code>, and related methods.
It also raises an issue when the start index passed to <code>String::substring</code> is larger than the end index.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use non-negative indexes that are smaller than or equal to the length of the string in question with <code>String::substring</code> and strictly smaller with <code>String::charAt</code>.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String speech = "Lorem ipsum dolor sit amet";

String substr1 = speech.substring(-1, speech.length()); // Noncompliant, -1 is out of bounds
String substr2 = speech.substring(speech.length(), 0);  // Noncompliant, the beginIndex must be smaller than or equal to the endIndex
char ch = speech.charAt(speech.length());               // Noncompliant, speech.length() is out of bounds</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String speech = "Lorem ipsum dolor sit amet";

String substr1 = speech;                                         // Compliant, no string operation used
String substr2 = new StringBuilder(speech).reverse().toString(); // Compliant, the string can be reversed using StringBuilder::reverse()
char ch = speech.charAt(speech.length() - 1);                    // Compliant, speech.length() - 1 is in bounds.</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Refactor this "[substring|charAt]" call; it will result in an "StringIndexOutOfBounds" exception at runtime.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s2121">relates to: <a data-rspec-id="S2121" class="rspec-auto-link">S2121</a></h3>

</div>
</div>
</div>