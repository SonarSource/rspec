<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When injecting <code>std::endl</code> into an output stream, two things happen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An end of line character <code>'\n'</code> is added to the stream</p>
</li>
<li>
<p>The stream is flushed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In many situations, you don&#8217;t need the stream to be flushed: It takes some time, and additionally, the stream is also flushed automatically in several circumstances:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When the stream is closed</p>
</li>
<li>
<p>In the case of <code>std::cout</code>, each time an input is read on <code>std::cin</code> or an output is written on <code>std::cerr</code></p>
</li>
<li>
<p>In the case of <code>std::cerr</code>, each output is immediately written, the is no need to flush</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Therefore, if your only goal is to add an end of line, <code>'\n'</code> is usually more efficient than <code>std::endl</code>. If you do want to flush, you can be explicit and inject <code>std::flush</code> into the stream, or call the <code>flush</code> member function on the stream.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">void f() {
  cout &lt;&lt; "Hello world!" &lt;&lt; endl &lt;&lt; endl &lt;&lt; "How are you?" &lt;&lt; endl; // Noncompliant, 3 useless flushes
  string s;
  cin &gt;&gt; s;
  cout &lt;&lt; "Starting long operation now..." &lt;&lt; endl; // Noncompliant, flushing is useful, but not explicit enough
  longOperation();
  cout &lt;&lt; "Long operation is done" &lt;&lt; endl; // Noncompliant
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">void f() {
  cout &lt;&lt; R"(Hello world!

How are you?
)" &lt;&lt; endl;
  // Or
  cout &lt;&lt; "Hello world!\n\nHow are you?\n";
  string s;
  cin &gt;&gt; s;
  cout &lt;&lt; "Starting long operation now...\n" &lt;&lt; flush;
  longOperation();
  cout &lt;&lt; "Long operation is done\n";
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>C&#43;&#43; Core Guidelines - <a href="https://github.com/isocpp/CppCoreGuidelines/blob/e49158a/CppCoreGuidelines.md#slio50-avoid-endl">SL.io.50: Avoid <code>endl</code></a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_19_aug_2020_003248_loïc_joly_wrote">on 19 Aug 2020, 00:32:48 Loïc Joly wrote:</h3>
<div class="paragraph">
<p>We expect this rule to be quite verbose, for a limited value. But we believe it is still worth having it for its educational value.</p>
</div>
<div class="paragraph">
<p>We thought about having a rule trying to only detect uses of endl where we are confident that flushing is not needed (<code>std::cout &lt;&lt; "Hello" &lt;&lt; endl &lt;&lt; endl;</code>) or several consecutive lines using endl without any function call in-between:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>std::cout &lt;&lt; "Hello" &lt;&lt; endl;
std::cout &lt;&lt; "Hello" &lt;&lt; endl;
std::cout &lt;&lt; "Hello" &lt;&lt; endl;</pre>
</div>
</div>
<div class="paragraph">
<p>But we believe it would be another rule (maybe part of SonarWay?), but still not much more valuable. So for now, we decided to stick to the simple rule.</p>
</div>
<div class="paragraph">
<p>Another option would be to flag only the cases where <code>\n</code> is more succinct than <code>endl</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>std::cout &lt;&lt; "Hello" &lt;&lt; endl; // Noncompliant because...
std::cout &lt;&lt; "Hello\n"; // ...alternative is shorter
std::cout &lt;&lt; "Value:" &lt;&lt; i &lt;&lt; endl; // Compliant because...
std::cout &lt;&lt; "Value:" &lt;&lt; i &lt;&lt; '\n'; // ...alternative is just as complex</pre>
</div>
</div>
<div class="paragraph">
<p>But it is still favoring performances rather than correctness, which is usually not a great pattern&#8230;&#8203;</p>
</div>
</div>
</div>
</div>