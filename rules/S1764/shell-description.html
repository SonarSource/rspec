<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using the same value on both sides of certain operators is a code defect. In the case of logical operators, it is either a copy/paste error and, therefore, a bug, or it is simply duplicated code and should be simplified. For comparison operators and arithmetic operations, having the same value on both sides of an operator yields predictable results and should be simplified as well to avoid further code defects.</p>
</div>
<div class="paragraph">
<p>This rule raises for the following operators and constructs in bash/shell:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Equality operators (<code>==</code>, <code>!=</code>, <code>=</code>)</p>
</li>
<li>
<p>Comparison operators (<code>-eq</code>, <code>-ne</code>, <code>-lt</code>, <code>-le</code>, <code>-gt</code>, <code>-ge</code>)</p>
</li>
<li>
<p>String comparison operators (<code>&lt;</code>, <code>&gt;</code>)</p>
</li>
<li>
<p>Logical operators (<code>&amp;&amp;</code>, <code>||</code>)</p>
</li>
<li>
<p>Regex operator (<code>=~</code>)</p>
</li>
<li>
<p>Arithmetic operations in <code>$expression</code>:</p>
<div class="ulist">
<ul>
<li>
<p>Subtraction (<code>-</code>)</p>
</li>
<li>
<p>Division (<code>/</code>)</p>
</li>
<li>
<p>Modulo (<code>%</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Bitwise operations in <code>$expression</code>:</p>
<div class="ulist">
<ul>
<li>
<p>Bitwise OR (<code>|</code>)</p>
</li>
<li>
<p>Bitwise AND (<code>&amp;</code>)</p>
</li>
<li>
<p>Bitwise XOR (<code>^</code>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>This rule ignores the following operators:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Multiplication (<code>*</code>)</p>
</li>
<li>
<p>Exponentiation (<code>**</code>)</p>
</li>
<li>
<p>Addition (<code>+</code>)</p>
</li>
<li>
<p>Assignment (<code>=</code> when used for variable assignment)</p>
</li>
<li>
<p>Bitwise shift operators (<code>&lt;&lt;</code>, <code>&gt;&gt;</code>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">#!/bin/bash

if [[ $a == $a ]]; then
  echo "This will always execute"
fi

if [[ $a != $a ]]; then
  echo "This will never execute"
fi

if [[ $a == $b &amp;&amp; $a == $b ]]; then
  echo "Redundant check"
fi

if [[ $num1 -eq $num1 ]]; then
  echo "Always true"
fi

result=$((5 - 5))  # always 0
division=$((10 / 10))  # always 1
modulo=$((7 % 7))  # always 0

bitwise_or=$((5 | 5))  # always 5
bitwise_and=$((7 &amp; 7))  # always 7
bitwise_xor=$((3 ^ 3))  # always 0

if [[ "$str2" &gt; "$str2" ]]; then
  echo "Never executed"
fi</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">#!/bin/bash

if [[ $a == $b ]]; then
  echo "Variables are equal"
fi

if [[ -n $a ]]; then
  echo "Variable is not empty"
fi

if [[ $a == $b ]]; then
  echo "Single check is sufficient"
fi

if [[ $num1 -eq $num2 ]]; then
  echo "Number matches expected value"
fi

result=$((5 - 2))
division=$((10 / 2))
modulo=$((7 % 2))

bitwise_or=$((5 | 3))
bitwise_and=$((7 &amp; 2))
bitwise_xor=$((3 ^ 1))

if [[ "$str1" &gt; "$str2" ]]; then
  echo "String comparison makes sense"
fi</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.gnu.org/software/bash/manual/bash.html#Conditional-Constructs">Bash Manual - Conditional Constructs</a></p>
</li>
<li>
<p><a href="https://www.gnu.org/software/bash/manual/bash.html#Shell-Arithmetic">Bash Manual - Shell Arithmetic</a></p>
</li>
<li>
<p><a href="https://tldp.org/LDP/abs/html/comparison-ops.html">Advanced Bash-Scripting Guide - Comparison Operators</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>