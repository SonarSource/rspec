<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you do not use the return value of a method with no side effects, it indicates that something is wrong. Either this method is unnecessary, or the source code does not behave as expected and could lead to code defects.
For example, there are methods, such as <a href="https://learn.microsoft.com/en-us/dotnet/api/system.datetime.addyears">DateTime.AddYears</a>, that don&#8217;t change the value of the input object, but instead, they return a new object whose value is the result of this operation, and as a result that you will have unexpected effects if you do not use the return value.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when the results of the following methods are ignored:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/linq/">LINQ</a></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.contracts.pureattribute"><code>Pure</code> methods</a></p>
</li>
<li>
<p>Any method on <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/built-in-types">build-in types</a></p>
</li>
<li>
<p>Any method on <a href="https://learn.microsoft.com/en-us/archive/msdn-magazine/2017/march/net-framework-immutable-collections">Immutable collections</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Special cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Although <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.intern"><code>string.Intern</code></a> has a side effect, ignoring its return value is still suspicious as it is the only reference ensured to point to the intern pool.</p>
</li>
<li>
<p>LINQ methods can have side effects if they are misused. For example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>data.All(x =&gt;
{
    x.Property = "foo";
    return true;
});</pre>
</div>
</div>
<div class="paragraph">
<p>Such code should be rewritten as a loop because <a href="https://learn.microsoft.com/en-us/dotnet/api/system.linq.enumerable.all"><code>Enumerable.All&lt;TSource&gt;</code></a> method should be used to determine if all elements satisfy a condition and not to change their state.</p>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>This rule doesn&#8217;t report issues on invocations with <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/out-parameter-modifier"><code>out</code></a> or <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/ref"><code>ref</code></a> arguments.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">data.Where(x =&gt; x &gt; 5).Select(x =&gt; x * x); // Noncompliant
"this string".Equals("other string"); // Noncompliant

data.All(x =&gt;  // Noncompliant
{
    x.Property = "foo";
    return true;
});</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">var res = data.Where(x =&gt; x &gt; 5).Select(x =&gt; x * x);
var isEqual = "this string".Equals("other string");

foreach (var x in data)
{
    x.Property = "foo";
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.contracts.pureattribute"><code>PureAttribute</code> Class</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/out-parameter-modifier"><code>out</code> parameter modifier</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/ref"><code>ref</code> keyword</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string.intern"><code>String.Intern(String)</code> Method</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/linq/">LINQ</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/built-in-types">build-in types</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/archive/msdn-magazine/2017/march/net-framework-immutable-collections">Immutable collections</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_articles_blog_posts">Articles &amp; blog posts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.daniellittle.dev/dont-ignore-your-functions">Don&#8217;t ignore your functions</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Use the return value of method "[method name]".</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_14_mar_2016_095302_dinesh_bolkensteyn_wrote">on 14 Mar 2016, 09:53:02 Dinesh Bolkensteyn wrote:</h3>
<div class="paragraph">
<p>perhaps we can add some methods on the <code>String</code> class such as <code>ToUpper</code>, <code>Substring</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_relates_to_s899">relates to: <a data-rspec-id="S899" class="rspec-auto-link">S899</a></h3>

</div>
<div class="sect2">
<h3 id="_supercedes_s1154">supercedes: <a data-rspec-id="S1154" class="rspec-auto-link">S1154</a></h3>

</div>
<div class="sect2">
<h3 id="_on_24_nov_2014_125737_nicolas_peru_wrote">on 24 Nov 2014, 12:57:37 Nicolas Peru wrote:</h3>
<div class="paragraph">
<p>This rule seems ok to me but the message is not convincing me. I would go for something more explicit about the fact that the return value of the method is ignored.</p>
</div>
<div class="paragraph">
<p>"Return value of method 'xxx' is not used"</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_1_dec_2014_093120_freddy_mallet_wrote">on 1 Dec 2014, 09:31:20 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>And we should be careful to not mix this rule with <a data-rspec-id="S899" class="rspec-auto-link">RSPEC-899</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S899" class="rspec-auto-link">RSPEC-899</a> is about ignoring the result of a function call when this result indicates the status of the operation: KO, OK (so when exceptions are not used to trigger issues)</p>
</li>
<li>
<p>This one <a data-rspec-id="S2201" class="rspec-auto-link">RSPEC-2201</a>, is about ignoring the result of a function call when this result contains the output of the operation</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_on_27_mar_2015_133647_ann_campbell_wrote">on 27 Mar 2015, 13:36:47 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Per discussion, I floated closing <a data-rspec-id="S899" class="rspec-auto-link">RSPEC-899</a> to C-Family team &amp; met with objections.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_10_jan_2016_124652_freddy_mallet_wrote">on 10 Jan 2016, 12:46:52 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>Hi [~ann.campbell.2], I don&#8217;t understand why this rule is not part of "Sonar way" quality profile because for sure when an issue is raised this is bug.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_11_jan_2016_181509_ann_campbell_wrote">on 11 Jan 2016, 18:15:09 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>As I recall [~freddy.mallet], it&#8217;s a question of confidence in accurately identifying methods without side effects.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_13_jan_2016_092638_freddy_mallet_wrote">on 13 Jan 2016, 09:26:38 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>I know [~ann.campbell.2], but for instance in Java we&#8217;ve tuned the rule to be sure at 100% that we&#8217;re not generating any false-positives (by limiting the scope to calls to immutable objects) and I think we must do the same thing for the other targeted languages. So at least in Java, this rule must be activated by default (cc [~nicolas.peru]).</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_13_jan_2016_133355_ann_campbell_wrote">on 13 Jan 2016, 13:33:55 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Done [~freddy.mallet]</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_21_feb_2020_145938_james_bromwell_wrote">on 21 Feb 2020, 14:59:38 James Bromwell wrote:</h3>
<div class="paragraph">
<p>I created <a href="https://github.com/SonarSource/SonarJS/issues/1948">a new issue on the SonarJS GitHub tracker</a> but I&#8217;m not sure if the fault is in the rule itself or in the JS/TS implementation of the rule, so I thought it might be worth bringing up here.</p>
</div>
</div>
</div>
</div>