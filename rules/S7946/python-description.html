<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when f-strings or string concatenation are used in logging statements.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using f-strings and string concatenation in logging statements creates
unnecessary performance overhead. When you use f-strings or string concatenation,
Python evaluates and formats the string immediately, regardless of whether
the log message will actually be written based on the current logging level.</p>
</div>
<div class="paragraph">
<p>This means that if your application has debug-level logging statements with
f-strings, but the logging level is set to WARNING or higher, Python will
still spend CPU cycles formatting those strings even though they will never
be displayed or written to logs.</p>
</div>
<div class="paragraph">
<p>Python&#8217;s logging module uses lazy evaluation with its built-in string formatting.
When you pass format strings and arguments separately to logging methods,
the string formatting only occurs if the log message passes the level filter.
This can provide significant performance benefits, especially in applications
with many debug statements or high-frequency logging.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Using f-strings and string concatenation in logging can lead to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Performance degradation</strong>: String formatting occurs unconditionally, even when log messages are filtered out by level</p>
</li>
<li>
<p><strong>CPU waste</strong>: Applications with extensive debug logging may spend significant time formatting unused strings</p>
</li>
<li>
<p><strong>Scalability issues</strong>: In high-throughput applications, the cumulative effect of unnecessary string formatting can impact overall performance</p>
</li>
<li>
<p><strong>Memory overhead</strong>: Intermediate string objects are created even when the log message won&#8217;t be used</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_fix">How to fix?</h3>
<div class="paragraph">
<p>Replace custom formatters with Python&#8217;s built-in string formatting in logging calls. Use format specifiers directly in the logging methods.</p>
</div>
<div class="sect3">
<h4 id="_non_compliant_code_example">Non-compliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import logging

def log(action, amount, item):
  logging.info(f"User {action}: {amount:.2f} {item}")  # Noncompliant: using f-string formatting</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_code_example">Compliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import logging

def log(action, amount, item):
  logging.info("User %s: %.2f %s", action, amount, item)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Python Logging HOWTO - <a href="https://docs.python.org/3/howto/logging.html">Official Python documentation on logging best practices</a></p>
</li>
<li>
<p>Logging Cookbook - <a href="https://docs.python.org/3/howto/logging-cookbook.html">Advanced logging techniques and patterns in Python</a></p>
</li>
<li>
<p>String Formatting in Python - <a href="https://docs.python.org/3/library/string.html#format-string-syntax">Documentation on Python&#8217;s string formatting capabilities</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>