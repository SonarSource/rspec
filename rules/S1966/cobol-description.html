<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An alphanumeric value should not be moved to a numeric field. Because alphanumeric values are stored differently than numeric values, simply moving the bits from one field to the other will yield strange results at best, and crashes at worst.</p>
</div>
<div class="paragraph">
<p>Instead, <code>NUMVAL</code> should be used to explicitly convert the alphanumeric value to a numeric one.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cobol" data-lang="cobol">01  MY-STR          PIC X(3) VALUE SPACES.
01  MY-NUM         PIC 9(3) VALUE ZEROES.
*&gt; ...
    MOVE '1'         TO MY-STR
    MOVE MY-STR  TO MY-NUM  *&gt; Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cobol" data-lang="cobol">01  MY-STR          PIC X(3) VALUE SPACES.
01  MY-NUM         PIC 9(3) VALUE ZEROES.
*&gt; ...
    MOVE '1'         TO MY-STR
    COMPUTE MY-NUM = FUNCTION NUMVAL(MY-STR)</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cobol" data-lang="cobol">01  MY-STR         PIC X(3) VALUE SPACES.
01  MY-STR-RED     REDEFINES MY-STR PIC 9(3).
01  MY-NUM         PIC 9(3) VALUE ZEROES.
*&gt; ...
IF MY-STR NUMERIC
   MOVE MY-STR-RED  TO MY-NUM
END-IF</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>CWE - <a href="https://cwe.mitre.org/data/definitions/704">CWE-704 - Incorrect Type Conversion or Cast</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>"XXX" is a numeric field; "YYY" cannot be safely moved to it.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_25_aug_2014_200614_ann_campbell_wrote">on 25 Aug 2014, 20:06:14 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~pierre-yves.nicolas] according to http://www.csis.ul.ie/cobol/course/DataDeclaration.htm there are 3 types: numeric, alphanumeric, alphabetic. Should this rule be expanded to also cover alphabetic &#8594; numeric?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_25_aug_2014_200735_ann_campbell_wrote">on 25 Aug 2014, 20:07:35 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>FYI, this is an example of a rule implementing a Class - the rule is indeed an example of "Incorrect Type Conversion or Cast" but none of the existing child variants or bases map correctly.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_25_aug_2014_210720_freddy_mallet_wrote">on 25 Aug 2014, 21:07:20 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>Indeed [~ann.campbell.2]</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_26_aug_2014_154657_pierre_yves_nicolas_wrote">on 26 Aug 2014, 15:46:57 Pierre-Yves Nicolas wrote:</h3>
<div class="paragraph">
<p>See http://www-01.ibm.com/support/knowledgecenter/SS6SG3_5.1.0/com.ibm.cobol511.ent.doc/PGandLR/rlpsmovea2.html</p>
</div>
<div class="paragraph">
<p>I don&#8217;t know whether this rule should be expanded to also cover also cover alphabetic &#8594; numeric.</p>
</div>
<div class="paragraph">
<p>According to IBM reference, alphabetic &#8594; numeric is invalid: I suppose that the compiler should generate an error.</p>
</div>
<div class="paragraph">
<p>But alphanumeric &#8594; numeric is valid with the following note: "Figurative constants and alphanumeric literals must consist only of numeric characters and will be treated as numeric integer fields." My understanding is that the MOVE can lead to the expected result when that condition is fulfilled, but it is very easy to make a mistake.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_26_aug_2014_161551_ann_campbell_wrote">on 26 Aug 2014, 16:15:51 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Thanks [~pierre-yves.nicolas]. I&#8217;ll leave it as-is, then.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_19_sep_2014_113021_freddy_mallet_wrote">on 19 Sep 2014, 11:30:21 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>@Ann, I would associate this rule to the SQALE sub-characteristic "Instruction Related Reliability"</p>
</div>
</div>
</div>
</div>