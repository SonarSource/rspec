<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When an exception is logged and rethrown, the upstream code may not be aware that the exception has already been logged.
As a result, the same exception gets logged multiple times, making it difficult to identify the root cause of the issue.
This can be particularly problematic in multi-threaded applications where messages from other threads can be interwoven with the repeated log entries.</p>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>This rule will not generate issues if, within the catch block, one of the following conditions are met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The logs generated within the catch block do not contain any references to the exception being caught.</p>
</li>
<li>
<p>The exception being thrown from the catch block is not the same exception that is being caught.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To address this issue, it is recommended to modify the code to log exceptions only when they are handled locally. In all other cases, simply rethrow the exception and allow the higher-level layers of the application to handle the logging and appropriate actions.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">try {}
catch (Exception ex)
{
  logger.LogError(ex.Message);
  throw;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">try {}
catch (Exception ex)
{
  logger.LogError(ex.Message);
  // Handle exception
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">try {}
catch (Exception ex)
{
  // ...
  throw;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/statements/exception-handling-statements">Exception-handling statements</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_articles_blog_posts">Articles &amp; blog posts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://rolf-engelhard.de/2013/04/logging-anti-patterns-part-ii/">Rolf Engelhard - Logging anti-patterns</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Either log this exception and handle it, or rethrow it with some contextual information.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="ulist">
<ul>
<li>
<p>Primary: The exception caught</p>
</li>
<li>
<p>Secondary 1: The logging statement:</p>
<div class="ulist">
<ul>
<li>
<p>message: 'Logging statement.'</p>
</li>
</ul>
</div>
</li>
<li>
<p>Secondary 2: The <code>throw</code> statement</p>
<div class="ulist">
<ul>
<li>
<p>message: 'Thrown exception.'</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_21_nov_2024_164800_alban_auzeill_wrote">on 21 Nov 2024, 16:48:00 Alban Auzeill wrote:</h3>
<div class="paragraph">
<p>[test-code-support-investigation-for-java] Decision for scope: Keep 'Main'. Test don&#8217;t always want to capture the logs, throwing any "Boom!" exception is enough.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_11_oct_2014_120959_freddy_mallet_wrote">on 11 Oct 2014, 12:09:59 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>Sounds good to me!</p>
</div>
</div>
</div>
</div>