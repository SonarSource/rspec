<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>References in a class to static class members (fields or methods) can be made using either <code>self::$var</code> or <code>static::$var</code> (introduced in 5.3). The difference between the two is one of scope. Confusingly, in subclasses, the use of <code>self::</code> references the original definition of the member, i.e. the superclass version, rather than any override at the subclass level. <code>static::</code>, on the other hand, references the class that was called at runtime.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-php" data-lang="php">&lt;?php

class Toy {

    public static function status() {
        self::getStatus();  // Noncompliant; will always print "Sticks are fun!" even when called from a subclass which overrides this method;
    }

    protected static function getStatus() {
        echo "Sticks are fun!";
    }
}

class Ball extends Toy {

    protected static function getStatus() {  // Doesn't actually get called
        echo "Balls are fun!";
    }
}

$myBall = new Ball();
$myBall::status();  // Prints "Sticks are fun!"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-php" data-lang="php">&lt;?php

class Toy {

    public static function status() {
        static::getStatus();  // Compliant
    }

    protected static function getStatus() {
        echo "Sticks are fun!";
    }
}

class Ball extends Toy {

    protected static function getStatus() {
        echo "Balls are fun!";
    }
}

$myBall = new Ball();
$myBall::status();  // Prints "Balls are fun!"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>No issue is raised when <code>self</code> is used on a constant field, a private field or a private method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-php" data-lang="php">class A
{
    private static $somevar = "hello";
    const CONSTANT = 42;

    private static function foo()
    {
        $var = self::$somevar . self::CONSTANT;  // Should be OK
        self::foo();                               // Should be OK
    }
}</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Use "static" keyword instead of "self".</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_12_oct_2014_170001_freddy_mallet_wrote">on 12 Oct 2014, 17:00:01 Freddy Mallet wrote:</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">@Ann, when discovering this rule it was not obvious for me to understand if there was or not a difference between self</dt>
<dd>
<p>or static:: prefixes to access static functions of fields.</p>
</dd>
<dt class="hdlist1">If my understanding is correct, there is no difference but obviously it&#8217;s better to use static</dt>
<dd>
<p>to prevent any misunderstanding.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>If this is the case, I would associate this rule to the SQALE characteristic Maintainability &gt; Understandability and to the tag pitfal</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_14_oct_2014_144305_ann_campbell_wrote">on 14 Oct 2014, 14:43:05 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~freddy.mallet] I disagree about SQALE - the point of the rule is that when you use <code>self::</code> you&#8217;re going to get the superclass' version, not the override - i.e. you won&#8217;t get what you think you will.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_21_oct_2014_202924_ann_campbell_wrote">on 21 Oct 2014, 20:29:24 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~linda.martin] LGTM</p>
</div>
</div>
</div>
</div>