<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when ActiveRecord model class names or attribute names conflict with Ruby keywords, Rails framework methods, or ActiveRecord built-in methods.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using reserved names for ActiveRecord models and attributes creates serious conflicts that can break your application in unexpected ways.</p>
</div>
<div class="paragraph">
<p>When you name a model class using a Ruby keyword like <code>Class</code> or <code>Module</code>, you&#8217;re overriding fundamental Ruby functionality. This can cause method resolution conflicts and make your code behave unpredictably.</p>
</div>
<div class="paragraph">
<p>Similarly, when you use ActiveRecord method names as attributes, you&#8217;re shadowing the framework&#8217;s built-in functionality. For example, naming an attribute <code>save</code> means you can no longer call the <code>save</code> method on your model instances normally. Instead of saving the record to the database, accessing <code>model.save</code> would return the attribute value.</p>
</div>
<div class="paragraph">
<p>Rails also reserves certain attribute names for specific purposes. The <code>type</code> attribute is used for Single Table Inheritance (STI), and using it for other purposes will interfere with Rails' polymorphic behavior.</p>
</div>
<div class="paragraph">
<p>These naming conflicts create several problems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Method shadowing</strong>: Your attributes hide important framework methods, making them inaccessible</p>
</li>
<li>
<p><strong>Unexpected behavior</strong>: Code that should work normally fails in confusing ways</p>
</li>
<li>
<p><strong>Debugging difficulties</strong>: Errors become harder to trace because the root cause is a naming conflict</p>
</li>
<li>
<p><strong>Framework interference</strong>: Rails' built-in features like STI or callbacks may not work correctly</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The issue is particularly problematic because the conflicts aren&#8217;t always immediately obvious. Your application might work in development but fail in production, or certain features might work until you try to use specific Rails functionality.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Using reserved names can cause method conflicts that break core ActiveRecord functionality, lead to unexpected runtime errors, and make debugging extremely difficult. In severe cases, it can prevent models from being saved, loaded, or properly associated with other models.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it_in_rails">How to fix it in Rails</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Rename model classes to avoid Ruby keywords and Rails reserved words. Use descriptive, domain-specific names that clearly indicate the model&#8217;s purpose.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class Attribute &lt; ApplicationRecord
end

class Class &lt; ActiveRecord::Base
end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class ProductAttribute &lt; ApplicationRecord
end

class UserProfile &lt; ActiveRecord::Base
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Rename attributes to avoid conflicts with ActiveRecord methods and Ruby built-ins. Choose names that describe the data&#8217;s purpose rather than generic terms.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_code_examples_2">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class User &lt; ActiveRecord::Base
  validates :type, presence: true    # Noncompliant: conflicts with STI
  validates :send, presence: true    # Noncompliant: Ruby method
  validates :errors, presence: true  # Noncompliant: ActiveRecord method
  validates :save, presence: true    # Noncompliant: ActiveRecord method
end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class User &lt; ActiveRecord::Base
  validates :user_category, presence: true
  validates :email_address, presence: true
  validates :error_count, presence: true
  validates :saved_preferences, presence: true
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>For database table names that conflict with SQL keywords, use Rails' table name configuration to specify a safe alternative.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_code_examples_3">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example_3">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class Transaction &lt; ActiveRecord::Base  # Noncompliant: SQL keyword
end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_3">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class PaymentTransaction &lt; ActiveRecord::Base
  self.table_name = 'payment_transactions'
end</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Rails Naming Conventions - <a href="https://guides.rubyonrails.org/active_record_basics.html#naming-conventions">Official Rails guide on naming conventions for models and attributes</a></p>
</li>
<li>
<p>Ruby Reserved Words - <a href="https://docs.ruby-lang.org/en/master/keywords_rdoc.html">Complete list of Ruby language keywords and reserved words</a></p>
</li>
<li>
<p>ActiveRecord Method List - <a href="https://api.rubyonrails.org/classes/ActiveRecord/Base.html">Documentation of ActiveRecord&#8217;s built-in methods that should not be used as attribute names</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-1099: Inconsistent Naming Conventions for Identifiers - <a href="https://cwe.mitre.org/data/definitions/1099.html">Weakness related to inconsistent or problematic naming that can lead to confusion and errors</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S1669" class="rspec-auto-link">RSPEC-1669</a> - <a href="https://rules.sonarsource.com/csharp/RSPEC-1669/">C# rule for avoiding reserved words in identifiers</a></p>
</li>
<li>
<p><a data-rspec-id="S1190" class="rspec-auto-link">RSPEC-1190</a> - <a href="https://rules.sonarsource.com/java/RSPEC-1190/">Java rule for avoiding reserved words as identifiers</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>