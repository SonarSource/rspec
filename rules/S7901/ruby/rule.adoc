This rule raises an issue when ActiveRecord model class names or attribute names conflict with Ruby keywords, Rails framework methods, or ActiveRecord built-in methods.

== Why is this an issue?

Using reserved names for ActiveRecord models and attributes creates serious conflicts that can break your application in unexpected ways.

When you name a model class using a Ruby keyword like `Class` or `Module`, you're overriding fundamental Ruby functionality. This can cause method resolution conflicts and make your code behave unpredictably.

Similarly, when you use ActiveRecord method names as attributes, you're shadowing the framework's built-in functionality. For example, naming an attribute `save` means you can no longer call the `save` method on your model instances normally. Instead of saving the record to the database, accessing `model.save` would return the attribute value.

Rails also reserves certain attribute names for specific purposes. The `type` attribute is used for Single Table Inheritance (STI), and using it for other purposes will interfere with Rails' polymorphic behavior.

These naming conflicts create several problems:

* *Method shadowing*: Your attributes hide important framework methods, making them inaccessible
* *Unexpected behavior*: Code that should work normally fails in confusing ways
* *Debugging difficulties*: Errors become harder to trace because the root cause is a naming conflict
* *Framework interference*: Rails' built-in features like STI or callbacks may not work correctly

The issue is particularly problematic because the conflicts aren't always immediately obvious. Your application might work in development but fail in production, or certain features might work until you try to use specific Rails functionality.

=== What is the potential impact?

Using reserved names can cause method conflicts that break core ActiveRecord functionality, lead to unexpected runtime errors, and make debugging extremely difficult. In severe cases, it can prevent models from being saved, loaded, or properly associated with other models.

== How to fix it in Rails

Rename model classes to avoid Ruby keywords and Rails reserved words. Use descriptive, domain-specific names that clearly indicate the model's purpose.

=== Code examples

==== Noncompliant code example

[source,ruby,diff-id=1,diff-type=noncompliant]
----
class Attribute < ApplicationRecord
end

class Class < ActiveRecord::Base
end
----

==== Compliant solution

[source,ruby,diff-id=1,diff-type=compliant]
----
class ProductAttribute < ApplicationRecord
end

class UserProfile < ActiveRecord::Base
end
----

Rename attributes to avoid conflicts with ActiveRecord methods and Ruby built-ins. Choose names that describe the data's purpose rather than generic terms.

=== Code examples

==== Noncompliant code example

[source,ruby,diff-id=2,diff-type=noncompliant]
----
class User < ActiveRecord::Base
  validates :type, presence: true    # Noncompliant: conflicts with STI
  validates :send, presence: true    # Noncompliant: Ruby method
  validates :errors, presence: true  # Noncompliant: ActiveRecord method
  validates :save, presence: true    # Noncompliant: ActiveRecord method
end
----

==== Compliant solution

[source,ruby,diff-id=2,diff-type=compliant]
----
class User < ActiveRecord::Base
  validates :user_category, presence: true
  validates :email_address, presence: true
  validates :error_count, presence: true
  validates :saved_preferences, presence: true
end
----

For database table names that conflict with SQL keywords, use Rails' table name configuration to specify a safe alternative.

=== Code examples

==== Noncompliant code example

[source,ruby,diff-id=3,diff-type=noncompliant]
----
class Transaction < ActiveRecord::Base  # Noncompliant: SQL keyword
end
----

==== Compliant solution

[source,ruby,diff-id=3,diff-type=compliant]
----
class PaymentTransaction < ActiveRecord::Base
  self.table_name = 'payment_transactions'
end
----

== Resources

=== Documentation

 * Rails Naming Conventions - https://guides.rubyonrails.org/active_record_basics.html#naming-conventions[Official Rails guide on naming conventions for models and attributes]

 * Ruby Reserved Words - https://docs.ruby-lang.org/en/master/keywords_rdoc.html[Complete list of Ruby language keywords and reserved words]

 * ActiveRecord Method List - https://api.rubyonrails.org/classes/ActiveRecord/Base.html[Documentation of ActiveRecord's built-in methods that should not be used as attribute names]

=== Standards

 * CWE-1099: Inconsistent Naming Conventions for Identifiers - https://cwe.mitre.org/data/definitions/1099.html[Weakness related to inconsistent or problematic naming that can lead to confusion and errors]

=== Related rules

 * RSPEC-1669 - https://rules.sonarsource.com/csharp/RSPEC-1669/[C# rule for avoiding reserved words in identifiers]

 * RSPEC-1190 - https://rules.sonarsource.com/java/RSPEC-1190/[Java rule for avoiding reserved words as identifiers]
