This rule raises an issue when a method with `Boolean` return type explicitly returns `null`.

== Why is this an issue?

Methods that return `Boolean` (the wrapper type) should avoid returning `null` because of auto-unboxing risks.

When a method returns `Boolean`, callers might use the result in contexts expecting a primitive `boolean`. In such cases, Groovy automatically unboxes the `Boolean` wrapper to a primitive `boolean` value.

If the method returns `null`, the auto-unboxing process will attempt to convert `null` to a primitive `boolean`, which is impossible. This results in a `NullPointerException` at runtime.

The issue is particularly dangerous because:

* The code compiles without warnings
* The exception only occurs at runtime when the `null` path is executed
* Callers may not expect a `Boolean` method to return `null`

This pattern violates the principle of least surprise and can lead to unexpected application crashes.

=== What is the potential impact?

When a method returns `null` instead of a valid `Boolean` value, any code that uses the result in a boolean context will throw a `NullPointerException`. This can cause application crashes, especially in conditional statements, logical operations, or when the value is assigned to a primitive `boolean` variable.

== How to fix it

Replace the `null` return with an appropriate `Boolean` value. Use `Boolean.FALSE` if the condition represents a false state, or `Boolean.TRUE` if it represents a true state.

=== Code examples

==== Noncompliant code example

[source,groovy,diff-id=1,diff-type=noncompliant]
----
Boolean isValid() {
    if (someCondition) {
        return Boolean.TRUE
    }
    return null // Noncompliant
}
----

==== Compliant solution

[source,groovy,diff-id=1,diff-type=compliant]
----
Boolean isValid() {
    if (someCondition) {
        return Boolean.TRUE
    }
    return Boolean.FALSE
}
----

== Resources

=== Documentation

 * Oracle Java Documentation - Autoboxing and Unboxing - https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html[Official documentation explaining autoboxing and unboxing behavior in Java]

 * Groovy Documentation - Primitive Types - https://groovy-lang.org/objectorientation.html#_primitive_types[Groovy documentation on primitive types and wrapper classes]

=== Standards

 * CWE-476: NULL Pointer Dereference - https://cwe.mitre.org/data/definitions/476.html[Describes the security implications of null pointer dereferences]

=== Related rules

 * RSPEC-2447 - https://rules.sonarsource.com/java/RSPEC-2447/[Java rule for the same issue - methods with Boolean return type should not return null]
