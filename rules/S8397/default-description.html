<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an issue when calling <code>uvicorn.run()</code> with the <code>reload</code>, <code>debug</code>, or <code>workers</code> parameters while passing the application object directly instead of as an import string.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Uvicorn is an ASGI server that can run your FastAPI application. When you use certain features like auto-reload (for development) or multiple workers (for production), Uvicorn needs to start new Python processes.</p>
</div>
<div class="paragraph">
<p>When Uvicorn starts a new process, it needs to import your application fresh in that process. This is where the problem occurs: Python cannot serialize and pass application objects between processes. Instead, Uvicorn needs an import string (like <code>"main:app"</code>) that tells it how to import the application in each new process.</p>
</div>
<div class="paragraph">
<p>If you pass the application object directly, Uvicorn will:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Issue a warning message</p>
</li>
<li>
<p>Disable the requested feature (reload or workers)</p>
</li>
<li>
<p>Continue running with a single process and no auto-reload</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This means your development workflow breaks (no auto-reload when you change code) or your production deployment doesn&#8217;t scale (no worker processes).</p>
</div>
<div class="paragraph">
<p>The import string format is <code>"module:variable"</code>, where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>module</code> is the Python module path (like <code>"main"</code> or <code>"my_package.server"</code>)</p>
</li>
<li>
<p><code>variable</code> is the name of the FastAPI application instance in that module</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, if your application is defined as <code>app = FastAPI()</code> in <code>main.py</code>, the import string would be <code>"main:app"</code>.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The <code>reload</code> and <code>workers</code> parameters are mutually exclusive. You should use <code>reload=True</code> for development (single process with auto-reload) or <code>workers=N</code> for production (multiple processes without auto-reload), but never both together.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>When the application object is passed directly instead of as an import string:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Development impact:</strong> Auto-reload functionality will not work, forcing developers to manually restart the server after every code change. This significantly slows down the development cycle.</p>
</li>
<li>
<p><strong>Production impact:</strong> Multiple worker processes will not spawn, meaning the application runs on a single process. This limits the application&#8217;s ability to handle concurrent requests and reduces overall throughput.</p>
</li>
<li>
<p><strong>Debugging impact:</strong> Developers may waste time troubleshooting why reload or workers aren&#8217;t functioning, not realizing the issue is in how the application is passed to Uvicorn.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace the direct application object reference with an import string in the format <code>"module:variable"</code>. The module path should match your file structure, and the variable should be the name of your FastAPI instance.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import uvicorn
from fastapi import FastAPI

app = FastAPI()

@app.get("/")
async def root():
    return {"message": "Hello World"}

def main():
    uvicorn.run(app, host="0.0.0.0", port=8000, reload=True)  # Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import uvicorn
from fastapi import FastAPI

app = FastAPI()

@app.get("/")
async def root():
    return {"message": "Hello World"}

def main():
    uvicorn.run("main:app", host="0.0.0.0", port=8000, reload=True)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Uvicorn Deployment Documentation - <a href="https://www.uvicorn.org/deployment/">Official Uvicorn documentation on deployment options, including how to use workers and the import string format</a></p>
</li>
<li>
<p>FastAPI Deployment with Uvicorn - <a href="https://fastapi.tiangolo.com/deployment/server-workers/">FastAPI&#8217;s guide on deploying with Uvicorn, explaining workers and the import string requirement</a></p>
</li>
<li>
<p>Uvicorn Settings Documentation - <a href="https://www.uvicorn.org/settings/">Complete reference for Uvicorn configuration options including reload and workers parameters</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>