== Why is this an issue?

Assigning a value inside a condition (of an `if` statement, a `for` statement, a `while` or a `switch`) can be confusing. It assigns the value and checks it at the same time, but it is easily confused with a simple equality check with `==` and the original intention can be unclear.


[source,cpp]
----
void action(int parm) {
  if (parm = getValue()) { // Noncompliant: assigning and checking. Is it on purpose?
    doSomething();
  }
  // ...
}
----


{cpp}17 introduced `if` and `switch` statements with initializers, which allows to clearly separate the assignment and the check while keeping a compact code:


[source,cpp]
----
void action(int parm) {
  if (parm = getValue(); parm) { // Compliant: Assignment and check are separate
    doSomething();
  }
  // ...
}
----

For older versions of the standard, it's better to assign before the statement:

[source,cpp]
----
void action(int parm) {
  parm = getValue();
  if (parm) { // Compliant
    doSomething();
  }
  // ...
}
----


=== Exceptions

This rule ignores assignments explicitly enclosed in parentheses.

[source,cpp]
----
while ((run = keepRunning())) {
  //...
}
----

== Resources

=== Documentation

* CWE - https://cwe.mitre.org/data/definitions/481[481: Assigning instead of Comparing]

* {cpp} Reference - https://en.cppreference.com/w/cpp/language/if#If_statements_with_initializer[If statements with initializer]

=== Standards

* CERT https://wiki.sei.cmu.edu/confluence/x/ZNYxBQ[EXP45-C.: Do not perform assignments in selection statements]
* CERT https://wiki.sei.cmu.edu/confluence/x/ITZGBQ[EXP51-J.: Do not perform assignments in conditional expressions]

=== External guidelines

* MISRA C:2004, 13.1 - Assignment operators shall not be used in expressions that yield a Boolean value
* MISRA {cpp}:2008, 6-2-1 - Assignment operators shall not be used in sub-expressions
* MISRA C:2012, 13.4 - The result of an assignment operator should not be used

ifdef::env-github,rspecator-view[]

'''
== Implementation Specification
(visible only on this page)

include::../message.adoc[]

include::../highlighting.adoc[]

'''
== Comments And Links
(visible only on this page)

include::../comments-and-links.adoc[]

endif::env-github,rspecator-view[]
