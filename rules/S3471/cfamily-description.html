<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In a base class, <code>virtual</code> indicates that a function can be overridden. In a derived class, it indicates an override. But given the specifier&#8217;s dual meaning, it would be clearer and more sound to use derived class-specific specifiers instead: <code>override</code> or <code>final</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class Counter {
protected:
  int c = 0;
public:
  virtual void count() {
    c++;
  }
};</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class FastCounter: public Counter {
public:
  virtual void count() {  // Noncompliant: ambiguous
    c += 2;
  }
};</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>override</code> indicates that a function is intended to override a base-class function. The compiler will issue a warning if this is not the case.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class FastCounter: public Counter {
public:
  void count() override {
    c += 2;
  }
};</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>final</code> indicates a function <code>override</code> that cannot itself be overridden. The compiler will issue a warning if the signature does not match the signature of a base-class <code>virtual</code> function. <code>override</code> is redundant when <code>final</code> is specified.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class FastCounter: public Counter {
public:
  void count() final {
    c += 2;
  }
};</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>C++ Core Guidelines - <a href="https://github.com/isocpp/CppCoreGuidelines/blob/e49158a/CppCoreGuidelines.md#c128-virtual-functions-should-specify-exactly-one-of-virtual-override-or-final">C.128: Virtual functions should specify exactly one of <code>virtual</code>, <code>override</code>, or <code>final</code></a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_related_rules">Related rules</h3>
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S1016" class="rspec-auto-link">S1016</a> - Virtual functions should be declared with the "virtual" keyword</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>Annotate this function with "override" or "final".</p>
</li>
<li>
<p>Use "override" or "final" instead of "virtual".</p>
</li>
<li>
<p>Drop the "[virtual|override]" specifier; it is redundant.</p>
</li>
<li>
<p>Drop the "virtual" and "override" specifiers; they are redundant.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>specifier to be dropped</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s1016">relates to: <a data-rspec-id="S1016" class="rspec-auto-link">S1016</a></h3>

</div>
<div class="sect2">
<h3 id="_is_related_to_s3576">is related to: <a data-rspec-id="S3576" class="rspec-auto-link">S3576</a></h3>

</div>
<div class="sect2">
<h3 id="_on_11_dec_2015_175348_ann_campbell_wrote">on 11 Dec 2015, 17:53:48 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~evgeny.mandrikov] given the fact that it&#8217;s only a compiler warning to have a <code>virtual</code> function in a derived class with a mismatched signature, do we want a rule on that?</p>
</div>
<div class="paragraph">
<p>E.G.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>class BaseClass
{
    virtual void doTheThing() const;
}

class DerivedClass : public BaseClass
{
    virtual void doTheThing();
}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_on_3_feb_2016_101640_freddy_mallet_wrote">on 3 Feb 2016, 10:16:40 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>Hi [~ann.campbell.2], that&#8217;s a pretty good idea to have a dedicated rule for that which would be activated by default. You can go ahead.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_3_feb_2016_195234_ann_campbell_wrote">on 3 Feb 2016, 19:52:34 Ann Campbell wrote:</h3>
<div class="paragraph">
<p><a data-rspec-id="S3528" class="rspec-auto-link">RSPEC-3528</a></p>
</div>
</div>
</div>
</div>