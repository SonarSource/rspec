<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An issue is raised when a router prefix is defined in the <code>include_router()</code> call instead of in the <code>APIRouter()</code> initialization.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In FastAPI applications, routers help organize endpoints into logical groups. Each router can have a URL prefix that gets prepended to all its routes.</p>
</div>
<div class="paragraph">
<p>When you define the prefix in the <code>include_router()</code> call, the router&#8217;s URL structure is separated from its definition. This means developers need to search through the application setup code to understand where the router&#8217;s endpoints will be accessible.</p>
</div>
<div class="paragraph">
<p>Modern FastAPI versions support defining the prefix directly in the <code>APIRouter()</code> constructor. This approach keeps the router&#8217;s configuration self-contained and makes the code easier to understand at a glance.</p>
</div>
<div class="paragraph">
<p>By defining the prefix at initialization time, you create a single source of truth for the router&#8217;s configuration. Anyone reading the router file immediately knows its URL structure without having to trace through the application setup.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>This pattern reduces code maintainability and readability. In larger applications with multiple routers, it becomes increasingly difficult to understand the application&#8217;s URL structure without examining the main application file.</p>
</div>
<div class="paragraph">
<p>When routers are defined in separate modules (a common practice), developers working on a specific router module cannot see its full URL path without switching to a different file. This cognitive overhead slows down development and increases the likelihood of mistakes when adding or modifying routes.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Move the <code>prefix</code> parameter from the <code>include_router()</code> call to the <code>APIRouter()</code> initialization. This makes the router&#8217;s URL structure immediately visible in its definition.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">from fastapi import APIRouter, FastAPI

router = APIRouter()  # Noncompliant

@router.get("/users")
def list_users():
    return ["user1", "user2"]

app = FastAPI()
app.include_router(router, prefix="/api/v1")</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">from fastapi import APIRouter, FastAPI

router = APIRouter(prefix="/api/v1")

@router.get("/users")
def list_users():
    return ["user1", "user2"]

app = FastAPI()
app.include_router(router)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>FastAPI - APIRouter - <a href="https://fastapi.tiangolo.com/tutorial/bigger-applications/">Official FastAPI documentation on using APIRouter for larger applications</a></p>
</li>
<li>
<p>FastAPI - APIRouter Reference - <a href="https://fastapi.tiangolo.com/reference/apirouter/">API reference for the APIRouter class and its parameters</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>