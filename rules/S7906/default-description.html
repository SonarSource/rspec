<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when configuration hashes use <code>nil</code> as default values, omit required keys, or are incomplete in ways that could cause runtime errors.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Configuration hashes are a common pattern in Ruby applications, especially in frameworks and libraries. When these configurations are incomplete or use problematic default values, they can lead to several issues:</p>
</div>
<div class="paragraph">
<p><strong>Nil Default Values Create Runtime Errors</strong></p>
</div>
<div class="paragraph">
<p>Using <code>nil</code> as a default value in configuration hashes often leads to <code>NoMethodError</code> or <code>TypeError</code> exceptions at runtime. When the application tries to use these nil values, it may call methods on nil or pass nil to functions expecting specific types.</p>
</div>
<div class="paragraph">
<p><strong>Missing Required Keys Cause Unexpected Behavior</strong></p>
</div>
<div class="paragraph">
<p>When configuration hashes omit required keys, the application may fall back to implicit defaults that aren&#8217;t obvious to developers reading the code. This makes the configuration less self-documenting and can lead to surprising behavior when defaults change between versions.</p>
</div>
<div class="paragraph">
<p><strong>Incomplete Configurations Lead to Feature Failures</strong></p>
</div>
<div class="paragraph">
<p>Some configurations require multiple related keys to function properly. For example, an ordering configuration might need both visibility settings and action definitions. When these are incomplete, features may partially work or fail silently.</p>
</div>
<div class="paragraph">
<p><strong>Poor Developer Experience</strong></p>
</div>
<div class="paragraph">
<p>Incomplete or unclear configurations make it harder for developers to understand what options are available and how to properly configure features. This leads to more time spent debugging and consulting documentation.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Runtime errors from nil method calls, unexpected application behavior due to implicit defaults, feature malfunctions from incomplete configurations, and increased debugging time for developers working with the codebase.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace nil default values with meaningful defaults or explicit handling. Provide a sensible default value that won&#8217;t cause runtime errors.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">self.profile_photo = {
  source: nil # Noncompliant
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">self.profile_photo = {
  source: :default_avatar
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Ruby Hash Documentation - <a href="https://ruby-doc.org/core/Hash.html">Official Ruby documentation for Hash class and methods</a></p>
</li>
<li>
<p>Ruby Style Guide - Hashes - <a href="https://rubystyle.guide/#hash-literals">Community Ruby style guide recommendations for hash usage</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>