<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A general <code>catch</code> block seems like an efficient way to handle multiple possible exceptions. Unfortunately, it traps all exception types, casting too broad a net, and perhaps mishandling extraordinary cases. Instead, specific exception sub-types should be caught.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">string text = "";
try
{
  text = File.ReadAllText(fileName);
} catch {  // Noncompliant
  // ...
}

try
{
  text = File.ReadAllText(fileName);
} catch (Exception exc) {  // Noncompliant
  // ...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">string text = "";
try
{
  text = File.ReadAllText(fileName);
} catch (UnauthorizedAccessException exc) {
  // you do not have the required permission
}</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>\["catch"|"except"] a specific exception type.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_related_to_s5754">is related to: <a data-rspec-id="S5754" class="rspec-auto-link">S5754</a></h3>

</div>
<div class="sect2">
<h3 id="_relates_to_s2221">relates to: <a data-rspec-id="S2221" class="rspec-auto-link">S2221</a></h3>

</div>
<div class="sect2">
<h3 id="_on_20_mar_2015_121752_tamas_vajk_wrote">on 20 Mar 2015, 12:17:52 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>I&#8217;m not sure about this rule. It will generate a lot of issues. Why is it better to handle two exception types than just the generic <code>Exception</code>?</p>
</div>
<div class="paragraph">
<p>For example in the example we handle three exception types, but that doesn&#8217;t cover all the possibilities: https://msdn.microsoft.com/en-us/library/ms143369(v=vs.110).aspx</p>
</div>
<div class="paragraph">
<p>So we would only force the user to add one more exception type, and that would suppress the warning. But this won&#8217;t mean that he doesn&#8217;t have a catch clause that is too generic.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_20_mar_2015_161748_ann_campbell_wrote">on 20 Mar 2015, 16:17:48 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~tamas.vajk] we have a different rule for catching <code>Exception</code> but perhaps this rule and that one are indeed redundant(&#8230;&#8203;?)</p>
</div>
<div class="paragraph">
<p>Generally, the thinking is that if you catch too high up the chain (e.g. Exception) then you are likely to mis-handle the more serious exceptions if all you&#8217;re really expecting (and write code to handle) is something relatively minor &amp; you should let the big things bubble up.</p>
</div>
<div class="paragraph">
<p>Specifically for your example, I&#8217;d say that catching ArgumentNullException is bad design: should have handled a null arg before the File call was made. Which just leaves UnauthorizedAccessException (which seems reasonable) and Exception (elephant gun).</p>
</div>
<div class="paragraph">
<p>Or perhaps this is a language-based difference in perspective? (.NET vs Java?)</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_23_mar_2015_072605_tamas_vajk_wrote">on 23 Mar 2015, 07:26:05 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2], you are right, the null arguments should be checked before with an <code>if</code>, which is way more performant than the <code>try-catch</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_23_mar_2015_113850_ann_campbell_wrote">on 23 Mar 2015, 11:38:50 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~tamas.vajk] I&#8217;ve updated the compliant solution. My assumption is that we only want to catch what&#8217;s reasonable to expect in the method &amp; let everything else bubble up. S&#8217;okay?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_23_mar_2015_121756_tamas_vajk_wrote">on 23 Mar 2015, 12:17:56 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] makes sense. But if we want our application to fail gracefully, we will still need to provide a generic <code>Exception</code> handler on top level, and that will always trigger this rule. In the meantime, I could find one valid use-case for generic <code>Exception</code> handlers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>try {
 DoSomething();
}
catch (Exception exc) {
  logger.Log(exc);
  throw exc;
}</pre>
</div>
</div>
<div class="paragraph">
<p>So this should be an exception from this rule.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_23_mar_2015_143705_ann_campbell_wrote">on 23 Mar 2015, 14:37:05 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>I&#8217;m not so sure about that [~tamas.vajk]. Here&#8217;s why: <a data-rspec-id="S2139" class="rspec-auto-link">RSPEC-2139</a> - Exceptions should be either logged or rethrown but not both. Do you have another permutation of this exception?</p>
</div>
<div class="paragraph">
<p>And/or do you feel strongly about this? In which case, I&#8217;ll add the exception.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_23_mar_2015_151955_tamas_vajk_wrote">on 23 Mar 2015, 15:19:55 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2], I see, this makes sense. I&#8217;ll try to think about this a bit more, but for now it seems I can&#8217;t challenge this rule any further :-) It seems to be okay.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_20_apr_2015_082100_ann_campbell_wrote">on 20 Apr 2015, 08:21:00 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~evgeny.mandrikov] why move the code samples into a subtask?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_20_apr_2015_083250_evgeny_mandrikov_wrote">on 20 Apr 2015, 08:32:50 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] because existing one was C#-specific.</p>
</div>
</div>
</div>
</div>