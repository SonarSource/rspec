<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Redundant access specifiers should be removed because they needlessly clutter the code.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">struct S {
public: // Noncompliant; does not affect any declaration
private:
  void f1();
private: // Noncompliant; does not change accessibility level
  void f2();
private: // Noncompliant; does not affect any declaration
};
class C {
  void f1();
private: // Noncompliant;  does not change accessibility level
  void f2();
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">struct S {
private:
  void f1();
  void f2();
};
class C {
  void f1();
  void f2();
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>An access specifier at the very beginning of a <code>class</code> or <code>struct</code> that matches the default access level is ignored even when it doesn&#8217;t change any accessibility levels.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class C {
  private: // redundant but accepted
    // ...
};
struct S {
  public: // redundant but accepted
    // ...
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Such a specifier is redundant but ignored to allow <code>class</code>es and <code>struct</code>s to be described uniformly.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class C {
  public:
    void call();

  protected:
    int delete();

  private:
    int code;
};
struct S {
  public: // redundant but accepted
    int sum();

  protected:
    int min();

  private:
    int count;
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, many people use an access specifier not to change the access level but as a visual separator between member functions and member variables of a class. This rule does not raise an issue on this pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class C {
public:
  void f1();

private:
  void f2();
  void f3();

private: // redundant but accepted: separates functions from variables
  int m1;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, Qt meta-object system makes use of some custom (macro-based) access specifiers. Even when they have no impact on the access level of the following members according to the C&#43;&#43; definition, they are accepted as long as they differ in spelling:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class Counter : public QObject {
  Q_OBJECT
public:
  Counter() { m_value = 0; }
  int value() const { return m_value; }

public slots: // equivalent to "public" but accepted
  void setValue(int value);

signals: // equivalent to "public" but accepted
  void keyChanged(int newValue);

signals: // Noncompliant; does not change accessibility level
  void valueChanged(int newValue);

private:
  int m_key;
  int m_value;
};</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>Remove this redundant access specifier; it does not change the accessibility level.</p>
</li>
<li>
<p>Remove this access specifier; it does not affect any declaration.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>access specifier</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_29_feb_2016_114502_alban_auzeill_wrote">on 29 Feb 2016, 11:45:02 Alban Auzeill wrote:</h3>
<div class="paragraph">
<p>I doubt that there&#8217;s a consensus on this rules. This is an example of discussion:</p>
</div>
<div class="paragraph">
<p><a href="http://stackoverflow.com/questions/4962942/is-it-confusing-to-omit-the-private-keyword-from-a-class-definition" class="bare">http://stackoverflow.com/questions/4962942/is-it-confusing-to-omit-the-private-keyword-from-a-class-definition</a></p>
</div>
<div class="paragraph">
<p>And bellow the use cases that could lead into exception on this rule:</p>
</div>
<div class="paragraph">
<p><strong>Use case 1:</strong></p>
</div>
<div class="paragraph">
<p>Some developers like to always write the first access specifier, even if it is redundant with the default access. So the code is easier to read for multi-language developers that don&#8217;t master C&#43;&#43;.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/SonarSource/it-sources/blob/master/cpp/ruling/cpp/clang-3.4/include/clang/ASTMatchers/Dynamic/Diagnostics.h#L102" class="bare">https://github.com/SonarSource/it-sources/blob/master/cpp/ruling/cpp/clang-3.4/include/clang/ASTMatchers/Dynamic/Diagnostics.h#L102</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre>class A {
  private:
    void reset();
  // ...
};
struct B {
  public:
    void run();
  // ...
};</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Use case 2:</strong></p>
</div>
<div class="paragraph">
<p>Developers that separate methods and attributes with always the same pattern: a redundant access specifier + a comment.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>class A {
  public: // methods
    void run();
  private: // methods
    void reset();
    // ... 50 more lines of declarations ....
  private: // attributes
    int speed;
};</pre>
</div>
</div>
<div class="paragraph">
<p><strong>My current view</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>"Use case 1", I don&#8217;t have a strong opinion, I prefer to not add an exception and see the findings on real code to decide if there is too much noise.</p>
</li>
<li>
<p>"Use case 2", I disagree and would not accept an exception about this use case.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_on_1_mar_2016_140114_alban_auzeill_wrote">on 1 Mar 2016, 14:01:14 Alban Auzeill wrote:</h3>
<div class="paragraph">
<p>The bellow "Use Case 1" generate too many issues, so Massimo and I decided to accept a redundant access specifier before the first member of a class declaration. I&#8217;m adding an Exception to the RSPEC.</p>
</div>
<div class="paragraph">
<p>Now I&#8217;m confident with the findings of this rule, so I changed "Default Quality Profiles" from "None" to "Sonar Way".</p>
</div>
<div class="paragraph">
<p>But concerning "Default Severity" I have no idea.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_1_mar_2016_145925_ann_campbell_wrote">on 1 Mar 2016, 14:59:25 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~alban.auzeill] I almost updated the Noncompliant example; <code>struct S</code> starts with a "Noncompliant" declaration that will be ignored according to this new exception&#8230;&#8203;? On the other hand, it&#8217;s <code>public</code>, and <code>private</code> is the default&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_2_mar_2016_063519_alban_auzeill_wrote">on 2 Mar 2016, 06:35:19 Alban Auzeill wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I have updated the exception paragraph to separate what is accepted ( <code>class</code> starting by <code>private:</code> and <code>struct</code> starting by <code>public:</code> ) from an example with the <code>public/protected/private</code> template.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_2_mar_2016_085619_alban_auzeill_wrote">on 2 Mar 2016, 08:56:19 Alban Auzeill wrote:</h3>
<div class="paragraph">
<p>I&#8217;ve replaced "to be described with uniform templates." by "to be described uniformly " to avoid confusion with C&#43;&#43; templates</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_2_mar_2016_173757_ann_campbell_wrote">on 2 Mar 2016, 17:37:57 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~alban.auzeill] I&#8217;ve updated the exception description slightly</p>
</div>
</div>
</div>
</div>