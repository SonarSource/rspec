include::../description.adoc[]

include::../ask-yourself.adoc[]

include::../recommended.adoc[]

== Sensitive Code Example

[source,docker]
----
FROM example
ARG ACCESS_TOKEN
# Sensitive
ENV ACCESS_TOKEN=${ACCESS_TOKEN}
CMD /run.sh
----

== Compliant Solution

For build time secrets:
[source,docker]
----
FROM example
RUN --mount=type=secret,id=build_secret ./installer.sh
----

[source,docker]
----
FROM example AS builder
ARG ACCESS_TOKEN
ENV ACCESS_TOKEN=${ACCESS_TOKEN}
RUN /installer.sh

FROM example
COPY --from=builder /dist /
----

For runtime secrets:

[source,docker]
----
FROM example
ENV ACCESS_TOKEN=""
CMD /run.sh
----

The container is then started with:
[source,text]
----
docker run --env-file .env myImage
----

include::../see.adoc[]

include::../implementation.adoc[]