<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An <code>IndexError</code> is a bug class that occurs in Python when a program tries to
access a list, a tuple or other types of sequences at an index that does not
exist.
This bug can cause your program to crash or behave unexpectedly.
To fix an <code>IndexError</code>, you should always ensure you are accessing sequences
within their bounds.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An <code>IndexError</code> indicates a bug or a logical error in the code.</p>
</div>
<div class="paragraph">
<p>In Python, lists and tuples have a certain length and their elements are indexed
starting from <code>0</code>, counting up to the last index that is still smaller than the
length.
When trying to access a list or tuple with an index outside of this range,
an <code>IndexError</code> will be raised and the operation will fail.</p>
</div>
<div class="paragraph">
<p>Negative indices are supported. When using a negative index, it will be
interpreted by computing the sum of the negative index and the list size.
The result is then used as the actual index for accessing the sequence.
Thus, this sum must be non-negative and fit into the aforementioned range.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Issues of this type interrupt the normal execution of a program, causing it to
crash or putting it into an inconsistent state.
Therefore, this issue might impact the availability and reliability of your
application, or even result in data loss.</p>
</div>
<div class="paragraph">
<p>If the computation of an index value is tied to user input data, this issue can
potentially even be exploited by attackers to disrupt your application.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="paragraph">
<p>The following examples contain out-of-bounds accesses to sequences, resulting in
an <code>IndexError</code>.
These situations can be avoided by carefully considering the range of valid
index values, or even better, by comparing indices against the length of a
sequence.</p>
</div>
<div class="paragraph">
<p>In this first example, the list <code>ls</code> contains three elements.
Since the first element of a list has index <code>0</code>, the last valid index is <code>2</code>.
Therefore, an <code>IndexError</code> is raised when accessing <code>ls</code> at index <code>3</code>.</p>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def fun():
    ls = [1, 2, 3]
    foo(ls[3])  # Noncompliant: the last index of the list ls is 2. Using the index 3 will raise an IndexError.</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def fun():
    ls = [1, 2, 3]
    foo(ls[2])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Accessing a list with its length as the index is never correct:</p>
</div>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def fun():
    ls = [1, 2, 3]
    print(ls[len(ls)])  # Noncompliant: Indexing starts at 0, hence the list length will always be an invalid index.</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def fun():
    ls = [1, 2, 3]
    # We can make sure ls is non-empty before trying to access its last element.
    # Also, the index `len(ls) - 1` or just `-1` will correctly select the last
    # element within bounds.
    print("Empty list!" if not ls else ls[-1])</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_does_this_work">How does this work?</h3>
<div class="paragraph">
<p>You should always ensure that you are accessing sequences using indices that are
within the bounds of the sequence.
Here are some best practices to follow:</p>
</div>
<div class="paragraph">
<p>Always compare indices against the length of a sequence using <code>if-else</code>
statements or other control flow constructs before accessing elements.
The length can be retrieved using the built-in <code>len(&#8230;&#8203;)</code> function.
For example, <code>len(ls)</code> returns the length of the list <code>ls</code>.</p>
</div>
<div class="paragraph">
<p>Use loops to iterate over sequences instead of accessing elements directly.
For example, <code>for elem in ls:</code> iterates over the list <code>ls</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_pitfalls">Pitfalls</h3>
<div class="paragraph">
<p>The indices <code>0</code>, <code>len(&#8230;&#8203;) - 1</code>, or <code>-1</code> for the first and last element of a
sequence are not always valid!
Make sure the sequence in question is non-empty before accessing these
indices.</p>
</div>
</div>
<div class="sect2">
<h3 id="_going_the_extra_mile">Going the extra mile</h3>
<div class="paragraph">
<p>Built-in functions like <code>map()</code>, <code>filter()</code>, and <code>reduce()</code> present additional
ways to operate on sequences without using indices.</p>
</div>
<div class="paragraph">
<p>If you absolutely need to know the index of an element while iterating over a
sequence, you can use <code>enumerate()</code>. It provides you the indices and the
elements of a sequence during iteration, eliminating the need to manually
retrieve elements from the sequence using indices.</p>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example_3">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">for i in range(len(ls)):
    elem = ls[i] # We can eliminate this access by index using enumerate.

    foo(i, elem)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_3">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">for i, elem in enumerate(ls):
  foo(i, elem)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.python.org/3/reference/expressions.html#subscriptions">Subscriptions</a></p>
</li>
<li>
<p><a href="https://docs.python.org/3/library/exceptions.html#IndexError">IndexError</a></p>
</li>
<li>
<p><a href="https://docs.python.org/3/library/functions.html#built-in-functions">Built-ins, including <code>map</code>, <code>filter</code>, <code>enumerate</code>, etc.</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Fix this access on a list element that may trigger an "IndexError".
Fix this access on a tuple element that may trigger an "IndexError".</p>
</div>
<hr>
</div>
</div>
</div>