<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An array index out-of-bounds exception is a bug class that occurs in Java when a
program tries to access an array element that does not exist.
This bug can cause your program to crash or behave unexpectedly.
To fix an array index out of bounds exception in Java, you should always ensure
that you are accessing array elements within the bounds of the array.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An array index out-of-bounds exception indicates a bug or a logical error in the
code.</p>
</div>
<div class="paragraph">
<p>In Java, arrays have a fixed size, and their elements are indexed starting from
<code>0</code>, counting up to the last index that is still smaller than the size.
When trying to access an array outside of this range, an
<code>ArrayIndexOutOfBoundsException</code> will be thrown and the operation will fail.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Issues of this type interrupt the normal execution of a program, causing it to
crash or putting it into an inconsistent state.
Therefore, this issue might impact the availability and reliability of your
application, or even result in data loss.</p>
</div>
<div class="paragraph">
<p>If the computation of an index value is tied to user input data, this issue can
potentially even be exploited by attackers to disrupt your application.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="paragraph">
<p>The following examples contain out-of-bounds accesses to arrays, resulting
in <code>ArrayIndexOutOfBounds</code> exceptions.
These situations can be avoided by carefully considering the range of valid
index values, or even better, by comparing indices against the size of a
sequence.</p>
</div>
<div class="paragraph">
<p>In this first example, the array <code>arr</code> contains three elements.
Since the first element of a list has index <code>0</code>, the last valid index is <code>2</code>.
Therefore, an <code>ArrayIndexOutOfBoundsException</code> is thrown when accessing <code>arr</code> at
index <code>3</code>.</p>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  void fun() {
    int[] arr = {1, 2, 3};

    int x = arr[3]; // Noncompliant: Valid indices are 0, 1 and 2
  }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  void fun() {
    int[] arr = {1, 2, 3};

    int x = arr[0];
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Accessing an array with its size as the index is never correct:</p>
</div>
</div>
<div class="sect3">
<h4 id="_noncompliant_code_example_2">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  void fun(int[] arr) {
    System.out.println(arr[arr.length]); // Noncompliant: Indexing starts at 0, hence array.length will always be an invalid index.
  }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution_2">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  void compliant(int[] arr) {
    // We can make sure arr is non-empty before trying to access its last element.
    if (arr.length &gt; 0) {
      System.out.println(arr[arr.length - 1]);
    } else {
      System.out.println("Empty array!");
    }
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_does_this_work">How does this work?</h3>
<div class="paragraph">
<p>You should always ensure that you are accessing arrays using indices that are
within the bounds of the array.
Here are some best practices to follow:</p>
</div>
<div class="paragraph">
<p>Always compare indices against the length of an array using <code>if-else</code> statements
or other control flow constructs before accessing elements.
For this, you can use the <code>length</code> property of arrays.
For example, <code>arr.length</code> returns the length of the <code>arr</code> array.
Also, ensure that you are not accessing an array using negative indices.</p>
</div>
<div class="paragraph">
<p>Use loops to iterate over arrays instead of accessing elements directly.
This can be done using the <code>for</code> loop or the <code>foreach</code> loop.
For example, <code>for (int i = 0; i &lt; arr.length; ++i)</code> iterates over the <code>arr</code>
array within its bounds using an index variable <code>i</code>.
The same goes for <code>for (Object o : arr)</code>.
If you manipulate the index used to access an array inside the loop, make sure
that the resulting index stays within bounds.</p>
</div>
</div>
<div class="sect2">
<h3 id="_pitfalls">Pitfalls</h3>
<div class="paragraph">
<p>The indices <code>0</code>, or <code>arr.length - 1</code> for the first and last element of an array
are not always valid!
Make sure the array in question is not empty before accessing these indices.</p>
</div>
</div>
<div class="sect2">
<h3 id="_going_the_extra_mile">Going the extra mile</h3>
<div class="paragraph">
<p>In many cases you can eliminate loops containing index-based accesses altogether
by applying the Java stream API to arrays using <code>java.util.Arrays.stream()</code>.
The API provides methods like <code>map()</code> or <code>filter()</code> that allow you to transform,
filter and perform many different operations on the elements of an array without
using indices.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ArrayIndexOutOfBoundsException.html">ArrayIndexOutOfBoundsException</a></p>
</li>
<li>
<p><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Arrays.html#stream(T%5B%5D)">Javadoc for <code>Arrays.stream()</code></a></p>
</li>
<li>
<p><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html">Stream API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_articles_blog_posts">Articles &amp; blog posts</h3>
<div class="ulist">
<ul>
<li>
<p>A Reference Guide - <a href="https://www.baeldung.com/java-arrays-guide">Arrays in Java</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.oracle.com/javase/specs/jls/se17/html/jls-10.html#jls-10.4">Array Access Specification</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Fix this access on an array element that may trigger an 'ArrayIndexOutOfBoundsException'.</p>
</div>
<hr>
</div>
</div>
</div>