<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The JDK provides a set of built-in methods to copy the contents of an array into another array.
Using a loop to perform the same operation is less clear, more verbose and should be avoided.</p>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>The rule detects only the most idiomatic patterns, it will not consider loops with non-trivial control flow.
For example, loops that copy array elements conditionally are ignored.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Arrays.copyOf</code> to copy an entire array into another array</p>
</li>
<li>
<p><code>System.arraycopy</code> to copy only a subset of an array into another array</p>
</li>
<li>
<p><code>Arrays.asList</code> to create a new list with the contents of the array</p>
</li>
<li>
<p><code>Collections.addAll</code> to add the elements of a collection into another collection</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that <code>Arrays.asList</code> returns a fixed-size <code>List</code>, so further steps are required if a non-fixed-size <code>List</code> is needed.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void copyArray(String[] source){
  String[] array = new String[source.length];
  for (int i = 0; i &lt; source.length; i++) {
    array[i] = source[i]; // Noncompliant
  }
}

public void copyList(List&lt;String&gt; source) {
  List&lt;String&gt; list = new ArrayList&lt;&gt;();
  for (String s : source) {
    list.add(s); // Noncompliant
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void copyArray(String[] source){
  String[] array = Arrays.copyOf(source, source.length);
}

public void copyList(List&lt;String&gt; source) {
  List&lt;String&gt; list = new ArrayList&lt;&gt;();
  Collections.addAll(list, source);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void makeCopiesConditional(int[] source) {
  int[] dest = new int[source.length];
  for (int i = 0; i &lt; source.length; i++) {
    if (source[i] &gt; 10) {
      dest[i] = source[i];  // Compliant, since the array elements are conditionally copied to the dest array
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#copyOf-T:A-int-:~:text=1.6-,copyOf,-public%20static%C2%A0byte">docs.oracle</a> - Arrays.copyOf documentation</p>
</li>
<li>
<p><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList-T&#8230;&#8203;-:~:text=1.6-,asList,-%40SafeVarargs%0Apublic%20static">docs.oracle</a> - Arrays.asList documentation</p>
</li>
<li>
<p><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#arraycopy-java.lang.Object-int-java.lang.Object-int-int-:~:text=1.5-,arraycopy,-public%20static%C2%A0void">docs.oracle</a> - System.arraycopy documentation</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Use "Arrays.copyOf", "Arrays.asList", "Collections.addAll" or "System.arraycopy" instead.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_23_jul_2015_071419_nicolas_peru_wrote">on 23 Jul 2015, 07:14:19 Nicolas Peru wrote:</h3>
<div class="paragraph">
<p>I slightly changed the title to make it clearer. Please double check.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_23_jul_2015_090629_ann_campbell_wrote">on 23 Jul 2015, 09:06:29 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Thanks [~nicolas.peru].</p>
</div>
</div>
</div>
</div>