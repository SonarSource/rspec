<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>kotlin.collections</code> package offers many functions to interact with collections.
In particular, functions <code>find(predicate)</code>, <code>findLast(predicate)</code>, <code>firstOrNull(predicate)</code> and "`lastOrNull(predicate)` return the element that matches the given predicate.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The functions <code>find(predicate)</code>, <code>findLast(predicate)</code>, <code>firstOrNull(predicate)</code> and "`lastOrNull(predicate)`
can be improperly used to check the presence of an element that matches the given predicate.
In such cases the code is more difficult to read and understand than it would be with the functions <code>any(predicate)</code>, <code>none(predicate)</code> or <code>contains(element)</code>.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>The pattern of using <code>find(predicate)</code>, <code>findLast(predicate)</code>, <code>firstOrNull(predicate)</code> and "`lastOrNull(predicate)`  combined with a null check,
to check the presence of an element is not immediately clear to readers.
For example, the expression <code>list.find { it &gt; 5 } != null</code> is more difficult to understand than <code>list.any { it &gt; 5 }</code>.
The additional comparison operator increases the complexity of the expression and introduces confusion about the intent of the code.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace the use of <code>find(predicate)</code>, <code>findLast(predicate)</code>, <code>firstOrNull(predicate)</code> and "`lastOrNull(predicate)` with <code>any(predicate)</code>, <code>none(predicate)</code> or <code>contains(element)</code>.</p>
</div>
<div class="paragraph">
<p>There are four possible scenarios:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The predicate is a simple binary expression checking for equality, and the found object is compared to not be <code>null</code>:</p>
<div class="ulist">
<ul>
<li>
<p>Replace <code>find { it == element } != null</code> with <code>contains(element)</code>.</p>
</li>
<li>
<p>Replace <code>findLast { it == element } != null</code> with <code>contains(element)</code>.</p>
</li>
<li>
<p>Replace <code>firstOrNull { x &#8594; x == element } != null</code> with <code>contains(element)</code>.</p>
</li>
<li>
<p>Replace <code>lastOrNull { x &#8594; x == element } != null</code> with <code>contains(element)</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The predicate is a simple binary expression checking for equality, and the found object is compared to be <code>null</code>:</p>
<div class="ulist">
<ul>
<li>
<p>Replace <code>find { it == element } == null</code> with <code>!contains(element)</code>.</p>
</li>
<li>
<p>Replace <code>findLast { it == element } == null</code> with <code>!contains(element)</code>.</p>
</li>
<li>
<p>Replace <code>firstOrNull  { x &#8594; x == element } == null</code> with <code>!contains(element)</code>.</p>
</li>
<li>
<p>Replace <code>lastOrNull  { x &#8594; x == element } == null</code> with <code>!contains(element)</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The predicate is any binary expression not checking for equality, and the found object is compared to not be <code>null</code>:</p>
<div class="ulist">
<ul>
<li>
<p>Replace <code>find { it &gt; 5 } != null</code> with <code>any { it &gt; 5 }</code>.</p>
</li>
<li>
<p>Replace <code>findLast { it != 5 } != null</code> with <code>any { it != 5 }</code>.</p>
</li>
<li>
<p>Replace <code>firstOrNull { x &#8594; x &lt; 5 } != null</code> with <code>any { x &#8594; x &lt; 5 }</code>.</p>
</li>
<li>
<p>Replace <code>lastOrNull { x &#8594; x != 5 } != null</code> with <code>any { x &#8594; x != 5 }</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The predicate is any binary expression not checking for equality, and the found object is compared to be <code>null</code>:</p>
<div class="ulist">
<ul>
<li>
<p>Replace <code>find { it &gt; 5 } == null</code> with <code>none { it &gt; 5 }</code>.</p>
</li>
<li>
<p>Replace <code>findLast { it != 5 } == null</code> with <code>none { it != 5 }</code>.</p>
</li>
<li>
<p>Replace <code>firstOrNull { x &#8594; x &lt; 5 } == null</code> with <code>none { x &#8594; x &lt; 5 }</code>.</p>
</li>
<li>
<p>Replace <code>lastOrNull { x &#8594; x != 5 } == null</code> with <code>none { x &#8594; x != 5 }</code>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun example(list: List&lt;Int&gt;) {
    list.find { it &gt; 5 } != null // Noncompliant
    list.findLast { it &gt; 5 } == null // Noncompliant
    list.firstOrNull { it == 5 } != null // Noncompliant
    list.lastOrNull { x -&gt; x == 5 } != null // Noncompliant
    list.find { x -&gt; 5 == 4 } != null // Noncompliant, note that this case cannot be fixed using contains
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">fun example(list: List&lt;Int&gt;) {
    list.any { it &gt; 5 } // Compliant
    list.none { it &gt; 5 } // Compliant
    list.contains(5) // Compliant
    !list.contains(5) // Compliant
    list.any { x -&gt; 5 == 4 } // Compliant, note that this case cannot be fixed using contains
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/">Kotlin API Docs, Package kotlin.collections</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>