<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when the same key is used multiple times when instantiating a dictionary literal.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By definition, a dictionary cannot hold the same key multiple times.
When instantiating a dictionary literal, if a key is repeated, only the last occurrence of the key will be retained.</p>
</div>
<div class="paragraph">
<p>This can lead to errors and confusion, as it is not clear which value belongs to which key. This can be remedied by either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>replacing the duplicated key with the correct key to prevent bugs and errors from occurring later in the program.</p>
</li>
<li>
<p>removing the duplicated key to make the code more concise and easier to maintain.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">{"one": 1, "two": 2, "one": 3}  # Noncompliant: the key "one" is duplicated.

def func(a1, a2):
    {a1: 1, a2: 2, a1: 3}  # Noncompliant: the key a1 is duplicated.</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">{"one": 1, "two": 2, "three": 3}

def func(a1, a2):
    {a1: 1, a2: 2}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Python Documentation - <a href="https://docs.python.org/3/reference/expressions.html#dictionary-displays">Dictionary displays</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Change or remove duplicates of this key.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>Primary: the first occurence of a duplicated key.</p>
</div>
<div class="paragraph">
<p>Secondary:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>location: other occurences of the key.</p>
</li>
<li>
<p>message: "Duplicate key"</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s4143">relates to: <a data-rspec-id="S4143" class="rspec-auto-link">S4143</a></h3>

</div>
<div class="sect2">
<h3 id="_on_16_apr_2020_221623_nicolas_harraudeau_wrote">on 16 Apr 2020, 22:16:23 Nicolas Harraudeau wrote:</h3>
<div class="paragraph">
<p>Similar to <a data-rspec-id="S4143" class="rspec-auto-link">RSPEC-4143</a>. The difference is that <a data-rspec-id="S4143" class="rspec-auto-link">RSPEC-4143</a> focuses on key replacement in already existing maps, whereas <a data-rspec-id="S5780" class="rspec-auto-link">RSPEC-5780</a> focuses duplicate keys in Map creation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_22_jun_2020_163029_alexandre_gigleux_wrote">on 22 Jun 2020, 16:30:29 Alexandre Gigleux wrote:</h3>
<div class="paragraph">
<p>I changed from Bug to Code Smell because from what I can see on Peach, majority of the issues are related to duplication of the key AND the value. It means there is no impact/bug, it&#8217;s a left over copy/paste. The only case where the behavior can not be the expected one is when the duplicated key is initialized with 2 different values.</p>
</div>
</div>
</div>
</div>