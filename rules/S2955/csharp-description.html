<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In C#, without constraints on a generic type parameter, both <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/reference-types">reference</a> and <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/value-types">value</a> types can be passed. However, comparing this type parameter to <code>null</code> can be misleading as value types, like <code>struct</code>, can never be null.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To avoid unexpected comparisons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if you expect a value type, use <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/default#default-operator">default()</a> for comparison</p>
</li>
<li>
<p>if you expect a reference type, add a <a href="https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/generics/constraints-on-type-parameters">constraint</a> to prevent value types from being passed</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">bool IsDefault&lt;T&gt;(T value)
{
  if (value == null) // Noncompliant
  {
    // ...
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">bool IsDefault&lt;T&gt;(T value)
{
  if (EqualityComparer&lt;T&gt;.Default.Equals(value, default(T)))
  {
    // ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-csharp" data-lang="csharp">bool IsDefault&lt;T&gt;(T value) where T : class
{
  if (value == null)
  {
    // ...
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/generics/constraints-on-type-parameters">Constraints on type parameters</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/reference-types">Reference types</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/value-types">Value types</a></p>
</li>
<li>
<p>Microsoft Learn - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/default#default-operator"><code>default</code> operator</a></p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Use a comparison to "default(xxx)" instead or add a constraint to "xxx" so that it can&#8217;t be a value type.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_22_may_2015_100425_tamas_vajk_wrote">on 22 May 2015, 10:04:25 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>Fixed some minor wording issues, and the sample</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_22_may_2015_120732_ann_campbell_wrote">on 22 May 2015, 12:07:32 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Thanks [~tamas.vajk]. Looks good.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_29_may_2015_125040_tamas_vajk_wrote">on 29 May 2015, 12:50:40 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] Could you run through the description? I&#8217;ve change the wording "false negative" because it sounded strange.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_29_may_2015_145044_ann_campbell_wrote">on 29 May 2015, 14:50:44 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>looks good [~tamas.vajk]</p>
</div>
</div>
</div>
</div>