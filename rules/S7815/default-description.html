<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when <code>raise</code> is called with a string literal instead of a specific exception class.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Raising generic string messages as exceptions creates several problems that make code harder to maintain and test.</p>
</div>
<div class="paragraph">
<p>When you use <code>raise "message"</code>, Ruby automatically wraps the string in a <code>RuntimeError</code>. This means all your different error conditions become indistinguishable <code>RuntimeError</code> exceptions. Your calling code cannot handle different types of errors appropriately.</p>
</div>
<div class="paragraph">
<p>For example, you might want to retry on network errors but immediately fail on validation errors. With generic string exceptions, this becomes impossible because both errors look the same to exception handlers.</p>
</div>
<div class="paragraph">
<p>Testing also becomes problematic. Your tests must catch the generic <code>RuntimeError</code> class, which means they cannot verify that the right type of error occurred. This makes tests less precise and more likely to pass when they should fail.</p>
</div>
<div class="paragraph">
<p>Using specific exception classes solves these problems. Each error condition gets its own class, making error handling more precise. Tests can verify the exact type of exception, improving test reliability. Code becomes more self-documenting because exception names clearly indicate what went wrong.</p>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Using generic string exceptions reduces code maintainability and makes error handling imprecise. Tests become less reliable because they cannot distinguish between different error conditions. This can lead to bugs being missed in testing and inappropriate error handling in production code.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Define specific exception classes that inherit from StandardError, then raise instances of these classes instead of generic strings. This allows for precise error handling and more reliable testing.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">def merge(release_to_delete)
  raise "Can't merge a release with itself!" if self.id == release_to_delete.id # Noncompliant
  raise "Can only merge releases by the same artist" if self.artist != release_to_delete.artist # Noncompliant
end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">class SelfMergeError &lt; StandardError; end
class ArtistMismatchError &lt; StandardError; end

def merge(release_to_delete)
  raise SelfMergeError, "Can't merge a release with itself!" if self.id == release_to_delete.id
  raise ArtistMismatchError, "Can only merge releases by the same artist" if self.artist != release_to_delete.artist
end</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Ruby Exception Handling - <a href="https://ruby-doc.org/core/Exception.html">Official Ruby documentation on exception classes and handling</a></p>
</li>
<li>
<p>Ruby Style Guide - Exceptions - <a href="https://rubystyle.guide/#exception-class-messages">Community style guide recommendations for exception handling</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-754: Improper Check for Unusual or Exceptional Conditions - <a href="https://cwe.mitre.org/data/definitions/754.html">Relates to proper error handling and exception management</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>