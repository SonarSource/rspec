<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule raises an issue when a SOQL query lacks a LIMIT clause and could potentially return more than 50,000 records.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Salesforce enforces a governor limit of 50,000 records per SOQL query to maintain platform performance and stability. When a query exceeds this limit, it throws a <code>LimitException: Too many query rows: 50001</code> error, causing your code to fail.</p>
</div>
<div class="paragraph">
<p>Unlimited queries pose several risks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Runtime failures</strong>: Your application will crash when the query returns too many records</p>
</li>
<li>
<p><strong>Performance degradation</strong>: Large result sets consume more memory and processing time</p>
</li>
<li>
<p><strong>Unpredictable behavior</strong>: Query results may vary between environments based on data volume</p>
</li>
<li>
<p><strong>Resource consumption</strong>: Excessive memory usage can impact other operations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This limit is a hard governor limit in Salesforce, meaning it cannot be increased by contacting support. The only solution is to design queries that respect this constraint from the start.</p>
</div>
<div class="paragraph">
<p>Queries without LIMIT clauses are particularly risky when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Querying large standard objects like Account, Contact, or Lead</p>
</li>
<li>
<p>Using broad WHERE conditions that don&#8217;t significantly filter results</p>
</li>
<li>
<p>Working with custom objects that may grow over time</p>
</li>
<li>
<p>Running in production environments with substantial data volumes</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_what_is_the_potential_impact">What is the potential impact?</h3>
<div class="paragraph">
<p>Applications will fail with runtime exceptions when queries exceed 50,000 records. This can cause business processes to halt, data synchronization to fail, and user workflows to break unexpectedly.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_fix_it">How to fix it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add a LIMIT clause to restrict the number of records returned. Combine with appropriate WHERE conditions to filter results effectively.</p>
</div>
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="sect3">
<h4 id="_noncompliant_code_example">Noncompliant code example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">List&lt;Account&gt; accounts = [SELECT Id FROM Account]; // Noncompliant</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compliant_solution">Compliant solution</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-apex" data-lang="apex">List&lt;Account&gt; accounts = [SELECT Id FROM Account WHERE CreatedDate = TODAY LIMIT 10000];</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>SOQL and SOSL Limits - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_gov_limits.htm">Official Salesforce documentation on governor limits including query row limits</a></p>
</li>
<li>
<p>SOQL Best Practices - <a href="https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/sforce_api_calls_soql_best_practices.htm">Salesforce best practices for writing efficient SOQL queries</a></p>
</li>
<li>
<p>Batch Apex Developer Guide - <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_batch.htm">Guide for processing large data sets using Batch Apex</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_standards">Standards</h3>
<div class="ulist">
<ul>
<li>
<p>CWE-400: Uncontrolled Resource Consumption - <a href="https://cwe.mitre.org/data/definitions/400.html">Relates to consuming excessive resources without proper limits</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>